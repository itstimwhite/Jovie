<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Product Flyout Demo - Jovie</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@heroicons/react@2.0.18/24/outline/index.js"></script>
    <style>
      /* Theme CSS Variables for Product Flyout */
      :root {
        /* Base theme colors */
        --bg: #ffffff;
        --fg: #0b0b0c;
        --muted: #6b7280;
        --panel: #f6f7f8;
        --border: #e5e7eb;

        /* Accent colors for features */
        --accent-conv: #6e56cf;
        --accent-analytics: #0ea5e9;
        --accent-speed: #22c55e;
        --accent-beauty: #f59e0b;
        --accent-seo: #ef4444;
        --accent-links: #a855f7;
        --accent-pro: #14b8a6;
      }

      :root.dark {
        --bg: #0b0b0c;
        --fg: #f7f7f8;
        --muted: #98a2b3;
        --panel: #111214;
        --border: #1f2124;
      }

      @keyframes flyout-enter {
        from {
          opacity: 0;
          transform: translateX(-50%) translateY(-4px) scale(0.99);
        }
        to {
          opacity: 1;
          transform: translateX(-50%) translateY(0) scale(1);
        }
      }

      @keyframes flyout-item-enter {
        from {
          opacity: 0;
          transform: translateY(-2px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      .flyout-panel {
        animation: flyout-enter 100ms ease-out;
      }

      .flyout-item {
        animation: flyout-item-enter 120ms ease-out both;
      }

      @media (prefers-reduced-motion: reduce) {
        * {
          animation-duration: 0.01ms !important;
          animation-iteration-count: 1 !important;
          transition-duration: 0.01ms !important;
        }
      }
    </style>
  </head>
  <body class="bg-white text-gray-900">
    <div id="demo-root"></div>

    <script type="text/babel">
      const { useState, useRef, useEffect } = React;

      // Mock features data
      const FEATURES = [
        {
          slug: 'smart-conversions',
          title: 'Smart Conversions',
          blurb: 'AI-optimized CTAs and layouts that adapt automatically.',
          href: '/features/smart-conversions',
          iconPath:
            'M2.25 18L9 11.25l4.306 4.307a11.95 11.95 0 015.814-5.519l2.74-1.22m0 0l-5.94-2.28m5.94 2.28l-2.28 5.941',
          colorVar: '--accent-conv',
        },
        {
          slug: 'real-time-analytics',
          title: 'Real-Time Analytics',
          blurb: 'Instant, reliable insights aligned with your ad platforms.',
          href: '/features/analytics',
          iconPath:
            'M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 013 19.875v-6.75zM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 01-1.125-1.125V8.625zM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 01-1.125-1.125V4.125z',
          colorVar: '--accent-analytics',
        },
        {
          slug: 'blazing-fast',
          title: 'Blazing Fast',
          blurb: 'Sub-100ms loads and 99.99% uptime—fans never wait.',
          href: '/features/performance',
          iconPath:
            'm3.75 13.5 10.5-11.25L12 10.5h8.25L9.75 21.75 12 13.5H3.75Z',
          colorVar: '--accent-speed',
        },
        {
          slug: 'always-beautiful',
          title: 'Always Beautiful',
          blurb: "Instantly polished profiles; you can't make it ugly.",
          href: '/features/design',
          iconPath:
            'M9.813 15.904L9 18.75l-.813-2.846a4.5 4.5 0 00-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 003.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 003.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 00-3.09 3.09zM18.259 8.715L18 9.75l-.259-1.035a3.375 3.375 0 00-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 002.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 002.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 00-2.456 2.456zM16.894 20.567L16.5 21.75l-.394-1.183a2.25 2.25 0 00-1.423-1.423L13.5 18.75l1.183-.394a2.25 2.25 0 001.423-1.423l.394-1.183.394 1.183a2.25 2.25 0 001.423 1.423l1.183.394-1.183.394a2.25 2.25 0 00-1.423 1.423z',
          colorVar: '--accent-beauty',
        },
        {
          slug: 'seo-boost',
          title: 'SEO Boost',
          blurb: 'Structured, fast, and discoverable by default.',
          href: '/features/seo',
          iconPath:
            'm21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z',
          colorVar: '--accent-seo',
        },
        {
          slug: 'deep-links',
          title: 'Deep Links',
          blurb: 'Send fans straight to /listen, /tip, or /subscribe.',
          href: '/features/deep-links',
          iconPath:
            'M13.19 8.688a4.5 4.5 0 011.242 7.244l-4.5 4.5a4.5 4.5 0 01-6.364-6.364l1.757-1.757m13.35-.622l1.757-1.757a4.5 4.5 0 00-6.364-6.364l-4.5 4.5a4.5 4.5 0 001.242 7.244',
          colorVar: '--accent-links',
        },
        {
          slug: 'pro-growth-tools',
          title: 'Pro Growth Tools',
          blurb: 'Pixels, remarketing, and integrations when you scale.',
          href: '/features/pro',
          iconPath:
            'M15.59 14.37a6 6 0 01-5.84 7.38v-4.8m5.84-2.58a14.98 14.98 0 006.16-12.12A14.98 14.98 0 009.631 8.41m5.96 5.96a14.926 14.926 0 01-5.841 2.58m-.119-8.54a6 6 0 00-7.381 5.84h4.8m2.581-5.84a14.927 14.927 0 00-2.58 5.84m2.699 2.7c-.103.021-.207.041-.311.06a15.09 15.09 0 01-2.448-2.448 14.9 14.9 0 01.06-.312m-2.24 2.39a4.493 4.493 0 00-1.757 4.306 4.493 4.493 0 004.306-1.758M16.5 9a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0z',
          colorVar: '--accent-pro',
        },
      ];

      // Icon component
      function Icon({ path, className, style }) {
        return (
          <svg
            className={className}
            style={style}
            fill="none"
            viewBox="0 0 24 24"
            strokeWidth={1.5}
            stroke="currentColor"
          >
            <path strokeLinecap="round" strokeLinejoin="round" d={path} />
          </svg>
        );
      }

      // IconBadge component
      function IconBadge({ feature, className = '' }) {
        return (
          <div
            className={`relative flex h-8 w-8 items-center justify-center rounded-full ${className}`}
            style={{
              backgroundColor: `color-mix(in srgb, var(${feature.colorVar}) 12%, transparent)`,
            }}
          >
            <Icon
              path={feature.iconPath}
              className="h-[18px] w-[18px]"
              style={{
                color: `var(${feature.colorVar})`,
              }}
            />
          </div>
        );
      }

      // FlyoutItem component
      function FlyoutItem({ feature, className = '', style, index }) {
        return (
          <a
            href={feature.href}
            className={`group flex items-start gap-3 rounded-lg p-3 transition-all duration-150 hover:-translate-y-0.5 hover:shadow-sm focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 flyout-item ${className}`}
            style={{
              ...style,
              '--ring-color': `color-mix(in srgb, var(${feature.colorVar}) 25%, transparent)`,
              animationDelay: `${index * 10}ms`,
            }}
            role="menuitem"
          >
            <div className="flex-shrink-0">
              <IconBadge feature={feature} />
            </div>
            <div className="min-w-0 flex-1">
              <h3 className="text-sm font-semibold text-[var(--fg)] group-hover:text-[var(--fg)]">
                {feature.title}
              </h3>
              <p className="mt-1 text-xs text-[var(--muted)] group-hover:text-[var(--muted)]">
                {feature.blurb}
              </p>
            </div>
          </a>
        );
      }

      // ProductFlyout component
      function ProductFlyout({ isOpen, onClose }) {
        if (!isOpen) return null;

        const coreFeatures = FEATURES.slice(0, 4);
        const moreFeatures = FEATURES.slice(4);

        return (
          <div
            role="menu"
            aria-labelledby="product-trigger"
            className="absolute left-1/2 top-full z-50 mt-2 w-[calc(100vw-2rem)] max-w-4xl min-w-80 -translate-x-1/2 transform rounded-lg border bg-[var(--panel)] shadow-lg ring-1 ring-[var(--border)] flyout-panel"
          >
            {/* Desktop Layout */}
            <div className="hidden md:block">
              <div className="grid grid-cols-2 gap-8 p-6">
                {/* Core Features */}
                <div>
                  <h2 className="mb-4 text-sm font-semibold text-[var(--fg)]">
                    Core Features
                  </h2>
                  <div className="space-y-1">
                    {coreFeatures.map((feature, index) => (
                      <FlyoutItem
                        key={feature.slug}
                        feature={feature}
                        index={index}
                        className="hover:bg-[var(--bg)] focus-visible:bg-[var(--bg)]"
                      />
                    ))}
                  </div>
                </div>

                {/* More Features */}
                <div>
                  <h2 className="mb-4 text-sm font-semibold text-[var(--fg)]">
                    More
                  </h2>
                  <div className="space-y-1">
                    {moreFeatures.map((feature, index) => (
                      <FlyoutItem
                        key={feature.slug}
                        feature={feature}
                        index={index + 4}
                        className="hover:bg-[var(--bg)] focus-visible:bg-[var(--bg)]"
                      />
                    ))}
                  </div>
                </div>
              </div>

              {/* Changelog Banner */}
              <div className="border-t border-[var(--border)] px-6 py-3">
                <a
                  href="/changelog"
                  className="group flex items-center justify-between rounded-lg p-2 text-sm text-[var(--muted)] transition-colors hover:bg-[var(--bg)] hover:text-[var(--fg)]"
                  role="menuitem"
                >
                  <span>View Changelog</span>
                  <span className="text-xs opacity-75 group-hover:opacity-100">
                    →
                  </span>
                </a>
              </div>
            </div>

            {/* Mobile Layout */}
            <div className="md:hidden">
              <div className="max-h-[80vh] overflow-y-auto p-4">
                <div className="space-y-1">
                  {FEATURES.map((feature, index) => (
                    <FlyoutItem
                      key={feature.slug}
                      feature={feature}
                      index={index}
                      className="min-h-[44px] hover:bg-[var(--bg)] focus-visible:bg-[var(--bg)]"
                    />
                  ))}
                </div>

                {/* Mobile Changelog */}
                <div className="mt-4 border-t border-[var(--border)] pt-4">
                  <a
                    href="/changelog"
                    className="flex min-h-[44px] items-center justify-between rounded-lg p-3 text-sm text-[var(--muted)] transition-colors hover:bg-[var(--bg)] hover:text-[var(--fg)]"
                    role="menuitem"
                  >
                    <span>View Changelog</span>
                    <span className="text-xs opacity-75">→</span>
                  </a>
                </div>
              </div>
            </div>
          </div>
        );
      }

      // Main Demo Component
      function Demo() {
        const [isOpen, setIsOpen] = useState(false);
        const [isDark, setIsDark] = useState(false);

        const toggleTheme = () => {
          setIsDark(!isDark);
          document.documentElement.classList.toggle('dark');
          document.body.classList.toggle('bg-gray-900');
          document.body.classList.toggle('text-gray-50');
        };

        return (
          <div
            className={`min-h-screen transition-colors ${isDark ? 'dark' : ''}`}
          >
            {/* Header */}
            <header className="sticky top-0 z-50 w-full border-b border-gray-200/10 dark:border-white/10 bg-white/95 dark:bg-[#0D0E12]/95 backdrop-blur-sm">
              <div className="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8">
                <div className="flex h-16 items-center">
                  {/* Logo */}
                  <div className="flex items-center">
                    <span className="text-xl font-bold text-gray-900 dark:text-white">
                      Jovie
                    </span>
                  </div>

                  {/* Navigation */}
                  <div className="flex flex-1 justify-center">
                    <nav className="flex items-center space-x-6">
                      <div className="relative">
                        <button
                          id="product-trigger"
                          onClick={() => setIsOpen(!isOpen)}
                          onMouseEnter={() => setIsOpen(true)}
                          onMouseLeave={() =>
                            setTimeout(() => setIsOpen(false), 150)
                          }
                          aria-expanded={isOpen}
                          aria-haspopup="menu"
                          className="text-sm font-medium text-gray-700 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-gray-400 focus-visible:ring-offset-2 rounded px-2 py-1"
                        >
                          Product
                        </button>
                        <ProductFlyout
                          isOpen={isOpen}
                          onClose={() => setIsOpen(false)}
                        />
                      </div>
                      <a
                        href="/pricing"
                        className="text-sm font-medium text-gray-700 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white transition-colors"
                      >
                        Pricing
                      </a>
                    </nav>
                  </div>

                  {/* Theme Toggle */}
                  <div className="flex items-center">
                    <button
                      onClick={toggleTheme}
                      className="p-2 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200"
                    >
                      {isDark ? '☀️' : '🌙'}
                    </button>
                  </div>
                </div>
              </div>
            </header>

            {/* Demo Content */}
            <main className="mx-auto max-w-7xl px-4 py-12 sm:px-6 lg:px-8">
              <div className="text-center">
                <h1 className="text-4xl font-bold text-gray-900 dark:text-white mb-4">
                  Product Flyout Demo
                </h1>
                <p className="text-lg text-gray-600 dark:text-gray-300 mb-8">
                  Hover over or click the "Product" button in the header to see
                  the Linear-inspired flyout in action.
                </p>

                <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 mt-12">
                  {FEATURES.map((feature) => (
                    <div
                      key={feature.slug}
                      className="p-6 bg-gray-50 dark:bg-gray-800 rounded-lg"
                    >
                      <div className="flex items-center mb-4">
                        <IconBadge feature={feature} />
                        <h3 className="ml-3 text-lg font-semibold text-gray-900 dark:text-white">
                          {feature.title}
                        </h3>
                      </div>
                      <p className="text-gray-600 dark:text-gray-300">
                        {feature.blurb}
                      </p>
                    </div>
                  ))}
                </div>
              </div>
            </main>

            {/* Click outside overlay */}
            {isOpen && (
              <div
                className="fixed inset-0 z-40"
                onClick={() => setIsOpen(false)}
              />
            )}
          </div>
        );
      }

      // Render the demo
      ReactDOM.render(<Demo />, document.getElementById('demo-root'));
    </script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  </body>
</html>
