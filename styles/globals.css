@import "tailwindcss";
@import "@fontsource/inter/400.css";
@import "@fontsource/inter/700.css";
@import "./theme.css";

@plugin '@tailwindcss/typography';

@custom-variant dark (&:is(.dark *));

@layer base {
  :root {
    --font-inter: "Inter";
  }
}

@theme {
  --font-sans:
    var(--font-inter), -apple-system, BlinkMacSystemFont, "SF Pro Text",
    "SF Pro Display", "Segoe UI", Roboto, Arial, sans-serif;

  --color-gray-50: #f9fafb;
  --color-gray-100: #f3f4f6;
  --color-gray-200: #e5e7eb;
  --color-gray-300: #d1d5db;
  --color-gray-400: #9ca3af;
  --color-gray-500: #6b7280;
  --color-gray-600: #4b5563;
  --color-gray-700: #374151;
  --color-gray-800: #1f2937;
  --color-gray-900: #111827;

  --tracking-tighter: -0.02em;
  --tracking-tight: -0.01em;
  --tracking-normal: 0;
  --tracking-wide: 0.01em;
  --tracking-wider: 0.02em;

  --leading-tight: 1.25;
  --leading-snug: 1.375;
  --leading-normal: 1.5;
  --leading-relaxed: 1.625;
  --leading-loose: 2;
}

@utility grid-bg {
  background-image:
    linear-gradient(rgba(0, 0, 0, 0.02) 1px, transparent 1px),
    linear-gradient(90deg, rgba(0, 0, 0, 0.02) 1px, transparent 1px);
  background-size: 50px 50px;
}

@utility grid-bg-dark {
  background-image:
    linear-gradient(rgba(255, 255, 255, 0.02) 1px, transparent 1px),
    linear-gradient(90deg, rgba(255, 255, 255, 0.02) 1px, transparent 1px);
  background-size: 50px 50px;
}

/*
  The default border color has changed to `currentcolor` in Tailwind CSS v4,
  so we've added these compatibility styles to make sure everything still
  looks the same as it did with Tailwind CSS v3.

  If we ever want to remove these styles, we need to add an explicit border
  color utility to any element that depends on these defaults.
*/
@layer base {
  *,
  ::after,
  ::before,
  ::backdrop,
  ::file-selector-button {
    border-color: var(--color-gray-200, currentcolor);
  }
}

/* Standard focus ring utility for all interactive elements */
@utility focus-ring {
  @apply focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-gray-500/50 dark:focus-visible:ring-white/40 dark:focus-visible:ring-offset-gray-900;
}

/* Standard focus ring utility with transparent offset (for elements with white backgrounds) */
@utility focus-ring-transparent-offset {
  @apply focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-transparent focus-visible:ring-gray-500/50 dark:focus-visible:ring-white/40;
}

@utility btn {
  @apply inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors focus-ring disabled:opacity-50 disabled:pointer-events-none;
}

@utility btn-primary {
  @apply bg-gray-900 text-white hover:bg-gray-800 dark:bg-gray-50 dark:text-gray-900 dark:hover:bg-gray-200;
}

@utility btn-secondary {
  @apply bg-gray-100 text-gray-900 hover:bg-gray-200 dark:bg-gray-800 dark:text-gray-50 dark:hover:bg-gray-700;
}

@utility btn-ghost {
  @apply hover:bg-gray-100 dark:hover:bg-gray-800;
}

@utility btn-sm {
  @apply h-8 px-3 text-xs;
}

@utility btn-md {
  @apply h-10 px-4 py-2;
}

@utility btn-lg {
  @apply h-12 px-8 text-base;
}

@utility text-accent {
  color: rgb(var(--accent));
}

/* Menu/Dropdown utilities */
@utility menu-background {
  background-color: rgb(var(--menu-background));
}

@utility menu-border {
  border-color: rgb(var(--menu-border));
}

@utility menu-shadow {
  box-shadow:
    0 10px 15px -3px rgb(var(--menu-shadow)),
    0 4px 6px -2px rgb(var(--menu-shadow));
}

@utility menu-item-hover {
  background-color: rgb(var(--menu-item-hover));
}

@utility menu-separator {
  border-color: rgb(var(--menu-separator));
}

/* Surface utilities */
@utility surface {
  background-color: var(--color-bg-surface);
}

@utility surface-hover {
  background-color: var(--color-bg-surface-hover);
}

@utility surface-pressed {
  background-color: var(--color-bg-surface-hover);
}

/* Text utilities */
@utility text-primary {
  color: var(--color-text-primary-token);
}

@utility text-secondary {
  color: var(--color-text-secondary-token);
}

@utility text-tertiary {
  color: var(--color-text-secondary-token);
}

@utility text-destructive {
  color: #dc2626; /* red-600 */

  &:is(.dark *) {
    color: #f87171; /* red-400 */
  }
}

/* Interactive state utilities */
@utility interactive-hover {
  background-color: rgb(var(--interactive-hover));
}

@utility interactive-pressed {
  background-color: rgb(var(--interactive-pressed));
}

@utility focus-ring-themed {
  @apply focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2;
  --tw-ring-color: rgb(var(--focus-ring));
}

/* Menu animations */
@keyframes user-menu-enter {
  from {
    opacity: 0;
    transform: translateY(-4px) scale(0.99);
  }
  to {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}

@media (prefers-reduced-motion: reduce) {
  * {
    animation-duration: 0.01ms !important;
  }
}

@layer base {
  /* Linear-style dashboard tokens (light) */
  :root {
    --color-bg-base: #ffffff;
    --color-bg-surface: #f6f7f8; /* surface */
    --color-bg-surface-hover: #eef0f2; /* hover */
    --color-border-subtle: #e5e7eb;
    --color-text-primary-token: #0c0c0c;
    --color-text-secondary-token: #6b7280;
    --color-accent: #7c3aed; /* accent */
  }

  /* Dark mode overrides â€” ensure this block comes AFTER light tokens */
  :root.dark {
    /* Linear-style dashboard tokens (dark) */
    --color-bg-base: #0c0c0c; /* app background */
    --color-bg-surface: #151515; /* sidebars/cards */
    --color-bg-surface-hover: #1c1c1c; /* hover */
    --color-border-subtle: #2a2a2a; /* borders */
    --color-text-primary-token: #ededed;
    --color-text-secondary-token: #9a9a9a;
    --color-accent: #7c3aed; /* accent */
  }

  body {
    background-color: var(--color-bg-base);
    color: var(--color-text-primary-token);
    font-feature-settings:
      "rlig" 1,
      "calt" 1;
  }

  h1,
  h2,
  h3,
  h4,
  h5,
  h6 {
    @apply font-semibold tracking-tight;
  }

  h1 {
    @apply text-4xl lg:text-5xl;
  }

  h2 {
    @apply text-3xl lg:text-4xl;
  }

  h3 {
    @apply text-2xl lg:text-3xl;
  }

  h4 {
    @apply text-xl lg:text-2xl;
  }

  h5 {
    @apply text-lg lg:text-xl;
  }

  h6 {
    @apply text-base lg:text-lg;
  }
}

/* Utility bridges for Linear-style tokens */
@utility bg-base {
  background-color: var(--color-bg-base);
}

@utility border-subtle {
  border-color: var(--color-border-subtle);
}

@utility text-accent-token {
  color: var(--color-accent);
}

@utility ring-accent {
  --tw-ring-color: var(--color-accent);
}
