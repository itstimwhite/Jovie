const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./index-y19X6hXw.js","./iframe-BD9qcwu-.js","./preload-helper-Dp1pzeXC.js","./iframe-__OCDmgy.css","./jsx-runtime-nlD-EgCR.js","./chunk-3CN5LOSN-BZRyppmj.js","./env-CfNjJZ1e.js"])))=>i.map(i=>d[i]);
import{j as B}from"./jsx-runtime-nlD-EgCR.js";import{b as ec,g as tc,c as rc,d as sc,e as ic,f as ws,h as nc,i as Vn,j as Xn,k as Yn,l as Qn,m as Zn,n as oc,r as lr}from"./iframe-BD9qcwu-.js";import{b as ac,s as cc,p as eo,c as uc,d as lc,C as hc,a as dc,L as fc,P as Hs,e as pc,f as mc,S as gc,g as _c,i as yc,h as to}from"./chunk-3CN5LOSN-BZRyppmj.js";import{_ as Oe}from"./preload-helper-Dp1pzeXC.js";import{e as Qr}from"./env-CfNjJZ1e.js";const vc=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>Oe(async()=>{const{default:s}=await Promise.resolve().then(()=>rt);return{default:s}},void 0,import.meta.url).then(({default:s})=>s(...r)):e=fetch,(...r)=>e(...r)};class ks extends Error{constructor(e,r="FunctionsError",s){super(e),this.name=r,this.context=s}}class bc extends ks{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Ks extends ks{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Gs extends ks{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Zr;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(Zr||(Zr={}));var wc=function(t,e,r,s){function i(n){return n instanceof r?n:new r(function(o){o(n)})}return new(r||(r=Promise))(function(n,o){function a(l){try{u(s.next(l))}catch(h){o(h)}}function c(l){try{u(s.throw(l))}catch(h){o(h)}}function u(l){l.done?n(l.value):i(l.value).then(a,c)}u((s=s.apply(t,e||[])).next())})};class kc{constructor(e,{headers:r={},customFetch:s,region:i=Zr.Any}={}){this.url=e,this.headers=r,this.region=i,this.fetch=vc(s)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,r={}){var s;return wc(this,void 0,void 0,function*(){try{const{headers:i,method:n,body:o}=r;let a={},{region:c}=r;c||(c=this.region);const u=new URL(`${this.url}/${e}`);c&&c!=="any"&&(a["x-region"]=c,u.searchParams.set("forceFunctionRegion",c));let l;o&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",l=o):typeof o=="string"?(a["Content-Type"]="text/plain",l=o):typeof FormData<"u"&&o instanceof FormData?l=o:(a["Content-Type"]="application/json",l=JSON.stringify(o)));const h=yield this.fetch(u.toString(),{method:n||"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),i),body:l}).catch(S=>{throw new bc(S)}),f=h.headers.get("x-relay-error");if(f&&f==="true")throw new Ks(h);if(!h.ok)throw new Gs(h);let y=((s=h.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),_;return y==="application/json"?_=yield h.json():y==="application/octet-stream"?_=yield h.blob():y==="text/event-stream"?_=h:y==="multipart/form-data"?_=yield h.formData():_=yield h.text(),{data:_,error:null,response:h}}catch(i){return{data:null,error:i,response:i instanceof Gs||i instanceof Ks?i.context:void 0}}})}}var K={},Be={},ze={},Fe={},Je={},He={},Sc=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof globalThis<"u")return globalThis;throw new Error("unable to locate global object")},tt=Sc();const Ac=tt.fetch,ro=tt.fetch.bind(tt),so=tt.Headers,Pc=tt.Request,Ec=tt.Response,rt=Object.freeze(Object.defineProperty({__proto__:null,Headers:so,Request:Pc,Response:Ec,default:ro,fetch:Ac},Symbol.toStringTag,{value:"Module"})),Oc=ec(rt);var Ct={},Ws;function io(){if(Ws)return Ct;Ws=1,Object.defineProperty(Ct,"__esModule",{value:!0});class t extends Error{constructor(r){super(r.message),this.name="PostgrestError",this.details=r.details,this.hint=r.hint,this.code=r.code}}return Ct.default=t,Ct}var Vs;function no(){if(Vs)return He;Vs=1;var t=He&&He.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(He,"__esModule",{value:!0});const e=t(Oc),r=t(io());class s{constructor(n){this.shouldThrowOnError=!1,this.method=n.method,this.url=n.url,this.headers=n.headers,this.schema=n.schema,this.body=n.body,this.shouldThrowOnError=n.shouldThrowOnError,this.signal=n.signal,this.isMaybeSingle=n.isMaybeSingle,n.fetch?this.fetch=n.fetch:typeof fetch>"u"?this.fetch=e.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(n,o){return this.headers=Object.assign({},this.headers),this.headers[n]=o,this}then(n,o){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const a=this.fetch;let c=a(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async u=>{var l,h,f;let y=null,_=null,S=null,g=u.status,w=u.statusText;if(u.ok){if(this.method!=="HEAD"){const d=await u.text();d===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?_=d:_=JSON.parse(d))}const b=(l=this.headers.Prefer)===null||l===void 0?void 0:l.match(/count=(exact|planned|estimated)/),m=(h=u.headers.get("content-range"))===null||h===void 0?void 0:h.split("/");b&&m&&m.length>1&&(S=parseInt(m[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(_)&&(_.length>1?(y={code:"PGRST116",details:`Results contain ${_.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},_=null,S=null,g=406,w="Not Acceptable"):_.length===1?_=_[0]:_=null)}else{const b=await u.text();try{y=JSON.parse(b),Array.isArray(y)&&u.status===404&&(_=[],y=null,g=200,w="OK")}catch{u.status===404&&b===""?(g=204,w="No Content"):y={message:b}}if(y&&this.isMaybeSingle&&(!((f=y==null?void 0:y.details)===null||f===void 0)&&f.includes("0 rows"))&&(y=null,g=200,w="OK"),y&&this.shouldThrowOnError)throw new r.default(y)}return{error:y,data:_,count:S,status:g,statusText:w}});return this.shouldThrowOnError||(c=c.catch(u=>{var l,h,f;return{error:{message:`${(l=u==null?void 0:u.name)!==null&&l!==void 0?l:"FetchError"}: ${u==null?void 0:u.message}`,details:`${(h=u==null?void 0:u.stack)!==null&&h!==void 0?h:""}`,hint:"",code:`${(f=u==null?void 0:u.code)!==null&&f!==void 0?f:""}`},data:null,count:null,status:0,statusText:""}})),c.then(n,o)}returns(){return this}overrideTypes(){return this}}return He.default=s,He}var Xs;function oo(){if(Xs)return Je;Xs=1;var t=Je&&Je.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(Je,"__esModule",{value:!0});const e=t(no());class r extends e.default{select(i){let n=!1;const o=(i??"*").split("").map(a=>/\s/.test(a)&&!n?"":(a==='"'&&(n=!n),a)).join("");return this.url.searchParams.set("select",o),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(i,{ascending:n=!0,nullsFirst:o,foreignTable:a,referencedTable:c=a}={}){const u=c?`${c}.order`:"order",l=this.url.searchParams.get(u);return this.url.searchParams.set(u,`${l?`${l},`:""}${i}.${n?"asc":"desc"}${o===void 0?"":o?".nullsfirst":".nullslast"}`),this}limit(i,{foreignTable:n,referencedTable:o=n}={}){const a=typeof o>"u"?"limit":`${o}.limit`;return this.url.searchParams.set(a,`${i}`),this}range(i,n,{foreignTable:o,referencedTable:a=o}={}){const c=typeof a>"u"?"offset":`${a}.offset`,u=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(c,`${i}`),this.url.searchParams.set(u,`${n-i+1}`),this}abortSignal(i){return this.signal=i,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:i=!1,verbose:n=!1,settings:o=!1,buffers:a=!1,wal:c=!1,format:u="text"}={}){var l;const h=[i?"analyze":null,n?"verbose":null,o?"settings":null,a?"buffers":null,c?"wal":null].filter(Boolean).join("|"),f=(l=this.headers.Accept)!==null&&l!==void 0?l:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${u}; for="${f}"; options=${h};`,u==="json"?this:this}rollback(){var i;return((i=this.headers.Prefer)!==null&&i!==void 0?i:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}return Je.default=r,Je}var Ys;function Ss(){if(Ys)return Fe;Ys=1;var t=Fe&&Fe.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(Fe,"__esModule",{value:!0});const e=t(oo());class r extends e.default{eq(i,n){return this.url.searchParams.append(i,`eq.${n}`),this}neq(i,n){return this.url.searchParams.append(i,`neq.${n}`),this}gt(i,n){return this.url.searchParams.append(i,`gt.${n}`),this}gte(i,n){return this.url.searchParams.append(i,`gte.${n}`),this}lt(i,n){return this.url.searchParams.append(i,`lt.${n}`),this}lte(i,n){return this.url.searchParams.append(i,`lte.${n}`),this}like(i,n){return this.url.searchParams.append(i,`like.${n}`),this}likeAllOf(i,n){return this.url.searchParams.append(i,`like(all).{${n.join(",")}}`),this}likeAnyOf(i,n){return this.url.searchParams.append(i,`like(any).{${n.join(",")}}`),this}ilike(i,n){return this.url.searchParams.append(i,`ilike.${n}`),this}ilikeAllOf(i,n){return this.url.searchParams.append(i,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(i,n){return this.url.searchParams.append(i,`ilike(any).{${n.join(",")}}`),this}is(i,n){return this.url.searchParams.append(i,`is.${n}`),this}in(i,n){const o=Array.from(new Set(n)).map(a=>typeof a=="string"&&new RegExp("[,()]").test(a)?`"${a}"`:`${a}`).join(",");return this.url.searchParams.append(i,`in.(${o})`),this}contains(i,n){return typeof n=="string"?this.url.searchParams.append(i,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(i,`cs.{${n.join(",")}}`):this.url.searchParams.append(i,`cs.${JSON.stringify(n)}`),this}containedBy(i,n){return typeof n=="string"?this.url.searchParams.append(i,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(i,`cd.{${n.join(",")}}`):this.url.searchParams.append(i,`cd.${JSON.stringify(n)}`),this}rangeGt(i,n){return this.url.searchParams.append(i,`sr.${n}`),this}rangeGte(i,n){return this.url.searchParams.append(i,`nxl.${n}`),this}rangeLt(i,n){return this.url.searchParams.append(i,`sl.${n}`),this}rangeLte(i,n){return this.url.searchParams.append(i,`nxr.${n}`),this}rangeAdjacent(i,n){return this.url.searchParams.append(i,`adj.${n}`),this}overlaps(i,n){return typeof n=="string"?this.url.searchParams.append(i,`ov.${n}`):this.url.searchParams.append(i,`ov.{${n.join(",")}}`),this}textSearch(i,n,{config:o,type:a}={}){let c="";a==="plain"?c="pl":a==="phrase"?c="ph":a==="websearch"&&(c="w");const u=o===void 0?"":`(${o})`;return this.url.searchParams.append(i,`${c}fts${u}.${n}`),this}match(i){return Object.entries(i).forEach(([n,o])=>{this.url.searchParams.append(n,`eq.${o}`)}),this}not(i,n,o){return this.url.searchParams.append(i,`not.${n}.${o}`),this}or(i,{foreignTable:n,referencedTable:o=n}={}){const a=o?`${o}.or`:"or";return this.url.searchParams.append(a,`(${i})`),this}filter(i,n,o){return this.url.searchParams.append(i,`${n}.${o}`),this}}return Fe.default=r,Fe}var Qs;function ao(){if(Qs)return ze;Qs=1;var t=ze&&ze.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(ze,"__esModule",{value:!0});const e=t(Ss());class r{constructor(i,{headers:n={},schema:o,fetch:a}){this.url=i,this.headers=n,this.schema=o,this.fetch=a}select(i,{head:n=!1,count:o}={}){const a=n?"HEAD":"GET";let c=!1;const u=(i??"*").split("").map(l=>/\s/.test(l)&&!c?"":(l==='"'&&(c=!c),l)).join("");return this.url.searchParams.set("select",u),o&&(this.headers.Prefer=`count=${o}`),new e.default({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(i,{count:n,defaultToNull:o=!0}={}){const a="POST",c=[];if(this.headers.Prefer&&c.push(this.headers.Prefer),n&&c.push(`count=${n}`),o||c.push("missing=default"),this.headers.Prefer=c.join(","),Array.isArray(i)){const u=i.reduce((l,h)=>l.concat(Object.keys(h)),[]);if(u.length>0){const l=[...new Set(u)].map(h=>`"${h}"`);this.url.searchParams.set("columns",l.join(","))}}return new e.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:this.fetch,allowEmpty:!1})}upsert(i,{onConflict:n,ignoreDuplicates:o=!1,count:a,defaultToNull:c=!0}={}){const u="POST",l=[`resolution=${o?"ignore":"merge"}-duplicates`];if(n!==void 0&&this.url.searchParams.set("on_conflict",n),this.headers.Prefer&&l.push(this.headers.Prefer),a&&l.push(`count=${a}`),c||l.push("missing=default"),this.headers.Prefer=l.join(","),Array.isArray(i)){const h=i.reduce((f,y)=>f.concat(Object.keys(y)),[]);if(h.length>0){const f=[...new Set(h)].map(y=>`"${y}"`);this.url.searchParams.set("columns",f.join(","))}}return new e.default({method:u,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:this.fetch,allowEmpty:!1})}update(i,{count:n}={}){const o="PATCH",a=[];return this.headers.Prefer&&a.push(this.headers.Prefer),n&&a.push(`count=${n}`),this.headers.Prefer=a.join(","),new e.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:this.fetch,allowEmpty:!1})}delete({count:i}={}){const n="DELETE",o=[];return i&&o.push(`count=${i}`),this.headers.Prefer&&o.unshift(this.headers.Prefer),this.headers.Prefer=o.join(","),new e.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}return ze.default=r,ze}var ot={},at={},Zs;function Tc(){return Zs||(Zs=1,Object.defineProperty(at,"__esModule",{value:!0}),at.version=void 0,at.version="0.0.0-automated"),at}var ei;function xc(){if(ei)return ot;ei=1,Object.defineProperty(ot,"__esModule",{value:!0}),ot.DEFAULT_HEADERS=void 0;const t=Tc();return ot.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${t.version}`},ot}var ti;function Ic(){if(ti)return Be;ti=1;var t=Be&&Be.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Be,"__esModule",{value:!0});const e=t(ao()),r=t(Ss()),s=xc();class i{constructor(o,{headers:a={},schema:c,fetch:u}={}){this.url=o,this.headers=Object.assign(Object.assign({},s.DEFAULT_HEADERS),a),this.schemaName=c,this.fetch=u}from(o){const a=new URL(`${this.url}/${o}`);return new e.default(a,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(o){return new i(this.url,{headers:this.headers,schema:o,fetch:this.fetch})}rpc(o,a={},{head:c=!1,get:u=!1,count:l}={}){let h;const f=new URL(`${this.url}/rpc/${o}`);let y;c||u?(h=c?"HEAD":"GET",Object.entries(a).filter(([S,g])=>g!==void 0).map(([S,g])=>[S,Array.isArray(g)?`{${g.join(",")}}`:`${g}`]).forEach(([S,g])=>{f.searchParams.append(S,g)})):(h="POST",y=a);const _=Object.assign({},this.headers);return l&&(_.Prefer=`count=${l}`),new r.default({method:h,url:f,headers:_,schema:this.schemaName,body:y,fetch:this.fetch,allowEmpty:!1})}}return Be.default=i,Be}var ri;function Rc(){if(ri)return K;ri=1;var t=K&&K.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(K,"__esModule",{value:!0}),K.PostgrestError=K.PostgrestBuilder=K.PostgrestTransformBuilder=K.PostgrestFilterBuilder=K.PostgrestQueryBuilder=K.PostgrestClient=void 0;const e=t(Ic());K.PostgrestClient=e.default;const r=t(ao());K.PostgrestQueryBuilder=r.default;const s=t(Ss());K.PostgrestFilterBuilder=s.default;const i=t(oo());K.PostgrestTransformBuilder=i.default;const n=t(no());K.PostgrestBuilder=n.default;const o=t(io());return K.PostgrestError=o.default,K.default={PostgrestClient:e.default,PostgrestQueryBuilder:r.default,PostgrestFilterBuilder:s.default,PostgrestTransformBuilder:i.default,PostgrestBuilder:n.default,PostgrestError:o.default},K}var Cc=Rc();const jc=tc(Cc),{PostgrestClient:Uc,PostgrestQueryBuilder:Pp,PostgrestFilterBuilder:Ep,PostgrestTransformBuilder:Op,PostgrestBuilder:Tp,PostgrestError:xp}=jc;function qc(){if(typeof WebSocket<"u")return WebSocket;if(typeof globalThis.WebSocket<"u")return globalThis.WebSocket;if(typeof window.WebSocket<"u")return window.WebSocket;if(typeof self.WebSocket<"u")return self.WebSocket;throw new Error("`WebSocket` is not supported in this environment")}const Nc=qc(),Lc="2.11.15",$c=`realtime-js/${Lc}`,Dc="1.0.0",co=1e4,Mc=1e3;var bt;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(bt||(bt={}));var Z;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(Z||(Z={}));var he;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(he||(he={}));var es;(function(t){t.websocket="websocket"})(es||(es={}));var je;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(je||(je={}));class Bc{constructor(){this.HEADER_LENGTH=1}decode(e,r){return e.constructor===ArrayBuffer?r(this._binaryDecode(e)):r(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const r=new DataView(e),s=new TextDecoder;return this._decodeBroadcast(e,r,s)}_decodeBroadcast(e,r,s){const i=r.getUint8(1),n=r.getUint8(2);let o=this.HEADER_LENGTH+2;const a=s.decode(e.slice(o,o+i));o=o+i;const c=s.decode(e.slice(o,o+n));o=o+n;const u=JSON.parse(s.decode(e.slice(o,e.byteLength)));return{ref:null,topic:a,event:c,payload:u}}}class uo{constructor(e,r){this.callback=e,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var D;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(D||(D={}));const si=(t,e,r={})=>{var s;const i=(s=r.skipTypes)!==null&&s!==void 0?s:[];return Object.keys(e).reduce((n,o)=>(n[o]=zc(o,t,e,i),n),{})},zc=(t,e,r,s)=>{const i=e.find(a=>a.name===t),n=i==null?void 0:i.type,o=r[t];return n&&!s.includes(n)?lo(n,o):ts(o)},lo=(t,e)=>{if(t.charAt(0)==="_"){const r=t.slice(1,t.length);return Kc(e,r)}switch(t){case D.bool:return Fc(e);case D.float4:case D.float8:case D.int2:case D.int4:case D.int8:case D.numeric:case D.oid:return Jc(e);case D.json:case D.jsonb:return Hc(e);case D.timestamp:return Gc(e);case D.abstime:case D.date:case D.daterange:case D.int4range:case D.int8range:case D.money:case D.reltime:case D.text:case D.time:case D.timestamptz:case D.timetz:case D.tsrange:case D.tstzrange:return ts(e);default:return ts(e)}},ts=t=>t,Fc=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},Jc=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},Hc=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},Kc=(t,e)=>{if(typeof t!="string")return t;const r=t.length-1,s=t[r];if(t[0]==="{"&&s==="}"){let n;const o=t.slice(1,r);try{n=JSON.parse("["+o+"]")}catch{n=o?o.split(","):[]}return n.map(a=>lo(e,a))}return t},Gc=t=>typeof t=="string"?t.replace(" ","T"):t,ho=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class hr{constructor(e,r,s={},i=co){this.channel=e,this.event=r,this.payload=s,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,r){var s;return this._hasReceived(e)&&r((s=this.receivedResp)===null||s===void 0?void 0:s.response),this.recHooks.push({status:e,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:r}){this.recHooks.filter(s=>s.status===e).forEach(s=>s.callback(r))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var ii;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(ii||(ii={}));class wt{constructor(e,r){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},i=>{const{onJoin:n,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=wt.syncState(this.state,i,n,o),this.pendingDiffs.forEach(c=>{this.state=wt.syncDiff(this.state,c,n,o)}),this.pendingDiffs=[],a()}),this.channel._on(s.diff,{},i=>{const{onJoin:n,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=wt.syncDiff(this.state,i,n,o),a())}),this.onJoin((i,n,o)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:n,newPresences:o})}),this.onLeave((i,n,o)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:n,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,r,s,i){const n=this.cloneDeep(e),o=this.transformState(r),a={},c={};return this.map(n,(u,l)=>{o[u]||(c[u]=l)}),this.map(o,(u,l)=>{const h=n[u];if(h){const f=l.map(g=>g.presence_ref),y=h.map(g=>g.presence_ref),_=l.filter(g=>y.indexOf(g.presence_ref)<0),S=h.filter(g=>f.indexOf(g.presence_ref)<0);_.length>0&&(a[u]=_),S.length>0&&(c[u]=S)}else a[u]=l}),this.syncDiff(n,{joins:a,leaves:c},s,i)}static syncDiff(e,r,s,i){const{joins:n,leaves:o}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return s||(s=()=>{}),i||(i=()=>{}),this.map(n,(a,c)=>{var u;const l=(u=e[a])!==null&&u!==void 0?u:[];if(e[a]=this.cloneDeep(c),l.length>0){const h=e[a].map(y=>y.presence_ref),f=l.filter(y=>h.indexOf(y.presence_ref)<0);e[a].unshift(...f)}s(a,l,c)}),this.map(o,(a,c)=>{let u=e[a];if(!u)return;const l=c.map(h=>h.presence_ref);u=u.filter(h=>l.indexOf(h.presence_ref)<0),e[a]=u,i(a,u,c),u.length===0&&delete e[a]}),e}static map(e,r){return Object.getOwnPropertyNames(e).map(s=>r(s,e[s]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((r,s)=>{const i=e[s];return"metas"in i?r[s]=i.metas.map(n=>(n.presence_ref=n.phx_ref,delete n.phx_ref,delete n.phx_ref_prev,n)):r[s]=i,r},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var ni;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(ni||(ni={}));var oi;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(oi||(oi={}));var ve;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(ve||(ve={}));class As{constructor(e,r={config:{}},s){this.topic=e,this.params=r,this.socket=s,this.bindings={},this.state=Z.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new hr(this,he.join,this.params,this.timeout),this.rejoinTimer=new uo(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Z.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(i=>i.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Z.closed,this.socket._remove(this)}),this._onError(i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=Z.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Z.errored,this.rejoinTimer.scheduleTimeout())}),this._on(he.reply,{},(i,n)=>{this._trigger(this._replyEventName(n),i)}),this.presence=new wt(this),this.broadcastEndpointURL=ho(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,r=this.timeout){var s,i;if(this.socket.isConnected()||this.socket.connect(),this.state==Z.closed){const{config:{broadcast:n,presence:o,private:a}}=this.params;this._onError(l=>e==null?void 0:e(ve.CHANNEL_ERROR,l)),this._onClose(()=>e==null?void 0:e(ve.CLOSED));const c={},u={broadcast:n,presence:o,postgres_changes:(i=(s=this.bindings.postgres_changes)===null||s===void 0?void 0:s.map(l=>l.filter))!==null&&i!==void 0?i:[],private:a};this.socket.accessTokenValue&&(c.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:u},c)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:l})=>{var h;if(this.socket.setAuth(),l===void 0){e==null||e(ve.SUBSCRIBED);return}else{const f=this.bindings.postgres_changes,y=(h=f==null?void 0:f.length)!==null&&h!==void 0?h:0,_=[];for(let S=0;S<y;S++){const g=f[S],{filter:{event:w,schema:k,table:b,filter:m}}=g,d=l&&l[S];if(d&&d.event===w&&d.schema===k&&d.table===b&&d.filter===m)_.push(Object.assign(Object.assign({},g),{id:d.id}));else{this.unsubscribe(),this.state=Z.errored,e==null||e(ve.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=_,e&&e(ve.SUBSCRIBED);return}}).receive("error",l=>{this.state=Z.errored,e==null||e(ve.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(l).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(ve.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,r={}){return await this.send({type:"presence",event:"track",payload:e},r.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,r,s){return this._on(e,r,s)}async send(e,r={}){var s,i;if(!this._canPush()&&e.type==="broadcast"){const{event:n,payload:o}=e,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:n,payload:o,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(s=r.timeout)!==null&&s!==void 0?s:this.timeout);return await((i=u.body)===null||i===void 0?void 0:i.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(n=>{var o,a,c;const u=this._push(e.type,e,r.timeout||this.timeout);e.type==="broadcast"&&!(!((c=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||c===void 0)&&c.ack)&&n("ok"),u.receive("ok",()=>n("ok")),u.receive("error",()=>n("error")),u.receive("timeout",()=>n("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Z.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(he.close,"leave",this._joinRef())};this.joinPush.destroy();let s=null;return new Promise(i=>{s=new hr(this,he.leave,{},e),s.receive("ok",()=>{r(),i("ok")}).receive("timeout",()=>{r(),i("timed out")}).receive("error",()=>{i("error")}),s.send(),this._canPush()||s.trigger("ok",{})}).finally(()=>{s==null||s.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(e,r,s){const i=new AbortController,n=setTimeout(()=>i.abort(),s),o=await this.socket.fetch(e,Object.assign(Object.assign({},r),{signal:i.signal}));return clearTimeout(n),o}_push(e,r,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new hr(this,e,r,s);return this._canPush()?i.send():(i.startTimeout(),this.pushBuffer.push(i)),i}_onMessage(e,r,s){return r}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,r,s){var i,n;const o=e.toLocaleLowerCase(),{close:a,error:c,leave:u,join:l}=he;if(s&&[a,c,u,l].indexOf(o)>=0&&s!==this._joinRef())return;let f=this._onMessage(o,r,s);if(r&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(y=>{var _,S,g;return((_=y.filter)===null||_===void 0?void 0:_.event)==="*"||((g=(S=y.filter)===null||S===void 0?void 0:S.event)===null||g===void 0?void 0:g.toLocaleLowerCase())===o}).map(y=>y.callback(f,s)):(n=this.bindings[o])===null||n===void 0||n.filter(y=>{var _,S,g,w,k,b;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in y){const m=y.id,d=(_=y.filter)===null||_===void 0?void 0:_.event;return m&&((S=r.ids)===null||S===void 0?void 0:S.includes(m))&&(d==="*"||(d==null?void 0:d.toLocaleLowerCase())===((g=r.data)===null||g===void 0?void 0:g.type.toLocaleLowerCase()))}else{const m=(k=(w=y==null?void 0:y.filter)===null||w===void 0?void 0:w.event)===null||k===void 0?void 0:k.toLocaleLowerCase();return m==="*"||m===((b=r==null?void 0:r.event)===null||b===void 0?void 0:b.toLocaleLowerCase())}else return y.type.toLocaleLowerCase()===o}).map(y=>{if(typeof f=="object"&&"ids"in f){const _=f.data,{schema:S,table:g,commit_timestamp:w,type:k,errors:b}=_;f=Object.assign(Object.assign({},{schema:S,table:g,commit_timestamp:w,eventType:k,new:{},old:{},errors:b}),this._getPayloadRecords(_))}y.callback(f,s)})}_isClosed(){return this.state===Z.closed}_isJoined(){return this.state===Z.joined}_isJoining(){return this.state===Z.joining}_isLeaving(){return this.state===Z.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,r,s){const i=e.toLocaleLowerCase(),n={type:i,filter:r,callback:s};return this.bindings[i]?this.bindings[i].push(n):this.bindings[i]=[n],this}_off(e,r){const s=e.toLocaleLowerCase();return this.bindings[s]=this.bindings[s].filter(i=>{var n;return!(((n=i.type)===null||n===void 0?void 0:n.toLocaleLowerCase())===s&&As.isEqual(i.filter,r))}),this}static isEqual(e,r){if(Object.keys(e).length!==Object.keys(r).length)return!1;for(const s in e)if(e[s]!==r[s])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(he.close,{},e)}_onError(e){this._on(he.error,{},r=>e(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Z.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const r={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(r.new=si(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(r.old=si(e.columns,e.old_record)),r}}const ai=()=>{},Wc=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Vc{constructor(e,r){var s;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=co,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=ai,this.ref=0,this.logger=ai,this.conn=null,this.sendBuffer=[],this.serializer=new Bc,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=n=>{let o;return n?o=n:typeof fetch>"u"?o=(...a)=>Oe(async()=>{const{default:c}=await Promise.resolve().then(()=>rt);return{default:c}},void 0,import.meta.url).then(({default:c})=>c(...a)):o=fetch,(...a)=>o(...a)},this.endPoint=`${e}/${es.websocket}`,this.httpEndpoint=ho(e),r!=null&&r.transport?this.transport=r.transport:this.transport=null,r!=null&&r.params&&(this.params=r.params),r!=null&&r.timeout&&(this.timeout=r.timeout),r!=null&&r.logger&&(this.logger=r.logger),(r!=null&&r.logLevel||r!=null&&r.log_level)&&(this.logLevel=r.logLevel||r.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),r!=null&&r.heartbeatIntervalMs&&(this.heartbeatIntervalMs=r.heartbeatIntervalMs);const i=(s=r==null?void 0:r.params)===null||s===void 0?void 0:s.apikey;if(i&&(this.accessTokenValue=i,this.apiKey=i),this.reconnectAfterMs=r!=null&&r.reconnectAfterMs?r.reconnectAfterMs:n=>[1e3,2e3,5e3,1e4][n-1]||1e4,this.encode=r!=null&&r.encode?r.encode:(n,o)=>o(JSON.stringify(n)),this.decode=r!=null&&r.decode?r.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new uo(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(r==null?void 0:r.fetch),r!=null&&r.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(r==null?void 0:r.worker)||!1,this.workerUrl=r==null?void 0:r.workerUrl}this.accessToken=(r==null?void 0:r.accessToken)||null}connect(){if(!this.conn){if(this.transport||(this.transport=Nc),!this.transport)throw new Error("No transport provided");this.conn=new this.transport(this.endpointURL()),this.setupConnection()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Dc}))}disconnect(e,r){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,r??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(s=>s.teardown()))}getChannels(){return this.channels}async removeChannel(e){const r=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const e=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,r,s){this.logger(e,r,s)}connectionState(){switch(this.conn&&this.conn.readyState){case bt.connecting:return je.Connecting;case bt.open:return je.Open;case bt.closing:return je.Closing;default:return je.Closed}}isConnected(){return this.connectionState()===je.Open}channel(e,r={config:{}}){const s=`realtime:${e}`,i=this.getChannels().find(n=>n.topic===s);if(i)return i;{const n=new As(`realtime:${e}`,r,this);return this.channels.push(n),n}}push(e){const{topic:r,event:s,payload:i,ref:n}=e,o=()=>{this.encode(e,a=>{var c;(c=this.conn)===null||c===void 0||c.send(a)})};this.log("push",`${r} ${s} (${n})`,i),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){let r=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(s=>{const i={access_token:r,version:$c};r&&s.updateJoinPayload(i),s.joinedOnce&&s._isJoined()&&s._push(he.access_token,{access_token:r})}))}async sendHeartbeat(){var e;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(e=this.conn)===null||e===void 0||e.close(Mc,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let r=this.channels.find(s=>s.topic===e&&(s._isJoined()||s._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${e}"`),r.unsubscribe())}_remove(e){this.channels=this.channels.filter(r=>r.topic!==e.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,r=>{let{topic:s,event:i,payload:n,ref:o}=r;s==="phoenix"&&i==="phx_reply"&&this.heartbeatCallback(r.payload.status=="ok"?"ok":"error"),o&&o===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${n.status||""} ${s} ${i} ${o&&"("+o+")"||""}`,n),Array.from(this.channels).filter(a=>a._isMember(s)).forEach(a=>a._trigger(i,n,o)),this.stateChangeCallbacks.message.forEach(a=>a(r))})}_onConnOpen(){this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this.stateChangeCallbacks.open.forEach(e=>e())}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(r=>r(e))}_onConnError(e){this.log("transport",`${e}`),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(r=>r(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(he.error))}_appendParams(e,r){if(Object.keys(r).length===0)return e;const s=e.match(/\?/)?"&":"?",i=new URLSearchParams(r);return`${e}${s}${i}`}_workerObjectUrl(e){let r;if(e)r=e;else{const s=new Blob([Wc],{type:"application/javascript"});r=URL.createObjectURL(s)}return r}}class Ps extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function G(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class Xc extends Ps{constructor(e,r,s){super(e),this.name="StorageApiError",this.status=r,this.statusCode=s}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class rs extends Ps{constructor(e,r){super(e),this.name="StorageUnknownError",this.originalError=r}}var Yc=function(t,e,r,s){function i(n){return n instanceof r?n:new r(function(o){o(n)})}return new(r||(r=Promise))(function(n,o){function a(l){try{u(s.next(l))}catch(h){o(h)}}function c(l){try{u(s.throw(l))}catch(h){o(h)}}function u(l){l.done?n(l.value):i(l.value).then(a,c)}u((s=s.apply(t,e||[])).next())})};const fo=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>Oe(async()=>{const{default:s}=await Promise.resolve().then(()=>rt);return{default:s}},void 0,import.meta.url).then(({default:s})=>s(...r)):e=fetch,(...r)=>e(...r)},Qc=()=>Yc(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Oe(()=>Promise.resolve().then(()=>rt),void 0,import.meta.url)).Response:Response}),ss=t=>{if(Array.isArray(t))return t.map(r=>ss(r));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([r,s])=>{const i=r.replace(/([-_][a-z])/gi,n=>n.toUpperCase().replace(/[-_]/g,""));e[i]=ss(s)}),e},Zc=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)};var qe=function(t,e,r,s){function i(n){return n instanceof r?n:new r(function(o){o(n)})}return new(r||(r=Promise))(function(n,o){function a(l){try{u(s.next(l))}catch(h){o(h)}}function c(l){try{u(s.throw(l))}catch(h){o(h)}}function u(l){l.done?n(l.value):i(l.value).then(a,c)}u((s=s.apply(t,e||[])).next())})};const dr=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),eu=(t,e,r)=>qe(void 0,void 0,void 0,function*(){const s=yield Qc();t instanceof s&&!(r!=null&&r.noResolveJson)?t.json().then(i=>{const n=t.status||500,o=(i==null?void 0:i.statusCode)||n+"";e(new Xc(dr(i),n,o))}).catch(i=>{e(new rs(dr(i),i))}):e(new rs(dr(t),t))}),tu=(t,e,r,s)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!s?i:(Zc(s)?(i.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),i.body=JSON.stringify(s)):i.body=s,Object.assign(Object.assign({},i),r))};function At(t,e,r,s,i,n){return qe(this,void 0,void 0,function*(){return new Promise((o,a)=>{t(r,tu(e,s,i,n)).then(c=>{if(!c.ok)throw c;return s!=null&&s.noResolveJson?c:c.json()}).then(c=>o(c)).catch(c=>eu(c,a,s))})})}function Kt(t,e,r,s){return qe(this,void 0,void 0,function*(){return At(t,"GET",e,r,s)})}function be(t,e,r,s,i){return qe(this,void 0,void 0,function*(){return At(t,"POST",e,s,i,r)})}function is(t,e,r,s,i){return qe(this,void 0,void 0,function*(){return At(t,"PUT",e,s,i,r)})}function ru(t,e,r,s){return qe(this,void 0,void 0,function*(){return At(t,"HEAD",e,Object.assign(Object.assign({},r),{noResolveJson:!0}),s)})}function po(t,e,r,s,i){return qe(this,void 0,void 0,function*(){return At(t,"DELETE",e,s,i,r)})}var ie=function(t,e,r,s){function i(n){return n instanceof r?n:new r(function(o){o(n)})}return new(r||(r=Promise))(function(n,o){function a(l){try{u(s.next(l))}catch(h){o(h)}}function c(l){try{u(s.throw(l))}catch(h){o(h)}}function u(l){l.done?n(l.value):i(l.value).then(a,c)}u((s=s.apply(t,e||[])).next())})};const su={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},ci={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class iu{constructor(e,r={},s,i){this.url=e,this.headers=r,this.bucketId=s,this.fetch=fo(i)}uploadOrUpdate(e,r,s,i){return ie(this,void 0,void 0,function*(){try{let n;const o=Object.assign(Object.assign({},ci),i);let a=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const c=o.metadata;typeof Blob<"u"&&s instanceof Blob?(n=new FormData,n.append("cacheControl",o.cacheControl),c&&n.append("metadata",this.encodeMetadata(c)),n.append("",s)):typeof FormData<"u"&&s instanceof FormData?(n=s,n.append("cacheControl",o.cacheControl),c&&n.append("metadata",this.encodeMetadata(c))):(n=s,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,c&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),i!=null&&i.headers&&(a=Object.assign(Object.assign({},a),i.headers));const u=this._removeEmptyFolders(r),l=this._getFinalPath(u),h=yield(e=="PUT"?is:be)(this.fetch,`${this.url}/object/${l}`,n,Object.assign({headers:a},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:u,id:h.Id,fullPath:h.Key},error:null}}catch(n){if(G(n))return{data:null,error:n};throw n}})}upload(e,r,s){return ie(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,r,s)})}uploadToSignedUrl(e,r,s,i){return ie(this,void 0,void 0,function*(){const n=this._removeEmptyFolders(e),o=this._getFinalPath(n),a=new URL(this.url+`/object/upload/sign/${o}`);a.searchParams.set("token",r);try{let c;const u=Object.assign({upsert:ci.upsert},i),l=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&s instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",s)):typeof FormData<"u"&&s instanceof FormData?(c=s,c.append("cacheControl",u.cacheControl)):(c=s,l["cache-control"]=`max-age=${u.cacheControl}`,l["content-type"]=u.contentType);const h=yield is(this.fetch,a.toString(),c,{headers:l});return{data:{path:n,fullPath:h.Key},error:null}}catch(c){if(G(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(e,r){return ie(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e);const i=Object.assign({},this.headers);r!=null&&r.upsert&&(i["x-upsert"]="true");const n=yield be(this.fetch,`${this.url}/object/upload/sign/${s}`,{},{headers:i}),o=new URL(this.url+n.url),a=o.searchParams.get("token");if(!a)throw new Ps("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:a},error:null}}catch(s){if(G(s))return{data:null,error:s};throw s}})}update(e,r,s){return ie(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,r,s)})}move(e,r,s){return ie(this,void 0,void 0,function*(){try{return{data:yield be(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:s==null?void 0:s.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(G(i))return{data:null,error:i};throw i}})}copy(e,r,s){return ie(this,void 0,void 0,function*(){try{return{data:{path:(yield be(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:s==null?void 0:s.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(G(i))return{data:null,error:i};throw i}})}createSignedUrl(e,r,s){return ie(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e),n=yield be(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:r},s!=null&&s.transform?{transform:s.transform}:{}),{headers:this.headers});const o=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return n={signedUrl:encodeURI(`${this.url}${n.signedURL}${o}`)},{data:n,error:null}}catch(i){if(G(i))return{data:null,error:i};throw i}})}createSignedUrls(e,r,s){return ie(this,void 0,void 0,function*(){try{const i=yield be(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:e},{headers:this.headers}),n=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return{data:i.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${n}`):null})),error:null}}catch(i){if(G(i))return{data:null,error:i};throw i}})}download(e,r){return ie(this,void 0,void 0,function*(){const i=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",n=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),o=n?`?${n}`:"";try{const a=this._getFinalPath(e);return{data:yield(yield Kt(this.fetch,`${this.url}/${i}/${a}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(a){if(G(a))return{data:null,error:a};throw a}})}info(e){return ie(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{const s=yield Kt(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:ss(s),error:null}}catch(s){if(G(s))return{data:null,error:s};throw s}})}exists(e){return ie(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{return yield ru(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(s){if(G(s)&&s instanceof rs){const i=s.originalError;if([400,404].includes(i==null?void 0:i.status))return{data:!1,error:s}}throw s}})}getPublicUrl(e,r){const s=this._getFinalPath(e),i=[],n=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";n!==""&&i.push(n);const a=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});c!==""&&i.push(c);let u=i.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${s}${u}`)}}}remove(e){return ie(this,void 0,void 0,function*(){try{return{data:yield po(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(r){if(G(r))return{data:null,error:r};throw r}})}list(e,r,s){return ie(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},su),r),{prefix:e||""});return{data:yield be(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},s),error:null}}catch(i){if(G(i))return{data:null,error:i};throw i}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const r=[];return e.width&&r.push(`width=${e.width}`),e.height&&r.push(`height=${e.height}`),e.resize&&r.push(`resize=${e.resize}`),e.format&&r.push(`format=${e.format}`),e.quality&&r.push(`quality=${e.quality}`),r.join("&")}}const nu="2.10.4",ou={"X-Client-Info":`storage-js/${nu}`};var Ke=function(t,e,r,s){function i(n){return n instanceof r?n:new r(function(o){o(n)})}return new(r||(r=Promise))(function(n,o){function a(l){try{u(s.next(l))}catch(h){o(h)}}function c(l){try{u(s.throw(l))}catch(h){o(h)}}function u(l){l.done?n(l.value):i(l.value).then(a,c)}u((s=s.apply(t,[])).next())})};class au{constructor(e,r={},s,i){const n=new URL(e);i!=null&&i.useNewHostname&&/supabase\.(co|in|red)$/.test(n.hostname)&&!n.hostname.includes("storage.supabase.")&&(n.hostname=n.hostname.replace("supabase.","storage.supabase.")),this.url=n.href,this.headers=Object.assign(Object.assign({},ou),r),this.fetch=fo(s)}listBuckets(){return Ke(this,void 0,void 0,function*(){try{return{data:yield Kt(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(G(e))return{data:null,error:e};throw e}})}getBucket(e){return Ke(this,void 0,void 0,function*(){try{return{data:yield Kt(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(r){if(G(r))return{data:null,error:r};throw r}})}createBucket(e,r={public:!1}){return Ke(this,void 0,void 0,function*(){try{return{data:yield be(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(G(s))return{data:null,error:s};throw s}})}updateBucket(e,r){return Ke(this,void 0,void 0,function*(){try{return{data:yield is(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(G(s))return{data:null,error:s};throw s}})}emptyBucket(e){return Ke(this,void 0,void 0,function*(){try{return{data:yield be(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(G(r))return{data:null,error:r};throw r}})}deleteBucket(e){return Ke(this,void 0,void 0,function*(){try{return{data:yield po(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(r){if(G(r))return{data:null,error:r};throw r}})}}class cu extends au{constructor(e,r={},s,i){super(e,r,s,i)}from(e){return new iu(this.url,this.headers,e,this.fetch)}}const uu="2.53.0";let dt="";typeof Deno<"u"?dt="deno":typeof document<"u"?dt="web":typeof navigator<"u"&&navigator.product==="ReactNative"?dt="react-native":dt="node";const lu={"X-Client-Info":`supabase-js-${dt}/${uu}`},hu={headers:lu},du={schema:"public"},fu={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},pu={};var mu=function(t,e,r,s){function i(n){return n instanceof r?n:new r(function(o){o(n)})}return new(r||(r=Promise))(function(n,o){function a(l){try{u(s.next(l))}catch(h){o(h)}}function c(l){try{u(s.throw(l))}catch(h){o(h)}}function u(l){l.done?n(l.value):i(l.value).then(a,c)}u((s=s.apply(t,e||[])).next())})};const gu=t=>{let e;return t?e=t:typeof fetch>"u"?e=ro:e=fetch,(...r)=>e(...r)},_u=()=>typeof Headers>"u"?so:Headers,yu=(t,e,r)=>{const s=gu(r),i=_u();return(n,o)=>mu(void 0,void 0,void 0,function*(){var a;const c=(a=yield e())!==null&&a!==void 0?a:t;let u=new i(o==null?void 0:o.headers);return u.has("apikey")||u.set("apikey",t),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),s(n,Object.assign(Object.assign({},o),{headers:u}))})};var vu=function(t,e,r,s){function i(n){return n instanceof r?n:new r(function(o){o(n)})}return new(r||(r=Promise))(function(n,o){function a(l){try{u(s.next(l))}catch(h){o(h)}}function c(l){try{u(s.throw(l))}catch(h){o(h)}}function u(l){l.done?n(l.value):i(l.value).then(a,c)}u((s=s.apply(t,[])).next())})};function bu(t){return t.endsWith("/")?t:t+"/"}function wu(t,e){var r,s;const{db:i,auth:n,realtime:o,global:a}=t,{db:c,auth:u,realtime:l,global:h}=e,f={db:Object.assign(Object.assign({},c),i),auth:Object.assign(Object.assign({},u),n),realtime:Object.assign(Object.assign({},l),o),storage:{},global:Object.assign(Object.assign(Object.assign({},h),a),{headers:Object.assign(Object.assign({},(r=h==null?void 0:h.headers)!==null&&r!==void 0?r:{}),(s=a==null?void 0:a.headers)!==null&&s!==void 0?s:{})}),accessToken:()=>vu(this,void 0,void 0,function*(){return""})};return t.accessToken?f.accessToken=t.accessToken:delete f.accessToken,f}const mo="2.71.1",Qe=30*1e3,ns=3,fr=ns*Qe,ku="http://localhost:9999",Su="supabase.auth.token",Au={"X-Client-Info":`gotrue-js/${mo}`},os="X-Supabase-Api-Version",go={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Pu=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Eu=600*1e3;class Es extends Error{constructor(e,r,s){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=s}}function I(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class Ou extends Es{constructor(e,r,s){super(e,r,s),this.name="AuthApiError",this.status=r,this.code=s}}function Tu(t){return I(t)&&t.name==="AuthApiError"}class _o extends Es{constructor(e,r){super(e),this.name="AuthUnknownError",this.originalError=r}}class Te extends Es{constructor(e,r,s,i){super(e,s,i),this.name=r,this.status=s}}class Pe extends Te{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function xu(t){return I(t)&&t.name==="AuthSessionMissingError"}class jt extends Te{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Ut extends Te{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class qt extends Te{constructor(e,r=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Iu(t){return I(t)&&t.name==="AuthImplicitGrantRedirectError"}class ui extends Te{constructor(e,r=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class as extends Te{constructor(e,r){super(e,"AuthRetryableFetchError",r,void 0)}}function pr(t){return I(t)&&t.name==="AuthRetryableFetchError"}class li extends Te{constructor(e,r,s){super(e,"AuthWeakPasswordError",r,"weak_password"),this.reasons=s}}class cs extends Te{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Gt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),hi=` 	
\r=`.split(""),Ru=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<hi.length;e+=1)t[hi[e].charCodeAt(0)]=-2;for(let e=0;e<Gt.length;e+=1)t[Gt[e].charCodeAt(0)]=e;return t})();function di(t,e,r){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;r(Gt[s]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;r(Gt[s]),e.queuedBits-=6}}function yo(t,e,r){const s=Ru[t];if(s>-1)for(e.queue=e.queue<<6|s,e.queuedBits+=6;e.queuedBits>=8;)r(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(s===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function fi(t){const e=[],r=o=>{e.push(String.fromCodePoint(o))},s={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},n=o=>{Uu(o,s,r)};for(let o=0;o<t.length;o+=1)yo(t.charCodeAt(o),i,n);return e.join("")}function Cu(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function ju(t,e){for(let r=0;r<t.length;r+=1){let s=t.charCodeAt(r);if(s>55295&&s<=56319){const i=(s-55296)*1024&65535;s=(t.charCodeAt(r+1)-56320&65535|i)+65536,r+=1}Cu(s,e)}}function Uu(t,e,r){if(e.utf8seq===0){if(t<=127){r(t);return}for(let s=1;s<6;s+=1)if((t>>7-s&1)===0){e.utf8seq=s;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&r(e.codepoint)}}function qu(t){const e=[],r={queue:0,queuedBits:0},s=i=>{e.push(i)};for(let i=0;i<t.length;i+=1)yo(t.charCodeAt(i),r,s);return new Uint8Array(e)}function Nu(t){const e=[];return ju(t,r=>e.push(r)),new Uint8Array(e)}function Lu(t){const e=[],r={queue:0,queuedBits:0},s=i=>{e.push(i)};return t.forEach(i=>di(i,r,s)),di(null,r,s),e.join("")}function $u(t){return Math.round(Date.now()/1e3)+t}function Du(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const ue=()=>typeof window<"u"&&typeof document<"u",xe={tested:!1,writable:!1},vo=()=>{if(!ue())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(xe.tested)return xe.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),xe.tested=!0,xe.writable=!0}catch{xe.tested=!0,xe.writable=!1}return xe.writable};function Mu(t){const e={},r=new URL(t);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((i,n)=>{e[n]=i})}catch{}return r.searchParams.forEach((s,i)=>{e[i]=s}),e}const bo=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>Oe(async()=>{const{default:s}=await Promise.resolve().then(()=>rt);return{default:s}},void 0,import.meta.url).then(({default:s})=>s(...r)):e=fetch,(...r)=>e(...r)},Bu=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",Ze=async(t,e,r)=>{await t.setItem(e,JSON.stringify(r))},Ie=async(t,e)=>{const r=await t.getItem(e);if(!r)return null;try{return JSON.parse(r)}catch{return r}},ke=async(t,e)=>{await t.removeItem(e)};class Zt{constructor(){this.promise=new Zt.promiseConstructor((e,r)=>{this.resolve=e,this.reject=r})}}Zt.promiseConstructor=Promise;function mr(t){const e=t.split(".");if(e.length!==3)throw new cs("Invalid JWT structure");for(let s=0;s<e.length;s++)if(!Pu.test(e[s]))throw new cs("JWT not in base64url format");return{header:JSON.parse(fi(e[0])),payload:JSON.parse(fi(e[1])),signature:qu(e[2]),raw:{header:e[0],payload:e[1]}}}async function zu(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function Fu(t,e){return new Promise((s,i)=>{(async()=>{for(let n=0;n<1/0;n++)try{const o=await t(n);if(!e(n,null,o)){s(o);return}}catch(o){if(!e(n,o)){i(o);return}}})()})}function Ju(t){return("0"+t.toString(16)).substr(-2)}function Hu(){const e=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",s=r.length;let i="";for(let n=0;n<56;n++)i+=r.charAt(Math.floor(Math.random()*s));return i}return crypto.getRandomValues(e),Array.from(e,Ju).join("")}async function Ku(t){const r=new TextEncoder().encode(t),s=await crypto.subtle.digest("SHA-256",r),i=new Uint8Array(s);return Array.from(i).map(n=>String.fromCharCode(n)).join("")}async function Gu(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const r=await Ku(t);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Ge(t,e,r=!1){const s=Hu();let i=s;r&&(i+="/PASSWORD_RECOVERY"),await Ze(t,`${e}-code-verifier`,i);const n=await Gu(s);return[n,s===n?"plain":"s256"]}const Wu=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Vu(t){const e=t.headers.get(os);if(!e||!e.match(Wu))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function Xu(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function Yu(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Qu=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function We(t){if(!Qu.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function gr(){const t={};return new Proxy(t,{get:(e,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const s=r.toString();if(s==="Symbol(Symbol.toPrimitive)"||s==="Symbol(Symbol.toStringTag)"||s==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function pi(t){return JSON.parse(JSON.stringify(t))}var Zu=function(t,e){var r={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(r[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,s=Object.getOwnPropertySymbols(t);i<s.length;i++)e.indexOf(s[i])<0&&Object.prototype.propertyIsEnumerable.call(t,s[i])&&(r[s[i]]=t[s[i]]);return r};const Ce=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),el=[502,503,504];async function mi(t){var e;if(!Bu(t))throw new as(Ce(t),0);if(el.includes(t.status))throw new as(Ce(t),t.status);let r;try{r=await t.json()}catch(n){throw new _o(Ce(n),n)}let s;const i=Vu(t);if(i&&i.getTime()>=go["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?s=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(s=r.error_code),s){if(s==="weak_password")throw new li(Ce(r),t.status,((e=r.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(s==="session_not_found")throw new Pe}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((n,o)=>n&&typeof o=="string",!0))throw new li(Ce(r),t.status,r.weak_password.reasons);throw new Ou(Ce(r),t.status||500,s)}const tl=(t,e,r,s)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),i.body=JSON.stringify(s),Object.assign(Object.assign({},i),r))};async function j(t,e,r,s){var i;const n=Object.assign({},s==null?void 0:s.headers);n[os]||(n[os]=go["2024-01-01"].name),s!=null&&s.jwt&&(n.Authorization=`Bearer ${s.jwt}`);const o=(i=s==null?void 0:s.query)!==null&&i!==void 0?i:{};s!=null&&s.redirectTo&&(o.redirect_to=s.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await rl(t,e,r+a,{headers:n,noResolveJson:s==null?void 0:s.noResolveJson},{},s==null?void 0:s.body);return s!=null&&s.xform?s==null?void 0:s.xform(c):{data:Object.assign({},c),error:null}}async function rl(t,e,r,s,i,n){const o=tl(e,s,i,n);let a;try{a=await t(r,Object.assign({},o))}catch(c){throw console.error(c),new as(Ce(c),0)}if(a.ok||await mi(a),s!=null&&s.noResolveJson)return a;try{return await a.json()}catch(c){await mi(c)}}function ye(t){var e;let r=null;ol(t)&&(r=Object.assign({},t),t.expires_at||(r.expires_at=$u(t.expires_in)));const s=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:r,user:s},error:null}}function gi(t){const e=ye(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((r,s)=>r&&typeof s=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Ee(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function sl(t){return{data:t,error:null}}function il(t){const{action_link:e,email_otp:r,hashed_token:s,redirect_to:i,verification_type:n}=t,o=Zu(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:r,hashed_token:s,redirect_to:i,verification_type:n},c=Object.assign({},o);return{data:{properties:a,user:c},error:null}}function nl(t){return t}function ol(t){return t.access_token&&t.refresh_token&&t.expires_in}const _r=["global","local","others"];var al=function(t,e){var r={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(r[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,s=Object.getOwnPropertySymbols(t);i<s.length;i++)e.indexOf(s[i])<0&&Object.prototype.propertyIsEnumerable.call(t,s[i])&&(r[s[i]]=t[s[i]]);return r};class cl{constructor({url:e="",headers:r={},fetch:s}){this.url=e,this.headers=r,this.fetch=bo(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,r=_r[0]){if(_r.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${_r.join(", ")}`);try{return await j(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(s){if(I(s))return{data:null,error:s};throw s}}async inviteUserByEmail(e,r={}){try{return await j(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Ee})}catch(s){if(I(s))return{data:{user:null},error:s};throw s}}async generateLink(e){try{const{options:r}=e,s=al(e,["options"]),i=Object.assign(Object.assign({},s),r);return"newEmail"in s&&(i.new_email=s==null?void 0:s.newEmail,delete i.newEmail),await j(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:il,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(I(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(e){try{return await j(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Ee})}catch(r){if(I(r))return{data:{user:null},error:r};throw r}}async listUsers(e){var r,s,i,n,o,a,c;try{const u={nextPage:null,lastPage:0,total:0},l=await j(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(r=e==null?void 0:e.page)===null||r===void 0?void 0:r.toString())!==null&&s!==void 0?s:"",per_page:(n=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&n!==void 0?n:""},xform:nl});if(l.error)throw l.error;const h=await l.json(),f=(o=l.headers.get("x-total-count"))!==null&&o!==void 0?o:0,y=(c=(a=l.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&c!==void 0?c:[];return y.length>0&&(y.forEach(_=>{const S=parseInt(_.split(";")[0].split("=")[1].substring(0,1)),g=JSON.parse(_.split(";")[1].split("=")[1]);u[`${g}Page`]=S}),u.total=parseInt(f)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(I(u))return{data:{users:[]},error:u};throw u}}async getUserById(e){We(e);try{return await j(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Ee})}catch(r){if(I(r))return{data:{user:null},error:r};throw r}}async updateUserById(e,r){We(e);try{return await j(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:r,headers:this.headers,xform:Ee})}catch(s){if(I(s))return{data:{user:null},error:s};throw s}}async deleteUser(e,r=!1){We(e);try{return await j(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:r},xform:Ee})}catch(s){if(I(s))return{data:{user:null},error:s};throw s}}async _listFactors(e){We(e.userId);try{const{data:r,error:s}=await j(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:r,error:s}}catch(r){if(I(r))return{data:null,error:r};throw r}}async _deleteFactor(e){We(e.userId),We(e.id);try{return{data:await j(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(r){if(I(r))return{data:null,error:r};throw r}}}function _i(t={}){return{getItem:e=>t[e]||null,setItem:(e,r)=>{t[e]=r},removeItem:e=>{delete t[e]}}}function ul(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Ve={debug:!!(globalThis&&vo()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class wo extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class ll extends wo{}async function hl(t,e,r){Ve.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const s=new globalThis.AbortController;return e>0&&setTimeout(()=>{s.abort(),Ve.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async i=>{if(i){Ve.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,i.name);try{return await r()}finally{Ve.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,i.name)}}else{if(e===0)throw Ve.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new ll(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(Ve.debug)try{const n=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(n,null,"  "))}catch(n){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",n)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}ul();const dl={url:ku,storageKey:Su,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Au,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function yi(t,e,r){return await r()}const Xe={};class kt{constructor(e){var r,s;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=kt.nextInstanceID,kt.nextInstanceID+=1,this.instanceID>0&&ue()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const i=Object.assign(Object.assign({},dl),e);if(this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.persistSession=i.persistSession,this.storageKey=i.storageKey,this.autoRefreshToken=i.autoRefreshToken,this.admin=new cl({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=bo(i.fetch),this.lock=i.lock||yi,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,i.lock?this.lock=i.lock:ue()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=hl:this.lock=yi,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(i.storage?this.storage=i.storage:vo()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=_i(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=_i(this.memoryStorage)),ue()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(n){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",n)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async n=>{this._debug("received broadcast notification from other tab or client",n),await this._notifyAllSubscribers(n.data.event,n.data.session,!1)})}this.initialize()}get jwks(){var e,r;return(r=(e=Xe[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(e){Xe[this.storageKey]=Object.assign(Object.assign({},Xe[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,r;return(r=(e=Xe[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Xe[this.storageKey]=Object.assign(Object.assign({},Xe[this.storageKey]),{cachedAt:e})}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${mo}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const r=Mu(window.location.href);let s="none";if(this._isImplicitGrantCallback(r)?s="implicit":await this._isPKCECallback(r)&&(s="pkce"),ue()&&this.detectSessionInUrl&&s!=="none"){const{data:i,error:n}=await this._getSessionFromURL(r,s);if(n){if(this._debug("#_initialize()","error detecting session from URL",n),Iu(n)){const c=(e=n.details)===null||e===void 0?void 0:e.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:n}}return await this._removeSession(),{error:n}}const{session:o,redirectType:a}=i;return this._debug("#_initialize()","detected session in URL",o,"redirect type",a),await this._saveSession(o),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return I(r)?{error:r}:{error:new _o("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var r,s,i;try{const n=await j(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(s=(r=e==null?void 0:e.options)===null||r===void 0?void 0:r.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:(i=e==null?void 0:e.options)===null||i===void 0?void 0:i.captchaToken}},xform:ye}),{data:o,error:a}=n;if(a||!o)return{data:{user:null,session:null},error:a};const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(n){if(I(n))return{data:{user:null,session:null},error:n};throw n}}async signUp(e){var r,s,i;try{let n;if("email"in e){const{email:l,password:h,options:f}=e;let y=null,_=null;this.flowType==="pkce"&&([y,_]=await Ge(this.storage,this.storageKey)),n=await j(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:l,password:h,data:(r=f==null?void 0:f.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:y,code_challenge_method:_},xform:ye})}else if("phone"in e){const{phone:l,password:h,options:f}=e;n=await j(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:l,password:h,data:(s=f==null?void 0:f.data)!==null&&s!==void 0?s:{},channel:(i=f==null?void 0:f.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:ye})}else throw new Ut("You must provide either an email or phone number and a password");const{data:o,error:a}=n;if(a||!o)return{data:{user:null,session:null},error:a};const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(n){if(I(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithPassword(e){try{let r;if("email"in e){const{email:n,password:o,options:a}=e;r=await j(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:n,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:gi})}else if("phone"in e){const{phone:n,password:o,options:a}=e;r=await j(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:n,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:gi})}else throw new Ut("You must provide either an email or phone number and a password");const{data:s,error:i}=r;return i?{data:{user:null,session:null},error:i}:!s||!s.session||!s.user?{data:{user:null,session:null},error:new jt}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:i})}catch(r){if(I(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(e){var r,s,i,n;return await this._handleProviderSignIn(e.provider,{redirectTo:(r=e.options)===null||r===void 0?void 0:r.redirectTo,scopes:(s=e.options)===null||s===void 0?void 0:s.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(n=e.options)===null||n===void 0?void 0:n.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:r}=e;if(r==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}async signInWithSolana(e){var r,s,i,n,o,a,c,u,l,h,f,y;let _,S;if("message"in e)_=e.message,S=e.signature;else{const{chain:g,wallet:w,statement:k,options:b}=e;let m;if(ue())if(typeof w=="object")m=w;else{const v=window;if("solana"in v&&typeof v.solana=="object"&&("signIn"in v.solana&&typeof v.solana.signIn=="function"||"signMessage"in v.solana&&typeof v.solana.signMessage=="function"))m=v.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof w!="object"||!(b!=null&&b.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");m=w}const d=new URL((r=b==null?void 0:b.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in m&&m.signIn){const v=await m.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},b==null?void 0:b.signInWithSolana),{version:"1",domain:d.host,uri:d.href}),k?{statement:k}:null));let p;if(Array.isArray(v)&&v[0]&&typeof v[0]=="object")p=v[0];else if(v&&typeof v=="object"&&"signedMessage"in v&&"signature"in v)p=v;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in p&&"signature"in p&&(typeof p.signedMessage=="string"||p.signedMessage instanceof Uint8Array)&&p.signature instanceof Uint8Array)_=typeof p.signedMessage=="string"?p.signedMessage:new TextDecoder().decode(p.signedMessage),S=p.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in m)||typeof m.signMessage!="function"||!("publicKey"in m)||typeof m!="object"||!m.publicKey||!("toBase58"in m.publicKey)||typeof m.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");_=[`${d.host} wants you to sign in with your Solana account:`,m.publicKey.toBase58(),...k?["",k,""]:[""],"Version: 1",`URI: ${d.href}`,`Issued At: ${(i=(s=b==null?void 0:b.signInWithSolana)===null||s===void 0?void 0:s.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((n=b==null?void 0:b.signInWithSolana)===null||n===void 0)&&n.notBefore?[`Not Before: ${b.signInWithSolana.notBefore}`]:[],...!((o=b==null?void 0:b.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${b.signInWithSolana.expirationTime}`]:[],...!((a=b==null?void 0:b.signInWithSolana)===null||a===void 0)&&a.chainId?[`Chain ID: ${b.signInWithSolana.chainId}`]:[],...!((c=b==null?void 0:b.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${b.signInWithSolana.nonce}`]:[],...!((u=b==null?void 0:b.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${b.signInWithSolana.requestId}`]:[],...!((h=(l=b==null?void 0:b.signInWithSolana)===null||l===void 0?void 0:l.resources)===null||h===void 0)&&h.length?["Resources",...b.signInWithSolana.resources.map(p=>`- ${p}`)]:[]].join(`
`);const v=await m.signMessage(new TextEncoder().encode(_),"utf8");if(!v||!(v instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");S=v}}try{const{data:g,error:w}=await j(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:_,signature:Lu(S)},!((f=e.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(y=e.options)===null||y===void 0?void 0:y.captchaToken}}:null),xform:ye});if(w)throw w;return!g||!g.session||!g.user?{data:{user:null,session:null},error:new jt}:(g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("SIGNED_IN",g.session)),{data:Object.assign({},g),error:w})}catch(g){if(I(g))return{data:{user:null,session:null},error:g};throw g}}async _exchangeCodeForSession(e){const r=await Ie(this.storage,`${this.storageKey}-code-verifier`),[s,i]=(r??"").split("/");try{const{data:n,error:o}=await j(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:s},xform:ye});if(await ke(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!n||!n.session||!n.user?{data:{user:null,session:null,redirectType:null},error:new jt}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign(Object.assign({},n),{redirectType:i??null}),error:o})}catch(n){if(I(n))return{data:{user:null,session:null,redirectType:null},error:n};throw n}}async signInWithIdToken(e){try{const{options:r,provider:s,token:i,access_token:n,nonce:o}=e,a=await j(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:i,access_token:n,nonce:o,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:ye}),{data:c,error:u}=a;return u?{data:{user:null,session:null},error:u}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new jt}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:u})}catch(r){if(I(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(e){var r,s,i,n,o;try{if("email"in e){const{email:a,options:c}=e;let u=null,l=null;this.flowType==="pkce"&&([u,l]=await Ge(this.storage,this.storageKey));const{error:h}=await j(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(r=c==null?void 0:c.data)!==null&&r!==void 0?r:{},create_user:(s=c==null?void 0:c.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:u,code_challenge_method:l},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in e){const{phone:a,options:c}=e,{data:u,error:l}=await j(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(i=c==null?void 0:c.data)!==null&&i!==void 0?i:{},create_user:(n=c==null?void 0:c.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(o=c==null?void 0:c.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:l}}throw new Ut("You must provide either an email or phone number.")}catch(a){if(I(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(e){var r,s;try{let i,n;"options"in e&&(i=(r=e.options)===null||r===void 0?void 0:r.redirectTo,n=(s=e.options)===null||s===void 0?void 0:s.captchaToken);const{data:o,error:a}=await j(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:n}}),redirectTo:i,xform:ye});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const c=o.session,u=o.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(i){if(I(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithSSO(e){var r,s,i;try{let n=null,o=null;return this.flowType==="pkce"&&([n,o]=await Ge(this.storage,this.storageKey)),await j(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(s=(r=e.options)===null||r===void 0?void 0:r.redirectTo)!==null&&s!==void 0?s:void 0}),!((i=e==null?void 0:e.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:n,code_challenge_method:o}),headers:this.headers,xform:sl})}catch(n){if(I(n))return{data:null,error:n};throw n}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:r},error:s}=e;if(s)throw s;if(!r)throw new Pe;const{error:i}=await j(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:i}})}catch(e){if(I(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const r=`${this.url}/resend`;if("email"in e){const{email:s,type:i,options:n}=e,{error:o}=await j(this.fetch,"POST",r,{headers:this.headers,body:{email:s,type:i,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},redirectTo:n==null?void 0:n.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:s,type:i,options:n}=e,{data:o,error:a}=await j(this.fetch,"POST",r,{headers:this.headers,body:{phone:s,type:i,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:a}}throw new Ut("You must provide either an email or phone number and a type")}catch(r){if(I(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(e,r){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const s=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await s,await r()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const s=r();for(this.pendingInLock.push((async()=>{try{await s}catch{}})()),await s;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await s}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await e(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const r=await Ie(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?e=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const s=e.expires_at?e.expires_at*1e3-Date.now()<fr:!1;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",e.expires_at),!s){if(this.userStorage){const o=await Ie(this.userStorage,this.storageKey+"-user");o!=null&&o.user?e.user=o.user:e.user=gr()}if(this.storage.isServer&&e.user){let o=this.suppressGetSessionWarning;e=new Proxy(e,{get:(c,u,l)=>(!o&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,u,l))})}return{data:{session:e},error:null}}const{session:i,error:n}=await this._callRefreshToken(e.refresh_token);return n?{data:{session:null},error:n}:{data:{session:i},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await j(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Ee}):await this._useSession(async r=>{var s,i,n;const{data:o,error:a}=r;if(a)throw a;return!(!((s=o.session)===null||s===void 0)&&s.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Pe}:await j(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(n=(i=o.session)===null||i===void 0?void 0:i.access_token)!==null&&n!==void 0?n:void 0,xform:Ee})})}catch(r){if(I(r))return xu(r)&&(await this._removeSession(),await ke(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(e,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,r))}async _updateUser(e,r={}){try{return await this._useSession(async s=>{const{data:i,error:n}=s;if(n)throw n;if(!i.session)throw new Pe;const o=i.session;let a=null,c=null;this.flowType==="pkce"&&e.email!=null&&([a,c]=await Ge(this.storage,this.storageKey));const{data:u,error:l}=await j(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:c}),jwt:o.access_token,xform:Ee});if(l)throw l;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(s){if(I(s))return{data:{user:null},error:s};throw s}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Pe;const r=Date.now()/1e3;let s=r,i=!0,n=null;const{payload:o}=mr(e.access_token);if(o.exp&&(s=o.exp,i=s<=r),i){const{session:a,error:c}=await this._callRefreshToken(e.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!a)return{data:{user:null,session:null},error:null};n=a}else{const{data:a,error:c}=await this._getUser(e.access_token);if(c)throw c;n={access_token:e.access_token,refresh_token:e.refresh_token,user:a.user,token_type:"bearer",expires_in:s-r,expires_at:s},await this._saveSession(n),await this._notifyAllSubscribers("SIGNED_IN",n)}return{data:{user:n.user,session:n},error:null}}catch(r){if(I(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async r=>{var s;if(!e){const{data:o,error:a}=r;if(a)throw a;e=(s=o.session)!==null&&s!==void 0?s:void 0}if(!(e!=null&&e.refresh_token))throw new Pe;const{session:i,error:n}=await this._callRefreshToken(e.refresh_token);return n?{data:{user:null,session:null},error:n}:i?{data:{user:i.user,session:i},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(I(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(e,r){try{if(!ue())throw new qt("No browser detected.");if(e.error||e.error_description||e.error_code)throw new qt(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new ui("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new qt("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new ui("No code detected.");const{data:k,error:b}=await this._exchangeCodeForSession(e.code);if(b)throw b;const m=new URL(window.location.href);return m.searchParams.delete("code"),window.history.replaceState(window.history.state,"",m.toString()),{data:{session:k.session,redirectType:null},error:null}}const{provider_token:s,provider_refresh_token:i,access_token:n,refresh_token:o,expires_in:a,expires_at:c,token_type:u}=e;if(!n||!a||!o||!u)throw new qt("No session defined in URL");const l=Math.round(Date.now()/1e3),h=parseInt(a);let f=l+h;c&&(f=parseInt(c));const y=f-l;y*1e3<=Qe&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${y}s, should have been closer to ${h}s`);const _=f-h;l-_>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",_,f,l):l-_<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",_,f,l);const{data:S,error:g}=await this._getUser(n);if(g)throw g;const w={provider_token:s,provider_refresh_token:i,access_token:n,expires_in:h,expires_at:f,refresh_token:o,token_type:u,user:S.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:w,redirectType:e.type},error:null}}catch(s){if(I(s))return{data:{session:null,redirectType:null},error:s};throw s}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const r=await Ie(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&r)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async r=>{var s;const{data:i,error:n}=r;if(n)return{error:n};const o=(s=i.session)===null||s===void 0?void 0:s.access_token;if(o){const{error:a}=await this.admin.signOut(o,e);if(a&&!(Tu(a)&&(a.status===404||a.status===401||a.status===403)))return{error:a}}return e!=="others"&&(await this._removeSession(),await ke(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const r=Du(),s={id:r,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,s),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:s}}}async _emitInitialSession(e){return await this._useSession(async r=>{var s,i;try{const{data:{session:n},error:o}=r;if(o)throw o;await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",n)),this._debug("INITIAL_SESSION","callback id",e,"session",n)}catch(n){await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",n),console.error(n)}})}async resetPasswordForEmail(e,r={}){let s=null,i=null;this.flowType==="pkce"&&([s,i]=await Ge(this.storage,this.storageKey,!0));try{return await j(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:s,code_challenge_method:i,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(n){if(I(n))return{data:null,error:n};throw n}}async getUserIdentities(){var e;try{const{data:r,error:s}=await this.getUser();if(s)throw s;return{data:{identities:(e=r.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(r){if(I(r))return{data:null,error:r};throw r}}async linkIdentity(e){var r;try{const{data:s,error:i}=await this._useSession(async n=>{var o,a,c,u,l;const{data:h,error:f}=n;if(f)throw f;const y=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(a=e.options)===null||a===void 0?void 0:a.scopes,queryParams:(c=e.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await j(this.fetch,"GET",y,{headers:this.headers,jwt:(l=(u=h.session)===null||u===void 0?void 0:u.access_token)!==null&&l!==void 0?l:void 0})});if(i)throw i;return ue()&&!(!((r=e.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(s==null?void 0:s.url),{data:{provider:e.provider,url:s==null?void 0:s.url},error:null}}catch(s){if(I(s))return{data:{provider:e.provider,url:null},error:s};throw s}}async unlinkIdentity(e){try{return await this._useSession(async r=>{var s,i;const{data:n,error:o}=r;if(o)throw o;return await j(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(i=(s=n.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0})})}catch(r){if(I(r))return{data:null,error:r};throw r}}async _refreshAccessToken(e){const r=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{const s=Date.now();return await Fu(async i=>(i>0&&await zu(200*Math.pow(2,i-1)),this._debug(r,"refreshing attempt",i),await j(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:ye})),(i,n)=>{const o=200*Math.pow(2,i);return n&&pr(n)&&Date.now()+o-s<Qe})}catch(s){if(this._debug(r,"error",s),I(s))return{data:{session:null,user:null},error:s};throw s}finally{this._debug(r,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,r){const s=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",r,"url",s),ue()&&!r.skipBrowserRedirect&&window.location.assign(s),{data:{provider:e,url:s},error:null}}async _recoverAndRefresh(){var e,r;const s="#_recoverAndRefresh()";this._debug(s,"begin");try{const i=await Ie(this.storage,this.storageKey);if(i&&this.userStorage){let o=await Ie(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:i.user},await Ze(this.userStorage,this.storageKey+"-user",o)),i.user=(e=o==null?void 0:o.user)!==null&&e!==void 0?e:gr()}else if(i&&!i.user&&!i.user){const o=await Ie(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(i.user=o.user,await ke(this.storage,this.storageKey+"-user"),await Ze(this.storage,this.storageKey,i)):i.user=gr()}if(this._debug(s,"session from storage",i),!this._isValidSession(i)){this._debug(s,"session is not valid"),i!==null&&await this._removeSession();return}const n=((r=i.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<fr;if(this._debug(s,`session has${n?"":" not"} expired with margin of ${fr}s`),n){if(this.autoRefreshToken&&i.refresh_token){const{error:o}=await this._callRefreshToken(i.refresh_token);o&&(console.error(o),pr(o)||(this._debug(s,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:a}=await this._getUser(i.access_token);!a&&(o!=null&&o.user)?(i.user=o.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(s,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(s,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(s,"error",i),console.error(i);return}finally{this._debug(s,"end")}}async _callRefreshToken(e){var r,s;if(!e)throw new Pe;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new Zt;const{data:n,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!n.session)throw new Pe;await this._saveSession(n.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",n.session);const a={session:n.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(n){if(this._debug(i,"error",n),I(n)){const o={session:null,error:n};return pr(n)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(o),o}throw(s=this.refreshingDeferred)===null||s===void 0||s.reject(n),n}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(e,r,s=!0){const i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",r,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:e,session:r});const n=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(e,r)}catch(c){n.push(c)}});if(await Promise.all(o),n.length>0){for(let a=0;a<n.length;a+=1)console.error(n[a]);throw n[0]}}finally{this._debug(i,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const r=Object.assign({},e),s=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!s&&r.user&&await Ze(this.userStorage,this.storageKey+"-user",{user:r.user});const i=Object.assign({},r);delete i.user;const n=pi(i);await Ze(this.storage,this.storageKey,n)}else{const i=pi(r);await Ze(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),await ke(this.storage,this.storageKey),await ke(this.storage,this.storageKey+"-code-verifier"),await ke(this.storage,this.storageKey+"-user"),this.userStorage&&await ke(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&ue()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Qe);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async r=>{const{data:{session:s}}=r;if(!s||!s.refresh_token||!s.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((s.expires_at*1e3-e)/Qe);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${Qe}ms, refresh threshold is ${ns} ticks`),i<=ns&&await this._callRefreshToken(s.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof wo)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!ue()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const r=`#_onVisibilityChanged(${e})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,r,s){const i=[`provider=${encodeURIComponent(r)}`];if(s!=null&&s.redirectTo&&i.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),s!=null&&s.scopes&&i.push(`scopes=${encodeURIComponent(s.scopes)}`),this.flowType==="pkce"){const[n,o]=await Ge(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(n)}`,code_challenge_method:`${encodeURIComponent(o)}`});i.push(a.toString())}if(s!=null&&s.queryParams){const n=new URLSearchParams(s.queryParams);i.push(n.toString())}return s!=null&&s.skipBrowserRedirect&&i.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${e}?${i.join("&")}`}async _unenroll(e){try{return await this._useSession(async r=>{var s;const{data:i,error:n}=r;return n?{data:null,error:n}:await j(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(s=i==null?void 0:i.session)===null||s===void 0?void 0:s.access_token})})}catch(r){if(I(r))return{data:null,error:r};throw r}}async _enroll(e){try{return await this._useSession(async r=>{var s,i;const{data:n,error:o}=r;if(o)return{data:null,error:o};const a=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:c,error:u}=await j(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(s=n==null?void 0:n.session)===null||s===void 0?void 0:s.access_token});return u?{data:null,error:u}:(e.factorType==="totp"&&(!((i=c==null?void 0:c.totp)===null||i===void 0)&&i.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(r){if(I(r))return{data:null,error:r};throw r}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var s;const{data:i,error:n}=r;if(n)return{data:null,error:n};const{data:o,error:a}=await j(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(s=i==null?void 0:i.session)===null||s===void 0?void 0:s.access_token});return a?{data:null,error:a}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:a})})}catch(r){if(I(r))return{data:null,error:r};throw r}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var s;const{data:i,error:n}=r;return n?{data:null,error:n}:await j(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(s=i==null?void 0:i.session)===null||s===void 0?void 0:s.access_token})})}catch(r){if(I(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(e){const{data:r,error:s}=await this._challenge({factorId:e.factorId});return s?{data:null,error:s}:await this._verify({factorId:e.factorId,challengeId:r.id,code:e.code})}async _listFactors(){const{data:{user:e},error:r}=await this.getUser();if(r)return{data:null,error:r};const s=(e==null?void 0:e.factors)||[],i=s.filter(o=>o.factor_type==="totp"&&o.status==="verified"),n=s.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:s,totp:i,phone:n},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var r,s;const{data:{session:i},error:n}=e;if(n)return{data:null,error:n};if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=mr(i.access_token);let a=null;o.aal&&(a=o.aal);let c=a;((s=(r=i.user.factors)===null||r===void 0?void 0:r.filter(h=>h.status==="verified"))!==null&&s!==void 0?s:[]).length>0&&(c="aal2");const l=o.amr||[];return{data:{currentLevel:a,nextLevel:c,currentAuthenticationMethods:l},error:null}}))}async fetchJwk(e,r={keys:[]}){let s=r.keys.find(a=>a.kid===e);if(s)return s;const i=Date.now();if(s=this.jwks.keys.find(a=>a.kid===e),s&&this.jwks_cached_at+Eu>i)return s;const{data:n,error:o}=await j(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!n.keys||n.keys.length===0||(this.jwks=n,this.jwks_cached_at=i,s=n.keys.find(a=>a.kid===e),!s)?null:s}async getClaims(e,r={}){try{let s=e;if(!s){const{data:y,error:_}=await this.getSession();if(_||!y.session)return{data:null,error:_};s=y.session.access_token}const{header:i,payload:n,signature:o,raw:{header:a,payload:c}}=mr(s);r!=null&&r.allowExpired||Xu(n.exp);const u=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!u){const{error:y}=await this.getUser(s);if(y)throw y;return{data:{claims:n,header:i,signature:o},error:null}}const l=Yu(i.alg),h=await crypto.subtle.importKey("jwk",u,l,!0,["verify"]);if(!await crypto.subtle.verify(l,h,o,Nu(`${a}.${c}`)))throw new cs("Invalid JWT signature");return{data:{claims:n,header:i,signature:o},error:null}}catch(s){if(I(s))return{data:null,error:s};throw s}}}kt.nextInstanceID=0;const fl=kt;class pl extends fl{constructor(e){super(e)}}var ml=function(t,e,r,s){function i(n){return n instanceof r?n:new r(function(o){o(n)})}return new(r||(r=Promise))(function(n,o){function a(l){try{u(s.next(l))}catch(h){o(h)}}function c(l){try{u(s.throw(l))}catch(h){o(h)}}function u(l){l.done?n(l.value):i(l.value).then(a,c)}u((s=s.apply(t,[])).next())})};class gl{constructor(e,r,s){var i,n,o;if(this.supabaseUrl=e,this.supabaseKey=r,!e)throw new Error("supabaseUrl is required.");if(!r)throw new Error("supabaseKey is required.");const a=bu(e),c=new URL(a);this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const u=`sb-${c.hostname.split(".")[0]}-auth-token`,l={db:du,realtime:pu,auth:Object.assign(Object.assign({},fu),{storageKey:u}),global:hu},h=wu(s??{},l);this.storageKey=(i=h.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(n=h.global.headers)!==null&&n!==void 0?n:{},h.accessToken?(this.accessToken=h.accessToken,this.auth=new Proxy({},{get:(f,y)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(y)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=h.auth)!==null&&o!==void 0?o:{},this.headers,h.global.fetch),this.fetch=yu(r,this._getAccessToken.bind(this),h.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},h.realtime)),this.rest=new Uc(new URL("rest/v1",c).href,{headers:this.headers,schema:h.db.schema,fetch:this.fetch}),this.storage=new cu(this.storageUrl.href,this.headers,this.fetch,s==null?void 0:s.storage),h.accessToken||this._listenForAuthEvents()}get functions(){return new kc(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,r={},s={}){return this.rest.rpc(e,r,s)}channel(e,r={config:{}}){return this.realtime.channel(e,r)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,r;return ml(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:s}=yield this.auth.getSession();return(r=(e=s.session)===null||e===void 0?void 0:e.access_token)!==null&&r!==void 0?r:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:r,detectSessionInUrl:s,storage:i,storageKey:n,flowType:o,lock:a,debug:c},u,l){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new pl({url:this.authUrl.href,headers:Object.assign(Object.assign({},h),u),storageKey:n,autoRefreshToken:e,persistSession:r,detectSessionInUrl:s,storage:i,flowType:o,lock:a,debug:c,fetch:l,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new Vc(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,s)=>{this._handleTokenChanged(r,"CLIENT",s==null?void 0:s.access_token)})}_handleTokenChanged(e,r,s){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==s?this.changedAccessToken=s:e==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const _l=(t,e,r)=>new gl(t,e,r);function yl(){if(typeof window<"u"||typeof process>"u"||process.version===void 0||process.version===null)return!1;const t=process.version.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}yl()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");var vi=ac({packageName:"@clerk/backend"}),vl={TokenInvalid:"token-invalid"},bl=class ko extends Error{constructor({action:e,message:r,reason:s}){super(r),Object.setPrototypeOf(this,ko.prototype),this.reason=s,this.message=r,this.action=e}getFullMessage(){return`${[this.message,this.action].filter(e=>e).join(" ")} (reason=${this.reason}, token-carrier=${this.tokenCarrier})`}};const wl=crypto;var kl=fetch.bind(globalThis),Wt={crypto:wl,get fetch(){return kl},AbortController:globalThis.AbortController,Blob:globalThis.Blob,FormData:globalThis.FormData,Headers:globalThis.Headers,Request:globalThis.Request,Response:globalThis.Response},yr={parse(t,e){return Sl(t,bi,e)},stringify(t,e){return Al(t,bi,e)}},bi={chars:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bits:6};function Sl(t,e,r={}){if(!e.codes){e.codes={};for(let c=0;c<e.chars.length;++c)e.codes[e.chars[c]]=c}if(!r.loose&&t.length*e.bits&7)throw new SyntaxError("Invalid padding");let s=t.length;for(;t[s-1]==="=";)if(--s,!r.loose&&!((t.length-s)*e.bits&7))throw new SyntaxError("Invalid padding");const i=new(r.out??Uint8Array)(s*e.bits/8|0);let n=0,o=0,a=0;for(let c=0;c<s;++c){const u=e.codes[t[c]];if(u===void 0)throw new SyntaxError("Invalid character "+t[c]);o=o<<e.bits|u,n+=e.bits,n>=8&&(n-=8,i[a++]=255&o>>n)}if(n>=e.bits||255&o<<8-n)throw new SyntaxError("Unexpected end of data");return i}function Al(t,e,r={}){const{pad:s=!0}=r,i=(1<<e.bits)-1;let n="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|255&t[c],o+=8;o>e.bits;)o-=e.bits,n+=e.chars[i&a>>o];if(o&&(n+=e.chars[i&a<<e.bits-o]),s)for(;n.length*e.bits&7;)n+="=";return n}function Pl(t){const e=(t||"").toString().split(".");if(e.length!==3)return{errors:[new bl({reason:vl.TokenInvalid,message:"Invalid JWT form. A JWT consists of three parts separated by dots."})]};const[r,s,i]=e,n=new TextDecoder,o=JSON.parse(n.decode(yr.parse(r,{loose:!0}))),a=JSON.parse(n.decode(yr.parse(s,{loose:!0}))),c=yr.parse(i,{loose:!0});return{data:{header:o,payload:a,signature:c,raw:{header:r,payload:s,signature:i,text:t}}}}var So=t=>{throw TypeError(t)},El=(t,e,r)=>e.has(t)||So("Cannot "+r),Ol=(t,e,r)=>e.has(t)?So("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),vr=(t,e,r)=>(El(t,e,"access private method"),r);function Tl(t){return t?`https://${t.replace(/clerk\.accountsstage\./,"accountsstage.").replace(/clerk\.accounts\.|clerk\./,"accounts.")}`:""}var xl=({per:t,fpm:e})=>{if(!t||!e)return{permissions:[],featurePermissionMap:[]};const r=t.split(",").map(i=>i.trim()),s=e.split(",").map(i=>Number.parseInt(i.trim(),10)).map(i=>i.toString(2).padStart(r.length,"0").split("").map(n=>Number.parseInt(n,10)).reverse()).filter(Boolean);return{permissions:r,featurePermissionMap:s}};function Il({features:t,permissions:e,featurePermissionMap:r}){if(!t||!e||!r)return[];const s=[];for(let i=0;i<t.length;i++){const n=t[i];if(i>=r.length)continue;const o=r[i];if(o)for(let a=0;a<o.length;a++)o[a]===1&&s.push(`org:${n}:${e[a]}`)}return s}var Rl=t=>{var a,c,u,l,h,f;let e,r,s,i;const n=t.fva??null,o=t.sts??null;switch(t.v){case 2:{if(t.o){e=(a=t.o)==null?void 0:a.id,s=(c=t.o)==null?void 0:c.slg,(u=t.o)!=null&&u.rol&&(r=`org:${(l=t.o)==null?void 0:l.rol}`);const{org:y}=cc(t.fea),{permissions:_,featurePermissionMap:S}=xl({per:(h=t.o)==null?void 0:h.per,fpm:(f=t.o)==null?void 0:f.fpm});i=Il({features:y,featurePermissionMap:S,permissions:_})}break}default:e=t.org_id,r=t.org_role,s=t.org_slug,i=t.org_permissions;break}return{sessionClaims:t,sessionId:t.sid,sessionStatus:o,actor:t.act,userId:t.sub,orgId:e,orgRole:r,orgSlug:s,orgPermissions:i,factorVerificationAge:n}},ct={},wi;function Cl(){if(wi)return ct;wi=1,Object.defineProperty(ct,"__esModule",{value:!0}),ct.parse=o,ct.serialize=u;const t=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,r=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,s=/^[\u0020-\u003A\u003D-\u007E]*$/,i=Object.prototype.toString,n=(()=>{const f=function(){};return f.prototype=Object.create(null),f})();function o(f,y){const _=new n,S=f.length;if(S<2)return _;const g=(y==null?void 0:y.decode)||l;let w=0;do{const k=f.indexOf("=",w);if(k===-1)break;const b=f.indexOf(";",w),m=b===-1?S:b;if(k>m){w=f.lastIndexOf(";",k-1)+1;continue}const d=a(f,w,k),v=c(f,k,d),p=f.slice(d,v);if(_[p]===void 0){let P=a(f,k+1,m),O=c(f,m,P);const C=g(f.slice(P,O));_[p]=C}w=m+1}while(w<S);return _}function a(f,y,_){do{const S=f.charCodeAt(y);if(S!==32&&S!==9)return y}while(++y<_);return _}function c(f,y,_){for(;y>_;){const S=f.charCodeAt(--y);if(S!==32&&S!==9)return y+1}return _}function u(f,y,_){const S=(_==null?void 0:_.encode)||encodeURIComponent;if(!t.test(f))throw new TypeError(`argument name is invalid: ${f}`);const g=S(y);if(!e.test(g))throw new TypeError(`argument val is invalid: ${y}`);let w=f+"="+g;if(!_)return w;if(_.maxAge!==void 0){if(!Number.isInteger(_.maxAge))throw new TypeError(`option maxAge is invalid: ${_.maxAge}`);w+="; Max-Age="+_.maxAge}if(_.domain){if(!r.test(_.domain))throw new TypeError(`option domain is invalid: ${_.domain}`);w+="; Domain="+_.domain}if(_.path){if(!s.test(_.path))throw new TypeError(`option path is invalid: ${_.path}`);w+="; Path="+_.path}if(_.expires){if(!h(_.expires)||!Number.isFinite(_.expires.valueOf()))throw new TypeError(`option expires is invalid: ${_.expires}`);w+="; Expires="+_.expires.toUTCString()}if(_.httpOnly&&(w+="; HttpOnly"),_.secure&&(w+="; Secure"),_.partitioned&&(w+="; Partitioned"),_.priority)switch(typeof _.priority=="string"?_.priority.toLowerCase():void 0){case"low":w+="; Priority=Low";break;case"medium":w+="; Priority=Medium";break;case"high":w+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${_.priority}`)}if(_.sameSite)switch(typeof _.sameSite=="string"?_.sameSite.toLowerCase():_.sameSite){case!0:case"strict":w+="; SameSite=Strict";break;case"lax":w+="; SameSite=Lax";break;case"none":w+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${_.sameSite}`)}return w}function l(f){if(f.indexOf("%")===-1)return f;try{return decodeURIComponent(f)}catch{return f}}function h(f){return i.call(f)==="[object Date]"}return ct}var jl=Cl(),Ul="https://api.clerk.com",ql="v1",Nl="@clerk/backend@2.9.3",Ll="2025-04-10",$l={AuthToken:"__clerkAuthToken",AuthSignature:"__clerkAuthSignature",AuthStatus:"__clerkAuthStatus",AuthReason:"__clerkAuthReason",AuthMessage:"__clerkAuthMessage",ClerkUrl:"__clerkUrl"},Jt={Session:"__session",Refresh:"__refresh",ClientUat:"__client_uat",Handshake:"__clerk_handshake",DevBrowser:"__clerk_db_jwt",RedirectCount:"__clerk_redirect_count",HandshakeNonce:"__clerk_handshake_nonce"},Dl={ClerkSynced:"__clerk_synced",SuffixedCookies:"suffixed_cookies",ClerkRedirectUrl:"__clerk_redirect_url",DevBrowser:Jt.DevBrowser,Handshake:Jt.Handshake,HandshakeHelp:"__clerk_help",LegacyDevBrowser:"__dev_session",HandshakeReason:"__clerk_hs_reason",HandshakeNonce:Jt.HandshakeNonce,HandshakeFormat:"format"},Ml={Accept:"accept",AuthMessage:"x-clerk-auth-message",Authorization:"authorization",AuthReason:"x-clerk-auth-reason",AuthSignature:"x-clerk-auth-signature",AuthStatus:"x-clerk-auth-status",AuthToken:"x-clerk-auth-token",CacheControl:"cache-control",ClerkRedirectTo:"x-clerk-redirect-to",ClerkRequestData:"x-clerk-request-data",ClerkUrl:"x-clerk-clerk-url",CloudFrontForwardedProto:"cloudfront-forwarded-proto",ContentType:"content-type",ContentSecurityPolicy:"content-security-policy",ContentSecurityPolicyReportOnly:"content-security-policy-report-only",EnableDebug:"x-clerk-debug",ForwardedHost:"x-forwarded-host",ForwardedPort:"x-forwarded-port",ForwardedProto:"x-forwarded-proto",Host:"host",Location:"location",Nonce:"x-nonce",Origin:"origin",Referrer:"referer",SecFetchDest:"sec-fetch-dest",SecFetchSite:"sec-fetch-site",UserAgent:"user-agent",ReportingEndpoints:"reporting-endpoints"},Bl={Json:"application/json"},z={Attributes:$l,Cookies:Jt,Headers:Ml,ContentTypes:Bl,QueryParameters:Dl},br=(t,e,r,s)=>{if(t==="")return zl(e.toString(),r==null?void 0:r.toString());const i=new URL(t),n=r?new URL(r,i):void 0,o=new URL(e,i),a=`${i.hostname}:${i.port}`!=`${o.hostname}:${o.port}`;return n&&(a&&n.searchParams.delete(z.QueryParameters.ClerkSynced),o.searchParams.set("redirect_url",n.toString())),a&&s&&o.searchParams.set(z.QueryParameters.DevBrowser,s),o.toString()},zl=(t,e)=>{let r;if(t.startsWith("http"))r=new URL(t);else{if(!e||!e.startsWith("http"))throw new Error("destination url or return back url should be an absolute path url!");const s=new URL(e);r=new URL(t,s.origin)}return e&&r.searchParams.set("redirect_url",e),r.toString()},Fl=t=>{const{publishableKey:e,redirectAdapter:r,signInUrl:s,signUpUrl:i,baseUrl:n,sessionStatus:o}=t,a=eo(e),c=a==null?void 0:a.frontendApi,u=(a==null?void 0:a.instanceType)==="development",l=Tl(c),h=o==="pending",f=(S,{returnBackUrl:g})=>r(br(n,`${S}/tasks`,g,u?t.devBrowserToken:null));return{redirectToSignUp:({returnBackUrl:S}={})=>{!i&&!l&&vi.throwMissingPublishableKeyError();const g=`${l}/sign-up`;function w(b){if(!b)return;const m=new URL(b,n);return m.pathname=`${m.pathname}/create`,m.toString()}const k=i||w(s)||g;return h?f(k,{returnBackUrl:S}):r(br(n,k,S,u?t.devBrowserToken:null))},redirectToSignIn:({returnBackUrl:S}={})=>{!s&&!l&&vi.throwMissingPublishableKeyError();const g=`${l}/sign-in`,w=s||g;return h?f(w,{returnBackUrl:S}):r(br(n,w,S,u?t.devBrowserToken:null))}}};function Jl(t){if(!t||typeof t!="string")throw Error("Missing Clerk Secret Key. Go to https://dashboard.clerk.com and get your key for your instance.")}var J={SessionToken:"session_token",ApiKey:"api_key",M2MToken:"m2m_token",OAuthToken:"oauth_token"},us="/",Hl=new RegExp("(?<!:)"+us+"{1,}","g");function A(...t){return t.filter(e=>e).join(us).replace(Hl,us)}var N=class{constructor(t){this.request=t}requireId(t){if(!t)throw new Error("A valid resource ID is required.")}},ki="/actor_tokens",Kl=class extends N{async create(t){return this.request({method:"POST",path:ki,bodyParams:t})}async revoke(t){return this.requireId(t),this.request({method:"POST",path:A(ki,t,"revoke")})}},Si="/accountless_applications",Gl=class extends N{async createAccountlessApplication(t){const e=t!=null&&t.requestHeaders?Object.fromEntries(t.requestHeaders.entries()):void 0;return this.request({method:"POST",path:Si,headerParams:e})}async completeAccountlessApplicationOnboarding(t){const e=t!=null&&t.requestHeaders?Object.fromEntries(t.requestHeaders.entries()):void 0;return this.request({method:"POST",path:A(Si,"complete"),headerParams:e})}},wr="/allowlist_identifiers",Wl=class extends N{async getAllowlistIdentifierList(t={}){return this.request({method:"GET",path:wr,queryParams:{...t,paginated:!0}})}async createAllowlistIdentifier(t){return this.request({method:"POST",path:wr,bodyParams:t})}async deleteAllowlistIdentifier(t){return this.requireId(t),this.request({method:"DELETE",path:A(wr,t)})}},Nt="/api_keys",Vl=class extends N{async create(t){return this.request({method:"POST",path:Nt,bodyParams:t})}async revoke(t){const{apiKeyId:e,...r}=t;return this.requireId(e),this.request({method:"POST",path:A(Nt,e,"revoke"),bodyParams:r})}async getSecret(t){return this.requireId(t),this.request({method:"GET",path:A(Nt,t,"secret")})}async verifySecret(t){return this.request({method:"POST",path:A(Nt,"verify"),bodyParams:{secret:t}})}},Xl="/beta_features",Yl=class extends N{async changeDomain(t){return this.request({method:"POST",path:A(Xl,"change_domain"),bodyParams:t})}},kr="/blocklist_identifiers",Ql=class extends N{async getBlocklistIdentifierList(t={}){return this.request({method:"GET",path:kr,queryParams:t})}async createBlocklistIdentifier(t){return this.request({method:"POST",path:kr,bodyParams:t})}async deleteBlocklistIdentifier(t){return this.requireId(t),this.request({method:"DELETE",path:A(kr,t)})}},Lt="/clients",Zl=class extends N{async getClientList(t={}){return this.request({method:"GET",path:Lt,queryParams:{...t,paginated:!0}})}async getClient(t){return this.requireId(t),this.request({method:"GET",path:A(Lt,t)})}verifyClient(t){return this.request({method:"POST",path:A(Lt,"verify"),bodyParams:{token:t}})}async getHandshakePayload(t){return this.request({method:"GET",path:A(Lt,"handshake_payload"),queryParams:t})}},$t="/domains",eh=class extends N{async list(){return this.request({method:"GET",path:$t})}async add(t){return this.request({method:"POST",path:$t,bodyParams:t})}async update(t){const{domainId:e,...r}=t;return this.requireId(e),this.request({method:"PATCH",path:A($t,e),bodyParams:r})}async delete(t){return this.deleteDomain(t)}async deleteDomain(t){return this.requireId(t),this.request({method:"DELETE",path:A($t,t)})}},Dt="/email_addresses",th=class extends N{async getEmailAddress(t){return this.requireId(t),this.request({method:"GET",path:A(Dt,t)})}async createEmailAddress(t){return this.request({method:"POST",path:Dt,bodyParams:t})}async updateEmailAddress(t,e={}){return this.requireId(t),this.request({method:"PATCH",path:A(Dt,t),bodyParams:e})}async deleteEmailAddress(t){return this.requireId(t),this.request({method:"DELETE",path:A(Dt,t)})}},rh="/oauth_applications/access_tokens",sh=class extends N{async verifyAccessToken(t){return this.request({method:"POST",path:A(rh,"verify"),bodyParams:{access_token:t}})}},Mt="/instance",ih=class extends N{async get(){return this.request({method:"GET",path:Mt})}async update(t){return this.request({method:"PATCH",path:Mt,bodyParams:t})}async updateRestrictions(t){return this.request({method:"PATCH",path:A(Mt,"restrictions"),bodyParams:t})}async updateOrganizationSettings(t){return this.request({method:"PATCH",path:A(Mt,"organization_settings"),bodyParams:t})}},Sr="/invitations",nh=class extends N{async getInvitationList(t={}){return this.request({method:"GET",path:Sr,queryParams:{...t,paginated:!0}})}async createInvitation(t){return this.request({method:"POST",path:Sr,bodyParams:t})}async revokeInvitation(t){return this.requireId(t),this.request({method:"POST",path:A(Sr,t,"revoke")})}},Se="/machines",oh=class extends N{async get(t){return this.requireId(t),this.request({method:"GET",path:A(Se,t)})}async list(t={}){return this.request({method:"GET",path:Se,queryParams:t})}async create(t){return this.request({method:"POST",path:Se,bodyParams:t})}async update(t){const{machineId:e,...r}=t;return this.requireId(e),this.request({method:"PATCH",path:A(Se,e),bodyParams:r})}async delete(t){return this.requireId(t),this.request({method:"DELETE",path:A(Se,t)})}async getSecretKey(t){return this.requireId(t),this.request({method:"GET",path:A(Se,t,"secret_key")})}async createScope(t,e){return this.requireId(t),this.request({method:"POST",path:A(Se,t,"scopes"),bodyParams:{toMachineId:e}})}async deleteScope(t,e){return this.requireId(t),this.request({method:"DELETE",path:A(Se,t,"scopes",e)})}},Ar="/m2m_tokens",ft,Ht,ah=class extends N{constructor(){super(...arguments),Ol(this,ft)}async createToken(t){const{claims:e=null,machineSecretKey:r,secondsUntilExpiration:s=null}=t||{},i=vr(this,ft,Ht).call(this,{method:"POST",path:Ar,bodyParams:{secondsUntilExpiration:s,claims:e}},r);return this.request(i)}async revokeToken(t){const{m2mTokenId:e,revocationReason:r=null,machineSecretKey:s}=t;this.requireId(e);const i=vr(this,ft,Ht).call(this,{method:"POST",path:A(Ar,e,"revoke"),bodyParams:{revocationReason:r}},s);return this.request(i)}async verifyToken(t){const{token:e,machineSecretKey:r}=t,s=vr(this,ft,Ht).call(this,{method:"POST",path:A(Ar,"verify"),bodyParams:{token:e}},r);return this.request(s)}};ft=new WeakSet;Ht=function(t,e){return e?{...t,headerParams:{...t.headerParams,Authorization:`Bearer ${e}`}}:t};var ch="/jwks",uh=class extends N{async getJwks(){return this.request({method:"GET",path:ch})}},ut="/jwt_templates",lh=class extends N{async list(t={}){return this.request({method:"GET",path:ut,queryParams:{...t,paginated:!0}})}async get(t){return this.requireId(t),this.request({method:"GET",path:A(ut,t)})}async create(t){return this.request({method:"POST",path:ut,bodyParams:t})}async update(t){const{templateId:e,...r}=t;return this.requireId(e),this.request({method:"PATCH",path:A(ut,e),bodyParams:r})}async delete(t){return this.requireId(t),this.request({method:"DELETE",path:A(ut,t)})}},F="/organizations",hh=class extends N{async getOrganizationList(t){return this.request({method:"GET",path:F,queryParams:t})}async createOrganization(t){return this.request({method:"POST",path:F,bodyParams:t})}async getOrganization(t){const{includeMembersCount:e}=t,r="organizationId"in t?t.organizationId:t.slug;return this.requireId(r),this.request({method:"GET",path:A(F,r),queryParams:{includeMembersCount:e}})}async updateOrganization(t,e){return this.requireId(t),this.request({method:"PATCH",path:A(F,t),bodyParams:e})}async updateOrganizationLogo(t,e){this.requireId(t);const r=new Wt.FormData;return r.append("file",e==null?void 0:e.file),e!=null&&e.uploaderUserId&&r.append("uploader_user_id",e==null?void 0:e.uploaderUserId),this.request({method:"PUT",path:A(F,t,"logo"),formData:r})}async deleteOrganizationLogo(t){return this.requireId(t),this.request({method:"DELETE",path:A(F,t,"logo")})}async updateOrganizationMetadata(t,e){return this.requireId(t),this.request({method:"PATCH",path:A(F,t,"metadata"),bodyParams:e})}async deleteOrganization(t){return this.request({method:"DELETE",path:A(F,t)})}async getOrganizationMembershipList(t){const{organizationId:e,...r}=t;return this.requireId(e),this.request({method:"GET",path:A(F,e,"memberships"),queryParams:r})}async getInstanceOrganizationMembershipList(t){return this.request({method:"GET",path:"/organization_memberships",queryParams:t})}async createOrganizationMembership(t){const{organizationId:e,...r}=t;return this.requireId(e),this.request({method:"POST",path:A(F,e,"memberships"),bodyParams:r})}async updateOrganizationMembership(t){const{organizationId:e,userId:r,...s}=t;return this.requireId(e),this.request({method:"PATCH",path:A(F,e,"memberships",r),bodyParams:s})}async updateOrganizationMembershipMetadata(t){const{organizationId:e,userId:r,...s}=t;return this.request({method:"PATCH",path:A(F,e,"memberships",r,"metadata"),bodyParams:s})}async deleteOrganizationMembership(t){const{organizationId:e,userId:r}=t;return this.requireId(e),this.request({method:"DELETE",path:A(F,e,"memberships",r)})}async getOrganizationInvitationList(t){const{organizationId:e,...r}=t;return this.requireId(e),this.request({method:"GET",path:A(F,e,"invitations"),queryParams:r})}async createOrganizationInvitation(t){const{organizationId:e,...r}=t;return this.requireId(e),this.request({method:"POST",path:A(F,e,"invitations"),bodyParams:r})}async createOrganizationInvitationBulk(t,e){return this.requireId(t),this.request({method:"POST",path:A(F,t,"invitations","bulk"),bodyParams:e})}async getOrganizationInvitation(t){const{organizationId:e,invitationId:r}=t;return this.requireId(e),this.requireId(r),this.request({method:"GET",path:A(F,e,"invitations",r)})}async revokeOrganizationInvitation(t){const{organizationId:e,invitationId:r,...s}=t;return this.requireId(e),this.request({method:"POST",path:A(F,e,"invitations",r,"revoke"),bodyParams:s})}async getOrganizationDomainList(t){const{organizationId:e,...r}=t;return this.requireId(e),this.request({method:"GET",path:A(F,e,"domains"),queryParams:r})}async createOrganizationDomain(t){const{organizationId:e,...r}=t;return this.requireId(e),this.request({method:"POST",path:A(F,e,"domains"),bodyParams:{...r,verified:r.verified??!0}})}async updateOrganizationDomain(t){const{organizationId:e,domainId:r,...s}=t;return this.requireId(e),this.requireId(r),this.request({method:"PATCH",path:A(F,e,"domains",r),bodyParams:s})}async deleteOrganizationDomain(t){const{organizationId:e,domainId:r}=t;return this.requireId(e),this.requireId(r),this.request({method:"DELETE",path:A(F,e,"domains",r)})}},Ye="/oauth_applications",dh=class extends N{async list(t={}){return this.request({method:"GET",path:Ye,queryParams:t})}async get(t){return this.requireId(t),this.request({method:"GET",path:A(Ye,t)})}async create(t){return this.request({method:"POST",path:Ye,bodyParams:t})}async update(t){const{oauthApplicationId:e,...r}=t;return this.requireId(e),this.request({method:"PATCH",path:A(Ye,e),bodyParams:r})}async delete(t){return this.requireId(t),this.request({method:"DELETE",path:A(Ye,t)})}async rotateSecret(t){return this.requireId(t),this.request({method:"POST",path:A(Ye,t,"rotate_secret")})}},Bt="/phone_numbers",fh=class extends N{async getPhoneNumber(t){return this.requireId(t),this.request({method:"GET",path:A(Bt,t)})}async createPhoneNumber(t){return this.request({method:"POST",path:Bt,bodyParams:t})}async updatePhoneNumber(t,e={}){return this.requireId(t),this.request({method:"PATCH",path:A(Bt,t),bodyParams:e})}async deletePhoneNumber(t){return this.requireId(t),this.request({method:"DELETE",path:A(Bt,t)})}},ph="/proxy_checks",mh=class extends N{async verify(t){return this.request({method:"POST",path:ph,bodyParams:t})}},zt="/redirect_urls",gh=class extends N{async getRedirectUrlList(){return this.request({method:"GET",path:zt,queryParams:{paginated:!0}})}async getRedirectUrl(t){return this.requireId(t),this.request({method:"GET",path:A(zt,t)})}async createRedirectUrl(t){return this.request({method:"POST",path:zt,bodyParams:t})}async deleteRedirectUrl(t){return this.requireId(t),this.request({method:"DELETE",path:A(zt,t)})}},lt="/saml_connections",_h=class extends N{async getSamlConnectionList(t={}){return this.request({method:"GET",path:lt,queryParams:t})}async createSamlConnection(t){return this.request({method:"POST",path:lt,bodyParams:t,options:{deepSnakecaseBodyParamKeys:!0}})}async getSamlConnection(t){return this.requireId(t),this.request({method:"GET",path:A(lt,t)})}async updateSamlConnection(t,e={}){return this.requireId(t),this.request({method:"PATCH",path:A(lt,t),bodyParams:e,options:{deepSnakecaseBodyParamKeys:!0}})}async deleteSamlConnection(t){return this.requireId(t),this.request({method:"DELETE",path:A(lt,t)})}},Ae="/sessions",yh=class extends N{async getSessionList(t={}){return this.request({method:"GET",path:Ae,queryParams:{...t,paginated:!0}})}async getSession(t){return this.requireId(t),this.request({method:"GET",path:A(Ae,t)})}async createSession(t){return this.request({method:"POST",path:Ae,bodyParams:t})}async revokeSession(t){return this.requireId(t),this.request({method:"POST",path:A(Ae,t,"revoke")})}async verifySession(t,e){return this.requireId(t),this.request({method:"POST",path:A(Ae,t,"verify"),bodyParams:{token:e}})}async getToken(t,e,r){this.requireId(t);const i={method:"POST",path:e?A(Ae,t,"tokens",e):A(Ae,t,"tokens")};return r!==void 0&&(i.bodyParams={expires_in_seconds:r}),this.request(i)}async refreshSession(t,e){this.requireId(t);const{suffixed_cookies:r,...s}=e;return this.request({method:"POST",path:A(Ae,t,"refresh"),bodyParams:s,queryParams:{suffixed_cookies:r}})}},Ai="/sign_in_tokens",vh=class extends N{async createSignInToken(t){return this.request({method:"POST",path:Ai,bodyParams:t})}async revokeSignInToken(t){return this.requireId(t),this.request({method:"POST",path:A(Ai,t,"revoke")})}},Pi="/sign_ups",bh=class extends N{async get(t){return this.requireId(t),this.request({method:"GET",path:A(Pi,t)})}async update(t){const{signUpAttemptId:e,...r}=t;return this.request({method:"PATCH",path:A(Pi,e),bodyParams:r})}},wh="/testing_tokens",kh=class extends N{async createTestingToken(){return this.request({method:"POST",path:wh})}},M="/users",Sh=class extends N{async getUserList(t={}){const{limit:e,offset:r,orderBy:s,...i}=t,[n,o]=await Promise.all([this.request({method:"GET",path:M,queryParams:t}),this.getCount(i)]);return{data:n,totalCount:o}}async getUser(t){return this.requireId(t),this.request({method:"GET",path:A(M,t)})}async createUser(t){return this.request({method:"POST",path:M,bodyParams:t})}async updateUser(t,e={}){return this.requireId(t),this.request({method:"PATCH",path:A(M,t),bodyParams:e})}async updateUserProfileImage(t,e){this.requireId(t);const r=new Wt.FormData;return r.append("file",e==null?void 0:e.file),this.request({method:"POST",path:A(M,t,"profile_image"),formData:r})}async updateUserMetadata(t,e){return this.requireId(t),this.request({method:"PATCH",path:A(M,t,"metadata"),bodyParams:e})}async deleteUser(t){return this.requireId(t),this.request({method:"DELETE",path:A(M,t)})}async getCount(t={}){return this.request({method:"GET",path:A(M,"count"),queryParams:t})}async getUserOauthAccessToken(t,e){this.requireId(t);const r=e.startsWith("oauth_"),s=r?e:`oauth_${e}`;return r&&lc("getUserOauthAccessToken(userId, provider)","Remove the `oauth_` prefix from the `provider` argument."),this.request({method:"GET",path:A(M,t,"oauth_access_tokens",s),queryParams:{paginated:!0}})}async disableUserMFA(t){return this.requireId(t),this.request({method:"DELETE",path:A(M,t,"mfa")})}async getOrganizationMembershipList(t){const{userId:e,limit:r,offset:s}=t;return this.requireId(e),this.request({method:"GET",path:A(M,e,"organization_memberships"),queryParams:{limit:r,offset:s}})}async getOrganizationInvitationList(t){const{userId:e,...r}=t;return this.requireId(e),this.request({method:"GET",path:A(M,e,"organization_invitations"),queryParams:r})}async verifyPassword(t){const{userId:e,password:r}=t;return this.requireId(e),this.request({method:"POST",path:A(M,e,"verify_password"),bodyParams:{password:r}})}async verifyTOTP(t){const{userId:e,code:r}=t;return this.requireId(e),this.request({method:"POST",path:A(M,e,"verify_totp"),bodyParams:{code:r}})}async banUser(t){return this.requireId(t),this.request({method:"POST",path:A(M,t,"ban")})}async unbanUser(t){return this.requireId(t),this.request({method:"POST",path:A(M,t,"unban")})}async lockUser(t){return this.requireId(t),this.request({method:"POST",path:A(M,t,"lock")})}async unlockUser(t){return this.requireId(t),this.request({method:"POST",path:A(M,t,"unlock")})}async deleteUserProfileImage(t){return this.requireId(t),this.request({method:"DELETE",path:A(M,t,"profile_image")})}async deleteUserPasskey(t){return this.requireId(t.userId),this.requireId(t.passkeyIdentificationId),this.request({method:"DELETE",path:A(M,t.userId,"passkeys",t.passkeyIdentificationId)})}async deleteUserWeb3Wallet(t){return this.requireId(t.userId),this.requireId(t.web3WalletIdentificationId),this.request({method:"DELETE",path:A(M,t.userId,"web3_wallets",t.web3WalletIdentificationId)})}async deleteUserExternalAccount(t){return this.requireId(t.userId),this.requireId(t.externalAccountId),this.request({method:"DELETE",path:A(M,t.userId,"external_accounts",t.externalAccountId)})}async deleteUserBackupCodes(t){return this.requireId(t),this.request({method:"DELETE",path:A(M,t,"backup_code")})}async deleteUserTOTP(t){return this.requireId(t),this.request({method:"DELETE",path:A(M,t,"totp")})}},Ei="/waitlist_entries",Ah=class extends N{async list(t={}){return this.request({method:"GET",path:Ei,queryParams:t})}async create(t){return this.request({method:"POST",path:Ei,bodyParams:t})}},Pr="/webhooks",Ph=class extends N{async createSvixApp(){return this.request({method:"POST",path:A(Pr,"svix")})}async generateSvixAuthURL(){return this.request({method:"POST",path:A(Pr,"svix_url")})}async deleteSvixApp(){return this.request({method:"DELETE",path:A(Pr,"svix")})}},Eh="/commerce",Oh=class extends N{async getPlanList(t){return this.request({method:"GET",path:A(Eh,"plans"),queryParams:t})}},Ao=t=>typeof t=="object"&&t!==null,Oi=t=>Ao(t)&&!(t instanceof RegExp)&&!(t instanceof Error)&&!(t instanceof Date)&&!(globalThis.Blob&&t instanceof globalThis.Blob),Th=Symbol("mapObjectSkip"),ls=(t,e,r,s=new WeakMap)=>{if(r={deep:!1,target:{},...r},s.has(t))return s.get(t);s.set(t,r.target);const{target:i}=r;delete r.target;const n=o=>o.map(a=>Oi(a)?ls(a,e,r,s):a);if(Array.isArray(t))return n(t);for(const[o,a]of Object.entries(t)){const c=e(o,a,t);if(c===Th)continue;let[u,l,{shouldRecurse:h=!0}={}]=c;u!=="__proto__"&&(r.deep&&h&&Oi(l)&&(l=Array.isArray(l)?n(l):ls(l,e,r,s)),i[u]=l)}return i};function Ti(t,e,r){if(!Ao(t))throw new TypeError(`Expected an object, got \`${t}\` (${typeof t})`);if(Array.isArray(t))throw new TypeError("Expected an object, got an array");return ls(t,e,r)}var xh=new RegExp("([\\p{Ll}\\d])(\\p{Lu})","gu"),Ih=new RegExp("(\\p{Lu})([\\p{Lu}][\\p{Ll}])","gu"),Rh=new RegExp("(\\d)\\p{Ll}|(\\p{L})\\d","u"),Ch=/[^\p{L}\d]+/giu,xi="$1\0$2",Ii="";function Po(t){let e=t.trim();e=e.replace(xh,xi).replace(Ih,xi),e=e.replace(Ch,"\0");let r=0,s=e.length;for(;e.charAt(r)==="\0";)r++;if(r===s)return[];for(;e.charAt(s-1)==="\0";)s--;return e.slice(r,s).split(/\0/g)}function jh(t){const e=Po(t);for(let r=0;r<e.length;r++){const s=e[r],i=Rh.exec(s);if(i){const n=i.index+(i[1]??i[2]).length;e.splice(r,1,s.slice(0,n),s.slice(n))}}return e}function Uh(t,e){const[r,s,i]=Nh(t,e);return r+s.map(qh(e==null?void 0:e.locale)).join((e==null?void 0:e.delimiter)??" ")+i}function Ri(t,e){return Uh(t,{delimiter:"_",...e})}function qh(t){return t===!1?e=>e.toLowerCase():e=>e.toLocaleLowerCase(t)}function Nh(t,e={}){const r=e.split??(e.separateNumbers?jh:Po),s=e.prefixCharacters??Ii,i=e.suffixCharacters??Ii;let n=0,o=t.length;for(;n<t.length;){const a=t.charAt(n);if(!s.includes(a))break;n++}for(;o>n;){const a=o-1,c=t.charAt(a);if(!i.includes(c))break;o=a}return[t.slice(0,n),r(t.slice(n,o)),t.slice(o)]}var Ci={}.constructor;function Lh(t,e){if(Array.isArray(t)){if(t.some(i=>i.constructor!==Ci))throw new Error("obj must be array of plain objects");e={deep:!0,exclude:[],parsingOptions:{},...e};const s=e.snakeCase||(i=>Ri(i,e.parsingOptions));return t.map(i=>Ti(i,(n,o)=>[ji(e.exclude,n)?n:s(n),o,Ui(n,o,e)],e))}else if(t.constructor!==Ci)throw new Error("obj must be an plain object");e={deep:!0,exclude:[],parsingOptions:{},...e};const r=e.snakeCase||(s=>Ri(s,e.parsingOptions));return Ti(t,(s,i)=>[ji(e.exclude,s)?s:r(s),i,Ui(s,i,e)],e)}function ji(t,e){return t.some(r=>typeof r=="string"?r===e:r.test(e))}function Ui(t,e,r){return r.shouldRecurse?{shouldRecurse:r.shouldRecurse(t,e)}:void 0}var qi=Lh,$h=class Eo{constructor(e,r,s,i){this.publishableKey=e,this.secretKey=r,this.claimUrl=s,this.apiKeysUrl=i}static fromJSON(e){return new Eo(e.publishable_key,e.secret_key,e.claim_url,e.api_keys_url)}},Dh=class Oo{constructor(e,r,s,i,n,o,a,c){this.id=e,this.status=r,this.userId=s,this.actor=i,this.token=n,this.url=o,this.createdAt=a,this.updatedAt=c}static fromJSON(e){return new Oo(e.id,e.status,e.user_id,e.actor,e.token,e.url,e.created_at,e.updated_at)}},Mh=class To{constructor(e,r,s,i,n,o,a){this.id=e,this.identifier=r,this.identifierType=s,this.createdAt=i,this.updatedAt=n,this.instanceId=o,this.invitationId=a}static fromJSON(e){return new To(e.id,e.identifier,e.identifier_type,e.created_at,e.updated_at,e.instance_id,e.invitation_id)}},Bh=class xo{constructor(e,r,s,i,n,o,a,c,u,l,h,f,y,_,S,g){this.id=e,this.type=r,this.name=s,this.subject=i,this.scopes=n,this.claims=o,this.revoked=a,this.revocationReason=c,this.expired=u,this.expiration=l,this.createdBy=h,this.description=f,this.lastUsedAt=y,this.createdAt=_,this.updatedAt=S,this.secret=g}static fromJSON(e){return new xo(e.id,e.type,e.name,e.subject,e.scopes,e.claims,e.revoked,e.revocation_reason,e.expired,e.expiration,e.created_by,e.description,e.last_used_at,e.created_at,e.updated_at,e.secret)}},zh=class Io{constructor(e,r,s,i,n,o){this.id=e,this.identifier=r,this.identifierType=s,this.createdAt=i,this.updatedAt=n,this.instanceId=o}static fromJSON(e){return new Io(e.id,e.identifier,e.identifier_type,e.created_at,e.updated_at,e.instance_id)}},Fh=class Ro{constructor(e,r,s,i,n,o,a,c){this.id=e,this.isMobile=r,this.ipAddress=s,this.city=i,this.country=n,this.browserVersion=o,this.browserName=a,this.deviceType=c}static fromJSON(e){return new Ro(e.id,e.is_mobile,e.ip_address,e.city,e.country,e.browser_version,e.browser_name,e.device_type)}},Co=class jo{constructor(e,r,s,i,n,o,a,c,u,l,h,f=null){this.id=e,this.clientId=r,this.userId=s,this.status=i,this.lastActiveAt=n,this.expireAt=o,this.abandonAt=a,this.createdAt=c,this.updatedAt=u,this.lastActiveOrganizationId=l,this.latestActivity=h,this.actor=f}static fromJSON(e){return new jo(e.id,e.client_id,e.user_id,e.status,e.last_active_at,e.expire_at,e.abandon_at,e.created_at,e.updated_at,e.last_active_organization_id,e.latest_activity&&Fh.fromJSON(e.latest_activity),e.actor)}},Jh=class Uo{constructor(e,r,s,i,n,o,a,c){this.id=e,this.sessionIds=r,this.sessions=s,this.signInId=i,this.signUpId=n,this.lastActiveSessionId=o,this.createdAt=a,this.updatedAt=c}static fromJSON(e){return new Uo(e.id,e.session_ids,e.sessions.map(r=>Co.fromJSON(r)),e.sign_in_id,e.sign_up_id,e.last_active_session_id,e.created_at,e.updated_at)}},Hh=class qo{constructor(e,r,s){this.host=e,this.value=r,this.required=s}static fromJSON(e){return new qo(e.host,e.value,e.required)}},Kh=class No{constructor(e){this.cookies=e}static fromJSON(e){return new No(e.cookies)}},Gh=class Lo{constructor(e,r,s,i){this.object=e,this.id=r,this.slug=s,this.deleted=i}static fromJSON(e){return new Lo(e.object,e.id||null,e.slug||null,e.deleted)}},Wh=class $o{constructor(e,r,s,i,n,o,a,c){this.id=e,this.name=r,this.isSatellite=s,this.frontendApiUrl=i,this.developmentOrigin=n,this.cnameTargets=o,this.accountsPortalUrl=a,this.proxyUrl=c}static fromJSON(e){return new $o(e.id,e.name,e.is_satellite,e.frontend_api_url,e.development_origin,e.cname_targets&&e.cname_targets.map(r=>Hh.fromJSON(r)),e.accounts_portal_url,e.proxy_url)}},Vh=class Do{constructor(e,r,s,i,n,o,a,c,u,l,h){this.id=e,this.fromEmailName=r,this.emailAddressId=s,this.toEmailAddress=i,this.subject=n,this.body=o,this.bodyPlain=a,this.status=c,this.slug=u,this.data=l,this.deliveredByClerk=h}static fromJSON(e){return new Do(e.id,e.from_email_name,e.email_address_id,e.to_email_address,e.subject,e.body,e.body_plain,e.status,e.slug,e.data,e.delivered_by_clerk)}},Mo=class Bo{constructor(e,r){this.id=e,this.type=r}static fromJSON(e){return new Bo(e.id,e.type)}},Pt=class zo{constructor(e,r,s=null,i=null,n=null,o=null,a=null){this.status=e,this.strategy=r,this.externalVerificationRedirectURL=s,this.attempts=i,this.expireAt=n,this.nonce=o,this.message=a}static fromJSON(e){return new zo(e.status,e.strategy,e.external_verification_redirect_url?new URL(e.external_verification_redirect_url):null,e.attempts,e.expire_at,e.nonce)}},Fo=class Jo{constructor(e,r,s,i){this.id=e,this.emailAddress=r,this.verification=s,this.linkedTo=i}static fromJSON(e){return new Jo(e.id,e.email_address,e.verification&&Pt.fromJSON(e.verification),e.linked_to.map(r=>Mo.fromJSON(r)))}},Xh=class Ho{constructor(e,r,s,i,n,o,a,c,u,l,h,f={},y,_){this.id=e,this.provider=r,this.identificationId=s,this.externalId=i,this.approvedScopes=n,this.emailAddress=o,this.firstName=a,this.lastName=c,this.imageUrl=u,this.username=l,this.phoneNumber=h,this.publicMetadata=f,this.label=y,this.verification=_}static fromJSON(e){return new Ho(e.id,e.provider,e.identification_id,e.provider_user_id,e.approved_scopes,e.email_address,e.first_name,e.last_name,e.image_url||"",e.username,e.phone_number,e.public_metadata,e.label,e.verification&&Pt.fromJSON(e.verification))}},Yh=class Ko{constructor(e,r,s,i,n,o,a,c,u,l,h){this.id=e,this.clientId=r,this.type=s,this.subject=i,this.scopes=n,this.revoked=o,this.revocationReason=a,this.expired=c,this.expiration=u,this.createdAt=l,this.updatedAt=h}static fromJSON(e){return new Ko(e.id,e.client_id,e.type,e.subject,e.scopes,e.revoked,e.revocation_reason,e.expired,e.expiration,e.created_at,e.updated_at)}},Qh=class Go{constructor(e,r,s){this.id=e,this.environmentType=r,this.allowedOrigins=s}static fromJSON(e){return new Go(e.id,e.environment_type,e.allowed_origins)}},Zh=class Wo{constructor(e,r,s,i,n){this.allowlist=e,this.blocklist=r,this.blockEmailSubaddresses=s,this.blockDisposableEmailDomains=i,this.ignoreDotsForGmailAddresses=n}static fromJSON(e){return new Wo(e.allowlist,e.blocklist,e.block_email_subaddresses,e.block_disposable_email_domains,e.ignore_dots_for_gmail_addresses)}},ed=class Vo{constructor(e,r,s,i,n){this.id=e,this.restrictedToAllowlist=r,this.fromEmailAddress=s,this.progressiveSignUp=i,this.enhancedEmailDeliverability=n}static fromJSON(e){return new Vo(e.id,e.restricted_to_allowlist,e.from_email_address,e.progressive_sign_up,e.enhanced_email_deliverability)}},Xo=class Yo{constructor(e,r,s,i,n,o,a,c){this.id=e,this.emailAddress=r,this.publicMetadata=s,this.createdAt=i,this.updatedAt=n,this.status=o,this.url=a,this.revoked=c,this._raw=null}get raw(){return this._raw}static fromJSON(e){const r=new Yo(e.id,e.email_address,e.public_metadata,e.created_at,e.updated_at,e.status,e.url,e.revoked);return r._raw=e,r}},R={AccountlessApplication:"accountless_application",ActorToken:"actor_token",AllowlistIdentifier:"allowlist_identifier",ApiKey:"api_key",BlocklistIdentifier:"blocklist_identifier",Client:"client",Cookies:"cookies",Domain:"domain",Email:"email",EmailAddress:"email_address",Instance:"instance",InstanceRestrictions:"instance_restrictions",InstanceSettings:"instance_settings",Invitation:"invitation",Machine:"machine",MachineScope:"machine_scope",MachineSecretKey:"machine_secret_key",M2MToken:"machine_to_machine_token",JwtTemplate:"jwt_template",OauthAccessToken:"oauth_access_token",IdpOAuthAccessToken:"clerk_idp_oauth_access_token",OAuthApplication:"oauth_application",Organization:"organization",OrganizationInvitation:"organization_invitation",OrganizationMembership:"organization_membership",OrganizationSettings:"organization_settings",PhoneNumber:"phone_number",ProxyCheck:"proxy_check",RedirectUrl:"redirect_url",SamlConnection:"saml_connection",Session:"session",SignInToken:"sign_in_token",SignUpAttempt:"sign_up_attempt",SmsMessage:"sms_message",User:"user",WaitlistEntry:"waitlist_entry",Token:"token",TotalCount:"total_count",CommercePlan:"commerce_plan",Feature:"feature"},td=class hs{constructor(e,r,s,i,n,o,a,c){this.id=e,this.name=r,this.instanceId=s,this.createdAt=i,this.updatedAt=n,this.scopedMachines=o,this.defaultTokenTtl=a,this.secretKey=c}static fromJSON(e){return new hs(e.id,e.name,e.instance_id,e.created_at,e.updated_at,e.scoped_machines.map(r=>new hs(r.id,r.name,r.instance_id,r.created_at,r.updated_at,[],r.default_token_ttl)),e.default_token_ttl,e.secret_key)}},rd=class Qo{constructor(e,r,s,i){this.fromMachineId=e,this.toMachineId=r,this.createdAt=s,this.deleted=i}static fromJSON(e){return new Qo(e.from_machine_id,e.to_machine_id,e.created_at,e.deleted)}},sd=class Zo{constructor(e){this.secret=e}static fromJSON(e){return new Zo(e.secret)}},id=class ea{constructor(e,r,s,i,n,o,a,c,u,l,h){this.id=e,this.subject=r,this.scopes=s,this.claims=i,this.revoked=n,this.revocationReason=o,this.expired=a,this.expiration=c,this.createdAt=u,this.updatedAt=l,this.token=h}static fromJSON(e){return new ea(e.id,e.subject,e.scopes,e.claims,e.revoked,e.revocation_reason,e.expired,e.expiration,e.created_at,e.updated_at,e.token)}},nd=class ta{constructor(e,r,s,i,n,o,a,c,u){this.id=e,this.name=r,this.claims=s,this.lifetime=i,this.allowedClockSkew=n,this.customSigningKey=o,this.signingAlgorithm=a,this.createdAt=c,this.updatedAt=u}static fromJSON(e){return new ta(e.id,e.name,e.claims,e.lifetime,e.allowed_clock_skew,e.custom_signing_key,e.signing_algorithm,e.created_at,e.updated_at)}},od=class ra{constructor(e,r,s,i={},n,o,a,c){this.externalAccountId=e,this.provider=r,this.token=s,this.publicMetadata=i,this.label=n,this.scopes=o,this.tokenSecret=a,this.expiresAt=c}static fromJSON(e){return new ra(e.external_account_id,e.provider,e.token,e.public_metadata,e.label||"",e.scopes,e.token_secret,e.expires_at)}},ad=class sa{constructor(e,r,s,i,n,o,a,c,u,l,h,f,y,_,S){this.id=e,this.instanceId=r,this.name=s,this.clientId=i,this.isPublic=n,this.scopes=o,this.redirectUris=a,this.authorizeUrl=c,this.tokenFetchUrl=u,this.userInfoUrl=l,this.discoveryUrl=h,this.tokenIntrospectionUrl=f,this.createdAt=y,this.updatedAt=_,this.clientSecret=S}static fromJSON(e){return new sa(e.id,e.instance_id,e.name,e.client_id,e.public,e.scopes,e.redirect_uris,e.authorize_url,e.token_fetch_url,e.user_info_url,e.discovery_url,e.token_introspection_url,e.created_at,e.updated_at,e.client_secret)}},ia=class na{constructor(e,r,s,i,n,o,a,c={},u={},l,h,f,y){this.id=e,this.name=r,this.slug=s,this.imageUrl=i,this.hasImage=n,this.createdAt=o,this.updatedAt=a,this.publicMetadata=c,this.privateMetadata=u,this.maxAllowedMemberships=l,this.adminDeleteEnabled=h,this.membersCount=f,this.createdBy=y,this._raw=null}get raw(){return this._raw}static fromJSON(e){const r=new na(e.id,e.name,e.slug,e.image_url||"",e.has_image,e.created_at,e.updated_at,e.public_metadata,e.private_metadata,e.max_allowed_memberships,e.admin_delete_enabled,e.members_count,e.created_by);return r._raw=e,r}},cd=class oa{constructor(e,r,s,i,n,o,a,c,u,l,h={},f={},y){this.id=e,this.emailAddress=r,this.role=s,this.roleName=i,this.organizationId=n,this.createdAt=o,this.updatedAt=a,this.expiresAt=c,this.url=u,this.status=l,this.publicMetadata=h,this.privateMetadata=f,this.publicOrganizationData=y,this._raw=null}get raw(){return this._raw}static fromJSON(e){const r=new oa(e.id,e.email_address,e.role,e.role_name,e.organization_id,e.created_at,e.updated_at,e.expires_at,e.url,e.status,e.public_metadata,e.private_metadata,e.public_organization_data);return r._raw=e,r}},ud=class aa{constructor(e,r,s,i={},n={},o,a,c,u){this.id=e,this.role=r,this.permissions=s,this.publicMetadata=i,this.privateMetadata=n,this.createdAt=o,this.updatedAt=a,this.organization=c,this.publicUserData=u,this._raw=null}get raw(){return this._raw}static fromJSON(e){const r=new aa(e.id,e.role,e.permissions,e.public_metadata,e.private_metadata,e.created_at,e.updated_at,ia.fromJSON(e.organization),ld.fromJSON(e.public_user_data));return r._raw=e,r}},ld=class ca{constructor(e,r,s,i,n,o){this.identifier=e,this.firstName=r,this.lastName=s,this.imageUrl=i,this.hasImage=n,this.userId=o}static fromJSON(e){return new ca(e.identifier,e.first_name,e.last_name,e.image_url,e.has_image,e.user_id)}},hd=class ua{constructor(e,r,s,i,n,o,a,c,u){this.enabled=e,this.maxAllowedMemberships=r,this.maxAllowedRoles=s,this.maxAllowedPermissions=i,this.creatorRole=n,this.adminDeleteEnabled=o,this.domainsEnabled=a,this.domainsEnrollmentModes=c,this.domainsDefaultRole=u}static fromJSON(e){return new ua(e.enabled,e.max_allowed_memberships,e.max_allowed_roles,e.max_allowed_permissions,e.creator_role,e.admin_delete_enabled,e.domains_enabled,e.domains_enrollment_modes,e.domains_default_role)}},la=class ha{constructor(e,r,s,i,n,o){this.id=e,this.phoneNumber=r,this.reservedForSecondFactor=s,this.defaultSecondFactor=i,this.verification=n,this.linkedTo=o}static fromJSON(e){return new ha(e.id,e.phone_number,e.reserved_for_second_factor,e.default_second_factor,e.verification&&Pt.fromJSON(e.verification),e.linked_to.map(r=>Mo.fromJSON(r)))}},dd=class da{constructor(e,r,s,i,n,o,a){this.id=e,this.domainId=r,this.lastRunAt=s,this.proxyUrl=i,this.successful=n,this.createdAt=o,this.updatedAt=a}static fromJSON(e){return new da(e.id,e.domain_id,e.last_run_at,e.proxy_url,e.successful,e.created_at,e.updated_at)}},fd=class fa{constructor(e,r,s,i){this.id=e,this.url=r,this.createdAt=s,this.updatedAt=i}static fromJSON(e){return new fa(e.id,e.url,e.created_at,e.updated_at)}},pd=class pa{constructor(e,r,s,i,n,o,a,c,u,l,h,f,y,_,S,g,w,k,b,m,d){this.id=e,this.name=r,this.domain=s,this.organizationId=i,this.idpEntityId=n,this.idpSsoUrl=o,this.idpCertificate=a,this.idpMetadataUrl=c,this.idpMetadata=u,this.acsUrl=l,this.spEntityId=h,this.spMetadataUrl=f,this.active=y,this.provider=_,this.userCount=S,this.syncUserAttributes=g,this.allowSubdomains=w,this.allowIdpInitiated=k,this.createdAt=b,this.updatedAt=m,this.attributeMapping=d}static fromJSON(e){return new pa(e.id,e.name,e.domain,e.organization_id,e.idp_entity_id,e.idp_sso_url,e.idp_certificate,e.idp_metadata_url,e.idp_metadata,e.acs_url,e.sp_entity_id,e.sp_metadata_url,e.active,e.provider,e.user_count,e.sync_user_attributes,e.allow_subdomains,e.allow_idp_initiated,e.created_at,e.updated_at,e.attribute_mapping&&gd.fromJSON(e.attribute_mapping))}},md=class ma{constructor(e,r,s,i,n,o,a,c,u,l){this.id=e,this.name=r,this.domain=s,this.active=i,this.provider=n,this.syncUserAttributes=o,this.allowSubdomains=a,this.allowIdpInitiated=c,this.createdAt=u,this.updatedAt=l}static fromJSON(e){return new ma(e.id,e.name,e.domain,e.active,e.provider,e.sync_user_attributes,e.allow_subdomains,e.allow_idp_initiated,e.created_at,e.updated_at)}},gd=class ga{constructor(e,r,s,i){this.userId=e,this.emailAddress=r,this.firstName=s,this.lastName=i}static fromJSON(e){return new ga(e.user_id,e.email_address,e.first_name,e.last_name)}},_d=class _a{constructor(e,r,s,i,n,o,a,c,u){this.id=e,this.provider=r,this.providerUserId=s,this.active=i,this.emailAddress=n,this.firstName=o,this.lastName=a,this.verification=c,this.samlConnection=u}static fromJSON(e){return new _a(e.id,e.provider,e.provider_user_id,e.active,e.email_address,e.first_name,e.last_name,e.verification&&Pt.fromJSON(e.verification),e.saml_connection&&md.fromJSON(e.saml_connection))}},yd=class ya{constructor(e,r,s,i,n,o,a){this.id=e,this.userId=r,this.token=s,this.status=i,this.url=n,this.createdAt=o,this.updatedAt=a}static fromJSON(e){return new ya(e.id,e.user_id,e.token,e.status,e.url,e.created_at,e.updated_at)}},Er=class va{constructor(e,r){this.nextAction=e,this.supportedStrategies=r}static fromJSON(e){return new va(e.next_action,e.supported_strategies)}},vd=class ba{constructor(e,r,s,i){this.emailAddress=e,this.phoneNumber=r,this.web3Wallet=s,this.externalAccount=i}static fromJSON(e){return new ba(e.email_address&&Er.fromJSON(e.email_address),e.phone_number&&Er.fromJSON(e.phone_number),e.web3_wallet&&Er.fromJSON(e.web3_wallet),e.external_account)}},bd=class wa{constructor(e,r,s,i,n,o,a,c,u,l,h,f,y,_,S,g,w,k,b,m,d,v){this.id=e,this.status=r,this.requiredFields=s,this.optionalFields=i,this.missingFields=n,this.unverifiedFields=o,this.verifications=a,this.username=c,this.emailAddress=u,this.phoneNumber=l,this.web3Wallet=h,this.passwordEnabled=f,this.firstName=y,this.lastName=_,this.customAction=S,this.externalId=g,this.createdSessionId=w,this.createdUserId=k,this.abandonAt=b,this.legalAcceptedAt=m,this.publicMetadata=d,this.unsafeMetadata=v}static fromJSON(e){return new wa(e.id,e.status,e.required_fields,e.optional_fields,e.missing_fields,e.unverified_fields,e.verifications?vd.fromJSON(e.verifications):null,e.username,e.email_address,e.phone_number,e.web3_wallet,e.password_enabled,e.first_name,e.last_name,e.custom_action,e.external_id,e.created_session_id,e.created_user_id,e.abandon_at,e.legal_accepted_at,e.public_metadata,e.unsafe_metadata)}},wd=class ka{constructor(e,r,s,i,n,o,a){this.id=e,this.fromPhoneNumber=r,this.toPhoneNumber=s,this.message=i,this.status=n,this.phoneNumberId=o,this.data=a}static fromJSON(e){return new ka(e.id,e.from_phone_number,e.to_phone_number,e.message,e.status,e.phone_number_id,e.data)}},kd=class Sa{constructor(e){this.jwt=e}static fromJSON(e){return new Sa(e.jwt)}},Sd=class Aa{constructor(e,r,s){this.id=e,this.web3Wallet=r,this.verification=s}static fromJSON(e){return new Aa(e.id,e.web3_wallet,e.verification&&Pt.fromJSON(e.verification))}},Ad=class Pa{constructor(e,r,s,i,n,o,a,c,u,l,h,f,y,_,S,g,w,k,b,m={},d={},v={},p=[],P=[],O=[],C=[],W=[],H,re,se=null,Ne,Le){this.id=e,this.passwordEnabled=r,this.totpEnabled=s,this.backupCodeEnabled=i,this.twoFactorEnabled=n,this.banned=o,this.locked=a,this.createdAt=c,this.updatedAt=u,this.imageUrl=l,this.hasImage=h,this.primaryEmailAddressId=f,this.primaryPhoneNumberId=y,this.primaryWeb3WalletId=_,this.lastSignInAt=S,this.externalId=g,this.username=w,this.firstName=k,this.lastName=b,this.publicMetadata=m,this.privateMetadata=d,this.unsafeMetadata=v,this.emailAddresses=p,this.phoneNumbers=P,this.web3Wallets=O,this.externalAccounts=C,this.samlAccounts=W,this.lastActiveAt=H,this.createOrganizationEnabled=re,this.createOrganizationsLimit=se,this.deleteSelfEnabled=Ne,this.legalAcceptedAt=Le,this._raw=null}get raw(){return this._raw}static fromJSON(e){const r=new Pa(e.id,e.password_enabled,e.totp_enabled,e.backup_code_enabled,e.two_factor_enabled,e.banned,e.locked,e.created_at,e.updated_at,e.image_url,e.has_image,e.primary_email_address_id,e.primary_phone_number_id,e.primary_web3_wallet_id,e.last_sign_in_at,e.external_id,e.username,e.first_name,e.last_name,e.public_metadata,e.private_metadata,e.unsafe_metadata,(e.email_addresses||[]).map(s=>Fo.fromJSON(s)),(e.phone_numbers||[]).map(s=>la.fromJSON(s)),(e.web3_wallets||[]).map(s=>Sd.fromJSON(s)),(e.external_accounts||[]).map(s=>Xh.fromJSON(s)),(e.saml_accounts||[]).map(s=>_d.fromJSON(s)),e.last_active_at,e.create_organization_enabled,e.create_organizations_limit,e.delete_self_enabled,e.legal_accepted_at);return r._raw=e,r}get primaryEmailAddress(){return this.emailAddresses.find(({id:e})=>e===this.primaryEmailAddressId)??null}get primaryPhoneNumber(){return this.phoneNumbers.find(({id:e})=>e===this.primaryPhoneNumberId)??null}get primaryWeb3Wallet(){return this.web3Wallets.find(({id:e})=>e===this.primaryWeb3WalletId)??null}get fullName(){return[this.firstName,this.lastName].join(" ").trim()||null}},Pd=class Ea{constructor(e,r,s,i,n,o,a){this.id=e,this.emailAddress=r,this.status=s,this.invitation=i,this.createdAt=n,this.updatedAt=o,this.isLocked=a}static fromJSON(e){return new Ea(e.id,e.email_address,e.status,e.invitation&&Xo.fromJSON(e.invitation),e.created_at,e.updated_at,e.is_locked)}},Oa=class Ta{constructor(e,r,s,i,n){this.id=e,this.name=r,this.description=s,this.slug=i,this.avatarUrl=n}static fromJSON(e){return new Ta(e.id,e.name,e.description,e.slug,e.avatar_url)}},Ed=class xa{constructor(e,r,s,i,n,o,a,c,u,l,h,f,y,_){this.id=e,this.productId=r,this.name=s,this.slug=i,this.description=n,this.isDefault=o,this.isRecurring=a,this.hasBaseFee=c,this.publiclyVisible=u,this.fee=l,this.annualFee=h,this.annualMonthlyFee=f,this.forPayerType=y,this.features=_}static fromJSON(e){const r=s=>({amount:s.amount,amountFormatted:s.amount_formatted,currency:s.currency,currencySymbol:s.currency_symbol});return new xa(e.id,e.product_id,e.name,e.slug,e.description,e.is_default,e.is_recurring,e.has_base_fee,e.publicly_visible,r(e.fee),r(e.annual_fee),r(e.annual_monthly_fee),e.for_payer_type,e.features.map(s=>Oa.fromJSON(s)))}};function Od(t){let e,r;return Array.isArray(t)?{data:t.map(i=>Or(i))}:Td(t)?(e=t.data.map(s=>Or(s)),r=t.total_count,{data:e,totalCount:r}):{data:Or(t)}}function Td(t){return!t||typeof t!="object"||!("data"in t)?!1:Array.isArray(t.data)&&t.data!==void 0}function xd(t){return t.total_count}function Or(t){if(typeof t!="string"&&"object"in t&&"deleted"in t)return Gh.fromJSON(t);switch(t.object){case R.AccountlessApplication:return $h.fromJSON(t);case R.ActorToken:return Dh.fromJSON(t);case R.AllowlistIdentifier:return Mh.fromJSON(t);case R.ApiKey:return Bh.fromJSON(t);case R.BlocklistIdentifier:return zh.fromJSON(t);case R.Client:return Jh.fromJSON(t);case R.Cookies:return Kh.fromJSON(t);case R.Domain:return Wh.fromJSON(t);case R.EmailAddress:return Fo.fromJSON(t);case R.Email:return Vh.fromJSON(t);case R.IdpOAuthAccessToken:return Yh.fromJSON(t);case R.Instance:return Qh.fromJSON(t);case R.InstanceRestrictions:return Zh.fromJSON(t);case R.InstanceSettings:return ed.fromJSON(t);case R.Invitation:return Xo.fromJSON(t);case R.JwtTemplate:return nd.fromJSON(t);case R.Machine:return td.fromJSON(t);case R.MachineScope:return rd.fromJSON(t);case R.MachineSecretKey:return sd.fromJSON(t);case R.M2MToken:return id.fromJSON(t);case R.OauthAccessToken:return od.fromJSON(t);case R.OAuthApplication:return ad.fromJSON(t);case R.Organization:return ia.fromJSON(t);case R.OrganizationInvitation:return cd.fromJSON(t);case R.OrganizationMembership:return ud.fromJSON(t);case R.OrganizationSettings:return hd.fromJSON(t);case R.PhoneNumber:return la.fromJSON(t);case R.ProxyCheck:return dd.fromJSON(t);case R.RedirectUrl:return fd.fromJSON(t);case R.SamlConnection:return pd.fromJSON(t);case R.SignInToken:return yd.fromJSON(t);case R.SignUpAttempt:return bd.fromJSON(t);case R.Session:return Co.fromJSON(t);case R.SmsMessage:return wd.fromJSON(t);case R.Token:return kd.fromJSON(t);case R.TotalCount:return xd(t);case R.User:return Ad.fromJSON(t);case R.WaitlistEntry:return Pd.fromJSON(t);case R.CommercePlan:return Ed.fromJSON(t);case R.Feature:return Oa.fromJSON(t);default:return t}}function ht(t){return Id(async r=>{var P;const{secretKey:s,machineSecretKey:i,useMachineSecretKey:n=!1,requireSecretKey:o=!0,apiUrl:a=Ul,apiVersion:c=ql,userAgent:u=Nl,skipApiVersionInUrl:l=!1}=t,{path:h,method:f,queryParams:y,headerParams:_,bodyParams:S,formData:g,options:w}=r,{deepSnakecaseBodyParamKeys:k=!1}=w||{};o&&Jl(s);const b=l?A(a,h):A(a,c,h),m=new URL(b);if(y){const O=qi({...y});for(const[C,W]of Object.entries(O))W&&[W].flat().forEach(H=>m.searchParams.append(C,H))}const d=new Headers({"Clerk-API-Version":Ll,[z.Headers.UserAgent]:u,..._}),v=z.Headers.Authorization;d.has(v)||(n&&i?d.set(v,`Bearer ${i}`):s&&d.set(v,`Bearer ${s}`));let p;try{if(g)p=await Wt.fetch(m.href,{method:f,headers:d,body:g});else{d.set("Content-Type","application/json");const W=()=>{if(!(f!=="GET"&&S&&Object.keys(S).length>0))return null;const re=se=>qi(se,{deep:k});return{body:JSON.stringify(Array.isArray(S)?S.map(re):re(S))}};p=await Wt.fetch(m.href,{method:f,headers:d,...W()})}const C=await((p==null?void 0:p.headers)&&((P=p.headers)==null?void 0:P.get(z.Headers.ContentType))===z.ContentTypes.Json?p.json():p.text());return p.ok?{...Od(C),errors:null}:{data:null,errors:Li(C),status:p==null?void 0:p.status,statusText:p==null?void 0:p.statusText,clerkTraceId:Tr(C,p==null?void 0:p.headers),retryAfter:Ni(p==null?void 0:p.headers)}}catch(O){return O instanceof Error?{data:null,errors:[{code:"unexpected_error",message:O.message||"Unexpected error"}],clerkTraceId:Tr(O,p==null?void 0:p.headers)}:{data:null,errors:Li(O),status:p==null?void 0:p.status,statusText:p==null?void 0:p.statusText,clerkTraceId:Tr(O,p==null?void 0:p.headers),retryAfter:Ni(p==null?void 0:p.headers)}}})}function Tr(t,e){return t&&typeof t=="object"&&"clerk_trace_id"in t&&typeof t.clerk_trace_id=="string"?t.clerk_trace_id:(e==null?void 0:e.get("cf-ray"))||""}function Ni(t){const e=t==null?void 0:t.get("Retry-After");if(!e)return;const r=parseInt(e,10);if(!isNaN(r))return r}function Li(t){if(t&&typeof t=="object"&&"errors"in t){const e=t.errors;return e.length>0?e.map(dc):[]}return[]}function Id(t){return async(...e)=>{const{data:r,errors:s,totalCount:i,status:n,statusText:o,clerkTraceId:a,retryAfter:c}=await t(...e);if(s){const u=new hc(o||"",{data:[],status:n,clerkTraceId:a,retryAfter:c});throw u.errors=s,u}return typeof i<"u"?{data:r,totalCount:i}:r}}function Rd(t){const e=ht(t);return{__experimental_accountlessApplications:new Gl(ht({...t,requireSecretKey:!1})),actorTokens:new Kl(e),allowlistIdentifiers:new Wl(e),apiKeys:new Vl(ht({...t,skipApiVersionInUrl:!0})),betaFeatures:new Yl(e),blocklistIdentifiers:new Ql(e),billing:new Oh(e),clients:new Zl(e),domains:new eh(e),emailAddresses:new th(e),idPOAuthAccessToken:new sh(ht({...t,skipApiVersionInUrl:!0})),instance:new ih(e),invitations:new nh(e),jwks:new uh(e),jwtTemplates:new lh(e),machines:new oh(e),m2m:new ah(ht({...t,skipApiVersionInUrl:!0,requireSecretKey:!1,useMachineSecretKey:!0})),oauthApplications:new dh(e),organizations:new hh(e),phoneNumbers:new fh(e),proxyChecks:new mh(e),redirectUrls:new gh(e),samlConnections:new _h(e),sessions:new yh(e),signInTokens:new vh(e),signUps:new bh(e),testingTokens:new kh(e),users:new Sh(e),waitlistEntries:new Ah(e),webhooks:new Ph(e)}}var Cd="mt_",jd="oat_",Ud="ak_",qd=[Cd,jd,Ud];function Nd(t){return qd.some(e=>t.startsWith(e))}var Vt=(t,e)=>t?e==="any"?!0:(Array.isArray(e)?e:[e]).includes(t):!1;function Ld(t){return t===J.ApiKey||t===J.M2MToken||t===J.OAuthToken}var Os=t=>()=>{const e={...t};return e.secretKey=(e.secretKey||"").substring(0,7),e.jwtKey=(e.jwtKey||"").substring(0,7),{...e}};function $d(t,e,r){const{actor:s,sessionId:i,sessionStatus:n,userId:o,orgId:a,orgRole:c,orgSlug:u,orgPermissions:l,factorVerificationAge:h}=Rl(r),f=Rd(t),y=Md({sessionId:i,sessionToken:e,fetcher:async(_,S,g)=>(await f.sessions.getToken(_,S||"",g)).jwt});return{tokenType:J.SessionToken,actor:s,sessionClaims:r,sessionId:i,sessionStatus:n,userId:o,orgId:a,orgRole:c,orgSlug:u,orgPermissions:l,factorVerificationAge:h,getToken:y,has:uc({orgId:a,orgRole:c,orgPermissions:l,userId:o,factorVerificationAge:h,features:r.fea||"",plans:r.pla||""}),debug:Os({...t,sessionToken:e}),isAuthenticated:!0}}function Xt(t,e){return{tokenType:J.SessionToken,sessionClaims:null,sessionId:null,sessionStatus:e??null,userId:null,actor:null,orgId:null,orgRole:null,orgSlug:null,orgPermissions:null,factorVerificationAge:null,getToken:()=>Promise.resolve(null),has:()=>!1,debug:Os(t),isAuthenticated:!1}}function Dd(t,e){const r={id:null,subject:null,scopes:null,has:()=>!1,getToken:()=>Promise.resolve(null),debug:Os(e),isAuthenticated:!1};switch(t){case J.ApiKey:return{...r,tokenType:t,name:null,claims:null,scopes:null,userId:null,orgId:null};case J.M2MToken:return{...r,tokenType:t,claims:null,scopes:null,machineId:null};case J.OAuthToken:return{...r,tokenType:t,scopes:null,userId:null,clientId:null};default:throw new Error(`Invalid token type: ${t}`)}}function Ia(){return{isAuthenticated:!1,tokenType:null,getToken:()=>Promise.resolve(null),has:()=>!1,debug:()=>({})}}var Md=t=>{const{fetcher:e,sessionToken:r,sessionId:s}=t||{};return async(i={})=>s?i.template||i.expiresInSeconds!==void 0?e(s,i.template,i.expiresInSeconds):r:null},Bd=(t,{treatPendingAsSignedOut:e=!0,...r})=>{const s=$d(r,t.raw.text,t.payload);return e&&s.sessionStatus==="pending"?Xt(r,s.sessionStatus):s},zd=({authObject:t,acceptsToken:e=J.SessionToken})=>e==="any"?t:Array.isArray(e)?Vt(t.tokenType,e)?t:Ia():Vt(t.tokenType,e)?t:Ld(e)?Dd(e,t.debug):Xt(t.debug),Fd={SignedIn:"signed-in"},Jd=class extends URL{isCrossOrigin(t){return this.origin!==new URL(t.toString()).origin}},$i=(...t)=>new Jd(...t),Di=class extends Request{constructor(t,e){const r=typeof t!="string"&&"url"in t?t.url:String(t);super(r,e||typeof t=="string"?void 0:t),this.clerkUrl=this.deriveUrlFromHeaders(this),this.cookies=this.parseCookies(this)}toJSON(){return{url:this.clerkUrl.href,method:this.method,headers:JSON.stringify(Object.fromEntries(this.headers)),clerkUrl:this.clerkUrl.toString(),cookies:JSON.stringify(Object.fromEntries(this.cookies))}}deriveUrlFromHeaders(t){const e=new URL(t.url),r=t.headers.get(z.Headers.ForwardedProto),s=t.headers.get(z.Headers.ForwardedHost),i=t.headers.get(z.Headers.Host),n=e.protocol,o=this.getFirstValueFromHeader(s)??i,a=this.getFirstValueFromHeader(r)??(n==null?void 0:n.replace(/[:/]/,"")),c=o&&a?`${a}://${o}`:e.origin;return c===e.origin?$i(e):$i(e.pathname+e.search,c)}getFirstValueFromHeader(t){return t==null?void 0:t.split(",")[0]}parseCookies(t){const e=jl.parse(this.decodeCookieValue(t.headers.get("cookie")||""));return new Map(Object.entries(e))}decodeCookieValue(t){return t&&t.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}},Hd=(...t)=>t[0]instanceof Di?t[0]:new Di(...t);function Kd(t){return(...e)=>{const{data:r,errors:s}=t(...e);if(s)throw s[0];return r}}function st(t){if(typeof t=="boolean")return t;if(t==null)return!1;if(typeof t=="string"){if(t.toLowerCase()==="true")return!0;if(t.toLowerCase()==="false")return!1}const e=parseInt(t,10);return isNaN(e)?!1:e>0}var Ft={exports:{}},xr={},Ir={},Rr={},Mi;function Gd(){return Mi||(Mi=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"detectDomainLocale",{enumerable:!0,get:function(){return e}});function e(r,s,i){if(r){i&&(i=i.toLowerCase());for(const a of r){var n,o;const c=(n=a.domain)==null?void 0:n.split(":",1)[0].toLowerCase();if(s===c||i===a.defaultLocale.toLowerCase()||(o=a.locales)!=null&&o.some(u=>u.toLowerCase()===i))return a}}}}(Rr)),Rr}var Cr={},Bi;function Wd(){return Bi||(Bi=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"getHostname",{enumerable:!0,get:function(){return e}});function e(r,s){let i;if(s!=null&&s.host&&!Array.isArray(s.host))i=s.host.toString().split(":",1)[0];else if(r.hostname)i=r.hostname;else return;return i.toLowerCase()}}(Cr)),Cr}var zi;function Ra(){return zi||(zi=1,function(t){var e={};Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"NextURL",{enumerable:!0,get:function(){return u}});const r=Gd(),s=rc(),i=Wd(),n=sc(),o=/(?!^https?:\/\/)(127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}|\[::1\]|localhost)/;function a(l,h){return new URL(String(l).replace(o,"localhost"),h&&String(h).replace(o,"localhost"))}const c=Symbol("NextURLInternal");class u{constructor(h,f,y){let _,S;typeof f=="object"&&"pathname"in f||typeof f=="string"?(_=f,S=y||{}):S=y||f||{},this[c]={url:a(h,_??S.base),options:S,basePath:""},this.analyze()}analyze(){var h,f,y,_,S;const g=(0,n.getNextPathnameInfo)(this[c].url.pathname,{nextConfig:this[c].options.nextConfig,parseData:!e.__NEXT_NO_MIDDLEWARE_URL_NORMALIZE,i18nProvider:this[c].options.i18nProvider}),w=(0,i.getHostname)(this[c].url,this[c].options.headers);this[c].domainLocale=this[c].options.i18nProvider?this[c].options.i18nProvider.detectDomainLocale(w):(0,r.detectDomainLocale)((f=this[c].options.nextConfig)==null||(h=f.i18n)==null?void 0:h.domains,w);const k=((y=this[c].domainLocale)==null?void 0:y.defaultLocale)||((S=this[c].options.nextConfig)==null||(_=S.i18n)==null?void 0:_.defaultLocale);this[c].url.pathname=g.pathname,this[c].defaultLocale=k,this[c].basePath=g.basePath??"",this[c].buildId=g.buildId,this[c].locale=g.locale??k,this[c].trailingSlash=g.trailingSlash}formatPathname(){return(0,s.formatNextPathnameInfo)({basePath:this[c].basePath,buildId:this[c].buildId,defaultLocale:this[c].options.forceLocale?void 0:this[c].defaultLocale,locale:this[c].locale,pathname:this[c].url.pathname,trailingSlash:this[c].trailingSlash})}formatSearch(){return this[c].url.search}get buildId(){return this[c].buildId}set buildId(h){this[c].buildId=h}get locale(){return this[c].locale??""}set locale(h){var f,y;if(!this[c].locale||!(!((y=this[c].options.nextConfig)==null||(f=y.i18n)==null)&&f.locales.includes(h)))throw Object.defineProperty(new TypeError(`The NextURL configuration includes no locale "${h}"`),"__NEXT_ERROR_CODE",{value:"E597",enumerable:!1,configurable:!0});this[c].locale=h}get defaultLocale(){return this[c].defaultLocale}get domainLocale(){return this[c].domainLocale}get searchParams(){return this[c].url.searchParams}get host(){return this[c].url.host}set host(h){this[c].url.host=h}get hostname(){return this[c].url.hostname}set hostname(h){this[c].url.hostname=h}get port(){return this[c].url.port}set port(h){this[c].url.port=h}get protocol(){return this[c].url.protocol}set protocol(h){this[c].url.protocol=h}get href(){const h=this.formatPathname(),f=this.formatSearch();return`${this.protocol}//${this.host}${h}${f}${this.hash}`}set href(h){this[c].url=a(h),this.analyze()}get origin(){return this[c].url.origin}get pathname(){return this[c].url.pathname}set pathname(h){this[c].url.pathname=h}get hash(){return this[c].url.hash}set hash(h){this[c].url.hash=h}get search(){return this[c].url.search}set search(h){this[c].url.search=h}get password(){return this[c].url.password}set password(h){this[c].url.password=h}get username(){return this[c].url.username}set username(h){this[c].url.username=h}get basePath(){return this[c].basePath}set basePath(h){this[c].basePath=h.startsWith("/")?h:`/${h}`}toString(){return this.href}toJSON(){return this.href}[Symbol.for("edge-runtime.inspect.custom")](){return{href:this.href,origin:this.origin,protocol:this.protocol,username:this.username,password:this.password,host:this.host,hostname:this.hostname,port:this.port,pathname:this.pathname,search:this.search,searchParams:this.searchParams,hash:this.hash}}clone(){return new u(String(this),this[c].options)}}}(Ir)),Ir}var jr={},Fi;function Ca(){return Fi||(Fi=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});function e(c,u){for(var l in u)Object.defineProperty(c,l,{enumerable:!0,get:u[l]})}e(t,{fromNodeOutgoingHttpHeaders:function(){return s},normalizeNextQueryParam:function(){return a},splitCookiesString:function(){return i},toNodeOutgoingHttpHeaders:function(){return n},validateURL:function(){return o}});const r=ic();function s(c){const u=new Headers;for(let[l,h]of Object.entries(c)){const f=Array.isArray(h)?h:[h];for(let y of f)typeof y>"u"||(typeof y=="number"&&(y=y.toString()),u.append(l,y))}return u}function i(c){var u=[],l=0,h,f,y,_,S;function g(){for(;l<c.length&&/\s/.test(c.charAt(l));)l+=1;return l<c.length}function w(){return f=c.charAt(l),f!=="="&&f!==";"&&f!==","}for(;l<c.length;){for(h=l,S=!1;g();)if(f=c.charAt(l),f===","){for(y=l,l+=1,g(),_=l;l<c.length&&w();)l+=1;l<c.length&&c.charAt(l)==="="?(S=!0,l=_,u.push(c.substring(h,y)),h=l):l=y+1}else l+=1;(!S||l>=c.length)&&u.push(c.substring(h,c.length))}return u}function n(c){const u={},l=[];if(c)for(const[h,f]of c.entries())h.toLowerCase()==="set-cookie"?(l.push(...i(f)),u[h]=l.length===1?l[0]:l):u[h]=f;return u}function o(c){try{return String(new URL(String(c)))}catch(u){throw Object.defineProperty(new Error(`URL is malformed "${String(c)}". Please use only absolute URLs - https://nextjs.org/docs/messages/middleware-relative-urls`,{cause:u}),"__NEXT_ERROR_CODE",{value:"E61",enumerable:!1,configurable:!0})}}function a(c){const u=[r.NEXT_QUERY_PARAM_PREFIX,r.NEXT_INTERCEPTION_MARKER_PREFIX];for(const l of u)if(c!==l&&c.startsWith(l))return c.substring(l.length);return null}}(jr)),jr}var Ur={},Ji;function Vd(){return Ji||(Ji=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});function e(n,o){for(var a in o)Object.defineProperty(n,a,{enumerable:!0,get:o[a]})}e(t,{PageSignatureError:function(){return r},RemovedPageError:function(){return s},RemovedUAError:function(){return i}});class r extends Error{constructor({page:o}){super(`The middleware "${o}" accepts an async API directly with the form:
  
  export function middleware(request, event) {
    return NextResponse.redirect('/new-location')
  }
  
  Read more: https://nextjs.org/docs/messages/middleware-new-signature
  `)}}class s extends Error{constructor(){super("The request.page has been deprecated in favour of `URLPattern`.\n  Read more: https://nextjs.org/docs/messages/middleware-request-page\n  ")}}class i extends Error{constructor(){super("The request.ua has been removed in favour of `userAgent` function.\n  Read more: https://nextjs.org/docs/messages/middleware-parse-user-agent\n  ")}}}(Ur)),Ur}var qr={},Nr,Hi;function Xd(){if(Hi)return Nr;Hi=1;var t=Object.defineProperty,e=Object.getOwnPropertyDescriptor,r=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,i=(d,v)=>{for(var p in v)t(d,p,{get:v[p],enumerable:!0})},n=(d,v,p,P)=>{if(v&&typeof v=="object"||typeof v=="function")for(let O of r(v))!s.call(d,O)&&O!==p&&t(d,O,{get:()=>v[O],enumerable:!(P=e(v,O))||P.enumerable});return d},o=d=>n(t({},"__esModule",{value:!0}),d),a={};i(a,{RequestCookies:()=>w,ResponseCookies:()=>k,parseCookie:()=>u,parseSetCookie:()=>l,stringifyCookie:()=>c}),Nr=o(a);function c(d){var v;const p=["path"in d&&d.path&&`Path=${d.path}`,"expires"in d&&(d.expires||d.expires===0)&&`Expires=${(typeof d.expires=="number"?new Date(d.expires):d.expires).toUTCString()}`,"maxAge"in d&&typeof d.maxAge=="number"&&`Max-Age=${d.maxAge}`,"domain"in d&&d.domain&&`Domain=${d.domain}`,"secure"in d&&d.secure&&"Secure","httpOnly"in d&&d.httpOnly&&"HttpOnly","sameSite"in d&&d.sameSite&&`SameSite=${d.sameSite}`,"partitioned"in d&&d.partitioned&&"Partitioned","priority"in d&&d.priority&&`Priority=${d.priority}`].filter(Boolean),P=`${d.name}=${encodeURIComponent((v=d.value)!=null?v:"")}`;return p.length===0?P:`${P}; ${p.join("; ")}`}function u(d){const v=new Map;for(const p of d.split(/; */)){if(!p)continue;const P=p.indexOf("=");if(P===-1){v.set(p,"true");continue}const[O,C]=[p.slice(0,P),p.slice(P+1)];try{v.set(O,decodeURIComponent(C??"true"))}catch{}}return v}function l(d){if(!d)return;const[[v,p],...P]=u(d),{domain:O,expires:C,httponly:W,maxage:H,path:re,samesite:se,secure:Ne,partitioned:Le,priority:ge}=Object.fromEntries(P.map(([tr,De])=>[tr.toLowerCase().replace(/-/g,""),De])),$e={name:v,value:decodeURIComponent(p),domain:O,...C&&{expires:new Date(C)},...W&&{httpOnly:!0},...typeof H=="string"&&{maxAge:Number(H)},path:re,...se&&{sameSite:y(se)},...Ne&&{secure:!0},...ge&&{priority:S(ge)},...Le&&{partitioned:!0}};return h($e)}function h(d){const v={};for(const p in d)d[p]&&(v[p]=d[p]);return v}var f=["strict","lax","none"];function y(d){return d=d.toLowerCase(),f.includes(d)?d:void 0}var _=["low","medium","high"];function S(d){return d=d.toLowerCase(),_.includes(d)?d:void 0}function g(d){if(!d)return[];var v=[],p=0,P,O,C,W,H;function re(){for(;p<d.length&&/\s/.test(d.charAt(p));)p+=1;return p<d.length}function se(){return O=d.charAt(p),O!=="="&&O!==";"&&O!==","}for(;p<d.length;){for(P=p,H=!1;re();)if(O=d.charAt(p),O===","){for(C=p,p+=1,re(),W=p;p<d.length&&se();)p+=1;p<d.length&&d.charAt(p)==="="?(H=!0,p=W,v.push(d.substring(P,C)),P=p):p=C+1}else p+=1;(!H||p>=d.length)&&v.push(d.substring(P,d.length))}return v}var w=class{constructor(d){this._parsed=new Map,this._headers=d;const v=d.get("cookie");if(v){const p=u(v);for(const[P,O]of p)this._parsed.set(P,{name:P,value:O})}}[Symbol.iterator](){return this._parsed[Symbol.iterator]()}get size(){return this._parsed.size}get(...d){const v=typeof d[0]=="string"?d[0]:d[0].name;return this._parsed.get(v)}getAll(...d){var v;const p=Array.from(this._parsed);if(!d.length)return p.map(([O,C])=>C);const P=typeof d[0]=="string"?d[0]:(v=d[0])==null?void 0:v.name;return p.filter(([O])=>O===P).map(([O,C])=>C)}has(d){return this._parsed.has(d)}set(...d){const[v,p]=d.length===1?[d[0].name,d[0].value]:d,P=this._parsed;return P.set(v,{name:v,value:p}),this._headers.set("cookie",Array.from(P).map(([O,C])=>c(C)).join("; ")),this}delete(d){const v=this._parsed,p=Array.isArray(d)?d.map(P=>v.delete(P)):v.delete(d);return this._headers.set("cookie",Array.from(v).map(([P,O])=>c(O)).join("; ")),p}clear(){return this.delete(Array.from(this._parsed.keys())),this}[Symbol.for("edge-runtime.inspect.custom")](){return`RequestCookies ${JSON.stringify(Object.fromEntries(this._parsed))}`}toString(){return[...this._parsed.values()].map(d=>`${d.name}=${encodeURIComponent(d.value)}`).join("; ")}},k=class{constructor(d){this._parsed=new Map;var v,p,P;this._headers=d;const O=(P=(p=(v=d.getSetCookie)==null?void 0:v.call(d))!=null?p:d.get("set-cookie"))!=null?P:[],C=Array.isArray(O)?O:g(O);for(const W of C){const H=l(W);H&&this._parsed.set(H.name,H)}}get(...d){const v=typeof d[0]=="string"?d[0]:d[0].name;return this._parsed.get(v)}getAll(...d){var v;const p=Array.from(this._parsed.values());if(!d.length)return p;const P=typeof d[0]=="string"?d[0]:(v=d[0])==null?void 0:v.name;return p.filter(O=>O.name===P)}has(d){return this._parsed.has(d)}set(...d){const[v,p,P]=d.length===1?[d[0].name,d[0].value,d[0]]:d,O=this._parsed;return O.set(v,m({name:v,value:p,...P})),b(O,this._headers),this}delete(...d){const[v,p]=typeof d[0]=="string"?[d[0]]:[d[0].name,d[0]];return this.set({...p,name:v,value:"",expires:new Date(0)})}[Symbol.for("edge-runtime.inspect.custom")](){return`ResponseCookies ${JSON.stringify(Object.fromEntries(this._parsed))}`}toString(){return[...this._parsed.values()].map(c).join("; ")}};function b(d,v){v.delete("set-cookie");for(const[,p]of d){const P=c(p);v.append("set-cookie",P)}}function m(d={name:"",value:""}){return typeof d.expires=="number"&&(d.expires=new Date(d.expires)),d.maxAge&&(d.expires=new Date(Date.now()+d.maxAge*1e3)),(d.path===null||d.path===void 0)&&(d.path="/"),d}return Nr}var Ki;function ds(){return Ki||(Ki=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});function e(s,i){for(var n in i)Object.defineProperty(s,n,{enumerable:!0,get:i[n]})}e(t,{RequestCookies:function(){return r.RequestCookies},ResponseCookies:function(){return r.ResponseCookies},stringifyCookie:function(){return r.stringifyCookie}});const r=Xd()}(qr)),qr}var Gi;function Yd(){return Gi||(Gi=1,function(t){var e={};Object.defineProperty(t,"__esModule",{value:!0});function r(u,l){for(var h in l)Object.defineProperty(u,h,{enumerable:!0,get:l[h]})}r(t,{INTERNALS:function(){return a},NextRequest:function(){return c}});const s=Ra(),i=Ca(),n=Vd(),o=ds(),a=Symbol("internal request");class c extends Request{constructor(l,h={}){const f=typeof l!="string"&&"url"in l?l.url:String(l);(0,i.validateURL)(f),h.body&&h.duplex!=="half"&&(h.duplex="half"),l instanceof Request?super(l,h):super(f,h);const y=new s.NextURL(f,{headers:(0,i.toNodeOutgoingHttpHeaders)(this.headers),nextConfig:h.nextConfig});this[a]={cookies:new o.RequestCookies(this.headers),nextUrl:y,url:e.__NEXT_NO_MIDDLEWARE_URL_NORMALIZE?f:y.toString()}}[Symbol.for("edge-runtime.inspect.custom")](){return{cookies:this.cookies,nextUrl:this.nextUrl,url:this.url,bodyUsed:this.bodyUsed,cache:this.cache,credentials:this.credentials,destination:this.destination,headers:Object.fromEntries(this.headers),integrity:this.integrity,keepalive:this.keepalive,method:this.method,mode:this.mode,redirect:this.redirect,referrer:this.referrer,referrerPolicy:this.referrerPolicy,signal:this.signal}}get cookies(){return this[a].cookies}get nextUrl(){return this[a].nextUrl}get page(){throw new n.RemovedPageError}get ua(){throw new n.RemovedUAError}get url(){return this[a].url}}}(xr)),xr}var Lr={},$r={},Wi;function Qd(){return Wi||(Wi=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"ReflectAdapter",{enumerable:!0,get:function(){return e}});class e{static get(s,i,n){const o=Reflect.get(s,i,n);return typeof o=="function"?o.bind(s):o}static set(s,i,n,o){return Reflect.set(s,i,n,o)}static has(s,i){return Reflect.has(s,i)}static deleteProperty(s,i){return Reflect.deleteProperty(s,i)}}}($r)),$r}var Vi;function Zd(){return Vi||(Vi=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"NextResponse",{enumerable:!0,get:function(){return u}});const e=ds(),r=Ra(),s=Ca(),i=Qd(),n=ds(),o=Symbol("internal response"),a=new Set([301,302,303,307,308]);function c(l,h){var f;if(!(l==null||(f=l.request)==null)&&f.headers){if(!(l.request.headers instanceof Headers))throw Object.defineProperty(new Error("request.headers must be an instance of Headers"),"__NEXT_ERROR_CODE",{value:"E119",enumerable:!1,configurable:!0});const y=[];for(const[_,S]of l.request.headers)h.set("x-middleware-request-"+_,S),y.push(_);h.set("x-middleware-override-headers",y.join(","))}}class u extends Response{constructor(h,f={}){super(h,f);const y=this.headers,_=new n.ResponseCookies(y),S=new Proxy(_,{get(g,w,k){switch(w){case"delete":case"set":return(...b)=>{const m=Reflect.apply(g[w],g,b),d=new Headers(y);return m instanceof n.ResponseCookies&&y.set("x-middleware-set-cookie",m.getAll().map(v=>(0,e.stringifyCookie)(v)).join(",")),c(f,d),m};default:return i.ReflectAdapter.get(g,w,k)}}});this[o]={cookies:S,url:f.url?new r.NextURL(f.url,{headers:(0,s.toNodeOutgoingHttpHeaders)(y),nextConfig:f.nextConfig}):void 0}}[Symbol.for("edge-runtime.inspect.custom")](){return{cookies:this.cookies,url:this.url,body:this.body,bodyUsed:this.bodyUsed,headers:Object.fromEntries(this.headers),ok:this.ok,redirected:this.redirected,status:this.status,statusText:this.statusText,type:this.type}}get cookies(){return this[o].cookies}static json(h,f){const y=Response.json(h,f);return new u(y.body,y)}static redirect(h,f){const y=typeof f=="number"?f:(f==null?void 0:f.status)??307;if(!a.has(y))throw Object.defineProperty(new RangeError('Failed to execute "redirect" on "response": Invalid status code'),"__NEXT_ERROR_CODE",{value:"E529",enumerable:!1,configurable:!0});const _=typeof f=="object"?f:{},S=new Headers(_==null?void 0:_.headers);return S.set("Location",(0,s.validateURL)(h)),new u(null,{..._,headers:S,status:y})}static rewrite(h,f){const y=new Headers(f==null?void 0:f.headers);return y.set("x-middleware-rewrite",(0,s.validateURL)(h)),c(f,y),new u(null,{...f,headers:y})}static next(h){const f=new Headers(h==null?void 0:h.headers);return f.set("x-middleware-next","1"),c(h,f),new u(null,{...h,headers:f})}}}(Lr)),Lr}var Dr={},Xi;function ef(){return Xi||(Xi=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"ImageResponse",{enumerable:!0,get:function(){return e}});function e(){throw Object.defineProperty(new Error('ImageResponse moved from "next/server" to "next/og" since Next.js 14, please import from "next/og" instead'),"__NEXT_ERROR_CODE",{value:"E183",enumerable:!1,configurable:!0})}}(Dr)),Dr}var Mr={},Br={exports:{}},Yi;function tf(){return Yi||(Yi=1,(()=>{var t={226:function(i,n){(function(o,a){var c="1.0.35",u="",l="?",h="function",f="undefined",y="object",_="string",S="major",g="model",w="name",k="type",b="vendor",m="version",d="architecture",v="console",p="mobile",P="tablet",O="smarttv",C="wearable",W="embedded",H=350,re="Amazon",se="Apple",Ne="ASUS",Le="BlackBerry",ge="Browser",$e="Chrome",tr="Edge",De="Firefox",Ot="Google",qs="Huawei",rr="LG",sr="Microsoft",Ns="Motorola",Tt="Opera",ir="Samsung",Ls="Sharp",xt="Sony",nr="Xiaomi",or="Zebra",$s="Facebook",Ds="Chromium OS",Ms="Mac OS",Ya=function(U,L){var x={};for(var $ in U)L[$]&&L[$].length%2===0?x[$]=L[$].concat(U[$]):x[$]=U[$];return x},It=function(U){for(var L={},x=0;x<U.length;x++)L[U[x].toUpperCase()]=U[x];return L},Bs=function(U,L){return typeof U===_?it(L).indexOf(it(U))!==-1:!1},it=function(U){return U.toLowerCase()},Qa=function(U){return typeof U===_?U.replace(/[^\d\.]/g,u).split(".")[0]:a},ar=function(U,L){if(typeof U===_)return U=U.replace(/^\s\s*/,u),typeof L===f?U:U.substring(0,H)},nt=function(U,L){for(var x=0,$,we,fe,q,T,pe;x<L.length&&!T;){var ur=L[x],Js=L[x+1];for($=we=0;$<ur.length&&!T&&ur[$];)if(T=ur[$++].exec(U),T)for(fe=0;fe<Js.length;fe++)pe=T[++we],q=Js[fe],typeof q===y&&q.length>0?q.length===2?typeof q[1]==h?this[q[0]]=q[1].call(this,pe):this[q[0]]=q[1]:q.length===3?typeof q[1]===h&&!(q[1].exec&&q[1].test)?this[q[0]]=pe?q[1].call(this,pe,q[2]):a:this[q[0]]=pe?pe.replace(q[1],q[2]):a:q.length===4&&(this[q[0]]=pe?q[3].call(this,pe.replace(q[1],q[2])):a):this[q]=pe||a;x+=2}},cr=function(U,L){for(var x in L)if(typeof L[x]===y&&L[x].length>0){for(var $=0;$<L[x].length;$++)if(Bs(L[x][$],U))return x===l?a:x}else if(Bs(L[x],U))return x===l?a:x;return U},Za={"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"},zs={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},Fs={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[m,[w,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[m,[w,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[w,m],[/opios[\/ ]+([\w\.]+)/i],[m,[w,Tt+" Mini"]],[/\bopr\/([\w\.]+)/i],[m,[w,Tt]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,/(ba?idubrowser)[\/ ]?([\w\.]+)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(heytap|ovi)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[w,m],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[m,[w,"UC"+ge]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i],[m,[w,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[m,[w,"WeChat"]],[/konqueror\/([\w\.]+)/i],[m,[w,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[m,[w,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[m,[w,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[w,/(.+)/,"$1 Secure "+ge],m],[/\bfocus\/([\w\.]+)/i],[m,[w,De+" Focus"]],[/\bopt\/([\w\.]+)/i],[m,[w,Tt+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[m,[w,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[m,[w,"Dolphin"]],[/coast\/([\w\.]+)/i],[m,[w,Tt+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[m,[w,"MIUI "+ge]],[/fxios\/([-\w\.]+)/i],[m,[w,De]],[/\bqihu|(qi?ho?o?|360)browser/i],[[w,"360 "+ge]],[/(oculus|samsung|sailfish|huawei)browser\/([\w\.]+)/i],[[w,/(.+)/,"$1 "+ge],m],[/(comodo_dragon)\/([\w\.]+)/i],[[w,/_/g," "],m],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],[w,m],[/(metasr)[\/ ]?([\w\.]+)/i,/(lbbrowser)/i,/\[(linkedin)app\]/i],[w],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[w,$s],m],[/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/ ]([-\w\.]+)/i],[w,m],[/\bgsa\/([\w\.]+) .*safari\//i],[m,[w,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[m,[w,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[m,[w,$e+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[w,$e+" WebView"],m],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[m,[w,"Android "+ge]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[w,m],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[m,[w,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[m,w],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[w,[m,cr,Za]],[/(webkit|khtml)\/([\w\.]+)/i],[w,m],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[w,"Netscape"],m],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[m,[w,De+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i,/panasonic;(viera)/i],[w,m],[/(cobalt)\/([\w\.]+)/i],[w,[m,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[d,"amd64"]],[/(ia32(?=;))/i],[[d,it]],[/((?:i[346]|x)86)[;\)]/i],[[d,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[d,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[d,"armhf"]],[/windows (ce|mobile); ppc;/i],[[d,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[d,/ower/,u,it]],[/(sun4\w)[;\)]/i],[[d,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[d,it]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[g,[b,ir],[k,P]],[/\b((?:s[cgp]h|gt|sm)-\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[g,[b,ir],[k,p]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[g,[b,se],[k,p]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[g,[b,se],[k,P]],[/(macintosh);/i],[g,[b,se]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[g,[b,Ls],[k,p]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[g,[b,qs],[k,P]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[g,[b,qs],[k,p]],[/\b(poco[\w ]+)(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[g,/_/g," "],[b,nr],[k,p]],[/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[g,/_/g," "],[b,nr],[k,P]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[g,[b,"OPPO"],[k,p]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[g,[b,"Vivo"],[k,p]],[/\b(rmx[12]\d{3})(?: bui|;|\))/i],[g,[b,"Realme"],[k,p]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[g,[b,Ns],[k,p]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[g,[b,Ns],[k,P]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[g,[b,rr],[k,P]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[g,[b,rr],[k,p]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[g,[b,"Lenovo"],[k,P]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[g,/_/g," "],[b,"Nokia"],[k,p]],[/(pixel c)\b/i],[g,[b,Ot],[k,P]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[g,[b,Ot],[k,p]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[g,[b,xt],[k,p]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[g,"Xperia Tablet"],[b,xt],[k,P]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[g,[b,"OnePlus"],[k,p]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[g,[b,re],[k,P]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[g,/(.+)/g,"Fire Phone $1"],[b,re],[k,p]],[/(playbook);[-\w\),; ]+(rim)/i],[g,b,[k,P]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[g,[b,Le],[k,p]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[g,[b,Ne],[k,P]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[g,[b,Ne],[k,p]],[/(nexus 9)/i],[g,[b,"HTC"],[k,P]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[b,[g,/_/g," "],[k,p]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[g,[b,"Acer"],[k,P]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[g,[b,"Meizu"],[k,p]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[b,g,[k,p]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[b,g,[k,P]],[/(surface duo)/i],[g,[b,sr],[k,P]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[g,[b,"Fairphone"],[k,p]],[/(u304aa)/i],[g,[b,"AT&T"],[k,p]],[/\bsie-(\w*)/i],[g,[b,"Siemens"],[k,p]],[/\b(rct\w+) b/i],[g,[b,"RCA"],[k,P]],[/\b(venue[\d ]{2,7}) b/i],[g,[b,"Dell"],[k,P]],[/\b(q(?:mv|ta)\w+) b/i],[g,[b,"Verizon"],[k,P]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[g,[b,"Barnes & Noble"],[k,P]],[/\b(tm\d{3}\w+) b/i],[g,[b,"NuVision"],[k,P]],[/\b(k88) b/i],[g,[b,"ZTE"],[k,P]],[/\b(nx\d{3}j) b/i],[g,[b,"ZTE"],[k,p]],[/\b(gen\d{3}) b.+49h/i],[g,[b,"Swiss"],[k,p]],[/\b(zur\d{3}) b/i],[g,[b,"Swiss"],[k,P]],[/\b((zeki)?tb.*\b) b/i],[g,[b,"Zeki"],[k,P]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[b,"Dragon Touch"],g,[k,P]],[/\b(ns-?\w{0,9}) b/i],[g,[b,"Insignia"],[k,P]],[/\b((nxa|next)-?\w{0,9}) b/i],[g,[b,"NextBook"],[k,P]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[b,"Voice"],g,[k,p]],[/\b(lvtel\-)?(v1[12]) b/i],[[b,"LvTel"],g,[k,p]],[/\b(ph-1) /i],[g,[b,"Essential"],[k,p]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[g,[b,"Envizen"],[k,P]],[/\b(trio[-\w\. ]+) b/i],[g,[b,"MachSpeed"],[k,P]],[/\btu_(1491) b/i],[g,[b,"Rotor"],[k,P]],[/(shield[\w ]+) b/i],[g,[b,"Nvidia"],[k,P]],[/(sprint) (\w+)/i],[b,g,[k,p]],[/(kin\.[onetw]{3})/i],[[g,/\./g," "],[b,sr],[k,p]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[g,[b,or],[k,P]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[g,[b,or],[k,p]],[/smart-tv.+(samsung)/i],[b,[k,O]],[/hbbtv.+maple;(\d+)/i],[[g,/^/,"SmartTV"],[b,ir],[k,O]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[b,rr],[k,O]],[/(apple) ?tv/i],[b,[g,se+" TV"],[k,O]],[/crkey/i],[[g,$e+"cast"],[b,Ot],[k,O]],[/droid.+aft(\w)( bui|\))/i],[g,[b,re],[k,O]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[g,[b,Ls],[k,O]],[/(bravia[\w ]+)( bui|\))/i],[g,[b,xt],[k,O]],[/(mitv-\w{5}) bui/i],[g,[b,nr],[k,O]],[/Hbbtv.*(technisat) (.*);/i],[b,g,[k,O]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[b,ar],[g,ar],[k,O]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[k,O]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[b,g,[k,v]],[/droid.+; (shield) bui/i],[g,[b,"Nvidia"],[k,v]],[/(playstation [345portablevi]+)/i],[g,[b,xt],[k,v]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[g,[b,sr],[k,v]],[/((pebble))app/i],[b,g,[k,C]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[g,[b,se],[k,C]],[/droid.+; (glass) \d/i],[g,[b,Ot],[k,C]],[/droid.+; (wt63?0{2,3})\)/i],[g,[b,or],[k,C]],[/(quest( 2| pro)?)/i],[g,[b,$s],[k,C]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[b,[k,W]],[/(aeobc)\b/i],[g,[b,re],[k,W]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],[g,[k,p]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[g,[k,P]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[k,P]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[k,p]],[/(android[-\w\. ]{0,9});.+buil/i],[g,[b,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[m,[w,tr+"HTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[m,[w,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[w,m],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[m,w]],os:[[/microsoft (windows) (vista|xp)/i],[w,m],[/(windows) nt 6\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,/(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i],[w,[m,cr,zs]],[/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[w,"Windows"],[m,cr,zs]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/ios;fbsv\/([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[m,/_/g,"."],[w,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[w,Ms],[m,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[m,w],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[w,m],[/\(bb(10);/i],[m,[w,Le]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[m,[w,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[m,[w,De+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[m,[w,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[m,[w,"watchOS"]],[/crkey\/([\d\.]+)/i],[m,[w,$e+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[w,Ds],m],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[w,m],[/(sunos) ?([\w\.\d]*)/i],[[w,"Solaris"],m],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[w,m]]},oe=function(U,L){if(typeof U===y&&(L=U,U=a),!(this instanceof oe))return new oe(U,L).getResult();var x=typeof o!==f&&o.navigator?o.navigator:a,$=U||(x&&x.userAgent?x.userAgent:u),we=x&&x.userAgentData?x.userAgentData:a,fe=L?Ya(Fs,L):Fs,q=x&&x.userAgent==$;return this.getBrowser=function(){var T={};return T[w]=a,T[m]=a,nt.call(T,$,fe.browser),T[S]=Qa(T[m]),q&&x&&x.brave&&typeof x.brave.isBrave==h&&(T[w]="Brave"),T},this.getCPU=function(){var T={};return T[d]=a,nt.call(T,$,fe.cpu),T},this.getDevice=function(){var T={};return T[b]=a,T[g]=a,T[k]=a,nt.call(T,$,fe.device),q&&!T[k]&&we&&we.mobile&&(T[k]=p),q&&T[g]=="Macintosh"&&x&&typeof x.standalone!==f&&x.maxTouchPoints&&x.maxTouchPoints>2&&(T[g]="iPad",T[k]=P),T},this.getEngine=function(){var T={};return T[w]=a,T[m]=a,nt.call(T,$,fe.engine),T},this.getOS=function(){var T={};return T[w]=a,T[m]=a,nt.call(T,$,fe.os),q&&!T[w]&&we&&we.platform!="Unknown"&&(T[w]=we.platform.replace(/chrome os/i,Ds).replace(/macos/i,Ms)),T},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return $},this.setUA=function(T){return $=typeof T===_&&T.length>H?ar(T,H):T,this},this.setUA($),this};oe.VERSION=c,oe.BROWSER=It([w,m,S]),oe.CPU=It([d]),oe.DEVICE=It([g,b,k,v,p,O,P,C,W]),oe.ENGINE=oe.OS=It([w,m]),typeof n!==f?(i.exports&&(n=i.exports=oe),n.UAParser=oe):typeof o!==f&&(o.UAParser=oe);var Me=typeof o!==f&&(o.jQuery||o.Zepto);if(Me&&!Me.ua){var Rt=new oe;Me.ua=Rt.getResult(),Me.ua.get=function(){return Rt.getUA()},Me.ua.set=function(U){Rt.setUA(U);var L=Rt.getResult();for(var x in L)Me.ua[x]=L[x]}}})(typeof window=="object"?window:this)}},e={};function r(i){var n=e[i];if(n!==void 0)return n.exports;var o=e[i]={exports:{}},a=!0;try{t[i].call(o.exports,o,o.exports,r),a=!1}finally{a&&delete e[i]}return o.exports}typeof r<"u"&&(r.ab=__dirname+"/");var s=r(226);Br.exports=s})()),Br.exports}var Qi;function Zi(){return Qi||(Qi=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});function e(a,c){for(var u in c)Object.defineProperty(a,u,{enumerable:!0,get:c[u]})}e(t,{isBot:function(){return i},userAgent:function(){return o},userAgentFromString:function(){return n}});const r=s(tf());function s(a){return a&&a.__esModule?a:{default:a}}function i(a){return/Googlebot|Mediapartners-Google|AdsBot-Google|googleweblight|Storebot-Google|Google-PageRenderer|Google-InspectionTool|Bingbot|BingPreview|Slurp|DuckDuckBot|baiduspider|yandex|sogou|LinkedInBot|bitlybot|tumblr|vkShare|quora link preview|facebookexternalhit|facebookcatalog|Twitterbot|applebot|redditbot|Slackbot|Discordbot|WhatsApp|SkypeUriPreview|ia_archiver/i.test(a)}function n(a){return{...(0,r.default)(a),isBot:a===void 0?!1:i(a)}}function o({headers:a}){return n(a.get("user-agent")||void 0)}}(Mr)),Mr}var zr={},en;function rf(){return en||(en=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"URLPattern",{enumerable:!0,get:function(){return e}});const e=typeof URLPattern>"u"?void 0:URLPattern}(zr)),zr}var Fr={},Jr={},tn;function sf(){return tn||(tn=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"after",{enumerable:!0,get:function(){return r}});const e=ws();function r(s){const i=e.workAsyncStorage.getStore();if(!i)throw Object.defineProperty(new Error("`after` was called outside a request scope. Read more: https://nextjs.org/docs/messages/next-dynamic-api-wrong-context"),"__NEXT_ERROR_CODE",{value:"E468",enumerable:!1,configurable:!0});const{afterContext:n}=i;return n.after(s)}}(Jr)),Jr}var rn;function nf(){return rn||(rn=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),e(sf(),t);function e(r,s){return Object.keys(r).forEach(function(i){i!=="default"&&!Object.prototype.hasOwnProperty.call(s,i)&&Object.defineProperty(s,i,{enumerable:!0,get:function(){return r[i]}})}),r}}(Fr)),Fr}var Hr={},Kr={},Gr={},Wr={},sn;function of(){return sn||(sn=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"afterTaskAsyncStorageInstance",{enumerable:!0,get:function(){return r}});const r=(0,nc().createAsyncLocalStorage)()}(Wr)),Wr}var nn;function af(){return nn||(nn=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"afterTaskAsyncStorage",{enumerable:!0,get:function(){return e.afterTaskAsyncStorageInstance}});const e=of()}(Gr)),Gr}var on;function cf(){return on||(on=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});function e(c,u){for(var l in u)Object.defineProperty(c,l,{enumerable:!0,get:u[l]})}e(t,{isRequestAPICallableInsideAfter:function(){return a},throwForSearchParamsAccessInUseCache:function(){return o},throwWithStaticGenerationBailoutError:function(){return i},throwWithStaticGenerationBailoutErrorWithDynamicError:function(){return n}});const r=Vn(),s=af();function i(c,u){throw Object.defineProperty(new r.StaticGenBailoutError(`Route ${c} couldn't be rendered statically because it used ${u}. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`),"__NEXT_ERROR_CODE",{value:"E576",enumerable:!1,configurable:!0})}function n(c,u){throw Object.defineProperty(new r.StaticGenBailoutError(`Route ${c} with \`dynamic = "error"\` couldn't be rendered statically because it used ${u}. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`),"__NEXT_ERROR_CODE",{value:"E543",enumerable:!1,configurable:!0})}function o(c,u){const l=Object.defineProperty(new Error(`Route ${c.route} used "searchParams" inside "use cache". Accessing Dynamic data sources inside a cache scope is not supported. If you need this data inside a cached function use "searchParams" outside of the cached function and pass the required dynamic data in as an argument. See more info here: https://nextjs.org/docs/messages/next-request-in-use-cache`),"__NEXT_ERROR_CODE",{value:"E634",enumerable:!1,configurable:!0});throw Error.captureStackTrace(l,u),c.invalidDynamicUsageError??(c.invalidDynamicUsageError=l),l}function a(){const c=s.afterTaskAsyncStorage.getStore();return(c==null?void 0:c.rootTaskSpawnPhase)==="action"}}(Kr)),Kr}var an;function uf(){return an||(an=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"connection",{enumerable:!0,get:function(){return a}});const e=ws(),r=Xn(),s=Yn(),i=Vn(),n=Qn(),o=cf();function a(){const c=e.workAsyncStorage.getStore(),u=r.workUnitAsyncStorage.getStore();if(c){if(u&&u.phase==="after"&&!(0,o.isRequestAPICallableInsideAfter)())throw Object.defineProperty(new Error(`Route ${c.route} used "connection" inside "after(...)". The \`connection()\` function is used to indicate the subsequent code must only run when there is an actual Request, but "after(...)" executes after the request, so this function is not allowed in this scope. See more info here: https://nextjs.org/docs/canary/app/api-reference/functions/after`),"__NEXT_ERROR_CODE",{value:"E186",enumerable:!1,configurable:!0});if(c.forceStatic)return Promise.resolve(void 0);if(u){if(u.type==="cache")throw Object.defineProperty(new Error(`Route ${c.route} used "connection" inside "use cache". The \`connection()\` function is used to indicate the subsequent code must only run when there is an actual Request, but caches must be able to be produced before a Request so this function is not allowed in this scope. See more info here: https://nextjs.org/docs/messages/next-request-in-use-cache`),"__NEXT_ERROR_CODE",{value:"E111",enumerable:!1,configurable:!0});if(u.type==="unstable-cache")throw Object.defineProperty(new Error(`Route ${c.route} used "connection" inside a function cached with "unstable_cache(...)". The \`connection()\` function is used to indicate the subsequent code must only run when there is an actual Request, but caches must be able to be produced before a Request so this function is not allowed in this scope. See more info here: https://nextjs.org/docs/app/api-reference/functions/unstable_cache`),"__NEXT_ERROR_CODE",{value:"E1",enumerable:!1,configurable:!0})}if(c.dynamicShouldError)throw Object.defineProperty(new i.StaticGenBailoutError(`Route ${c.route} with \`dynamic = "error"\` couldn't be rendered statically because it used \`connection\`. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`),"__NEXT_ERROR_CODE",{value:"E562",enumerable:!1,configurable:!0});if(u){if(u.type==="prerender"||u.type==="prerender-client")return(0,n.makeHangingPromise)(u.renderSignal,"`connection()`");u.type==="prerender-ppr"?(0,s.postponeWithTracking)(c.route,"connection",u.dynamicTracking):u.type==="prerender-legacy"&&(0,s.throwToInterruptStaticGeneration)("connection",c,u)}(0,s.trackDynamicDataInDynamicRender)(c,u)}return Promise.resolve(void 0)}}(Hr)),Hr}var Vr={},Xr={},cn;function lf(){return cn||(cn=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"InvariantError",{enumerable:!0,get:function(){return e}});class e extends Error{constructor(s,i){super("Invariant: "+(s.endsWith(".")?s:s+".")+" This is a bug in Next.js.",i),this.name="InvariantError"}}}(Xr)),Xr}var Yr={},un;function hf(){return un||(un=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});function e(o,a){for(var c in a)Object.defineProperty(o,c,{enumerable:!0,get:a[c]})}e(t,{describeHasCheckingStringProperty:function(){return i},describeStringPropertyAccess:function(){return s},wellKnownProperties:function(){return n}});const r=/^[A-Za-z_$][A-Za-z0-9_$]*$/;function s(o,a){return r.test(a)?"`"+o+"."+a+"`":"`"+o+"["+JSON.stringify(a)+"]`"}function i(o,a){const c=JSON.stringify(a);return"`Reflect.has("+o+", "+c+")`, `"+c+" in "+o+"`, or similar"}const n=new Set(["hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toString","valueOf","toLocaleString","then","catch","finally","status","displayName","_debugInfo","toJSON","$$typeof","__esModule"])}(Yr)),Yr}var ln;function df(){return ln||(ln=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"unstable_rootParams",{enumerable:!0,get:function(){return c}});const e=lf(),r=Yn(),s=ws(),i=Xn(),n=Qn(),o=hf(),a=new WeakMap;async function c(){const h=s.workAsyncStorage.getStore();if(!h)throw Object.defineProperty(new e.InvariantError("Missing workStore in unstable_rootParams"),"__NEXT_ERROR_CODE",{value:"E615",enumerable:!1,configurable:!0});const f=i.workUnitAsyncStorage.getStore();if(!f)throw Object.defineProperty(new Error(`Route ${h.route} used \`unstable_rootParams()\` in Pages Router. This API is only available within App Router.`),"__NEXT_ERROR_CODE",{value:"E641",enumerable:!1,configurable:!0});switch(f.type){case"unstable-cache":case"cache":throw Object.defineProperty(new Error(`Route ${h.route} used \`unstable_rootParams()\` inside \`"use cache"\` or \`unstable_cache\`. Support for this API inside cache scopes is planned for a future version of Next.js.`),"__NEXT_ERROR_CODE",{value:"E642",enumerable:!1,configurable:!0});case"prerender":case"prerender-client":case"prerender-ppr":case"prerender-legacy":return u(f.rootParams,h,f);default:return Promise.resolve(f.rootParams)}}function u(h,f,y){const _=f.fallbackRouteParams;if(_){let S=!1;for(const g in h)if(_.has(g)){S=!0;break}if(S)switch(y.type){case"prerender":const g=a.get(h);if(g)return g;const w=(0,n.makeHangingPromise)(y.renderSignal,"`unstable_rootParams`");return a.set(h,w),w;case"prerender-client":const k="`unstable_rootParams`";throw Object.defineProperty(new e.InvariantError(`${k} must not be used within a client component. Next.js should be preventing ${k} from being included in client components statically, but did not in this case.`),"__NEXT_ERROR_CODE",{value:"E693",enumerable:!1,configurable:!0});default:return l(h,_,f,y)}}return Promise.resolve(h)}function l(h,f,y,_){const S=a.get(h);if(S)return S;const g={...h},w=Promise.resolve(g);return a.set(h,w),Object.keys(h).forEach(k=>{o.wellKnownProperties.has(k)||(f.has(k)?Object.defineProperty(g,k,{get(){const b=(0,o.describeStringPropertyAccess)("unstable_rootParams",k);_.type==="prerender-ppr"?(0,r.postponeWithTracking)(y.route,b,_.dynamicTracking):(0,r.throwToInterruptStaticGeneration)(b,y,_)},enumerable:!0}):w[k]=h[k])}),w}}(Vr)),Vr}var hn;function ff(){return hn||(hn=1,function(t,e){const r={NextRequest:Yd().NextRequest,NextResponse:Zd().NextResponse,ImageResponse:ef().ImageResponse,userAgentFromString:Zi().userAgentFromString,userAgent:Zi().userAgent,URLPattern:rf().URLPattern,after:nf().after,connection:uf().connection,unstable_rootParams:df().unstable_rootParams};t.exports=r,e.NextRequest=r.NextRequest,e.NextResponse=r.NextResponse,e.ImageResponse=r.ImageResponse,e.userAgentFromString=r.userAgentFromString,e.userAgent=r.userAgent,e.URLPattern=r.URLPattern,e.after=r.after,e.connection=r.connection,e.unstable_rootParams=r.unstable_rootParams}(Ft,Ft.exports)),Ft.exports}var pf=ff();const mf=t=>{if(!(t instanceof Error)||!("message"in t))return!1;const{message:e}=t,r=e.toLowerCase(),s=r.includes("dynamic server usage"),i=r.includes("this page needs to bail out of prerendering");return/Route .*? needs to bail out of prerendering at this point because it used .*?./.test(e)||s||i};async function ja(){try{const{headers:t}=await Oe(async()=>{const{headers:r}=await import("./index-y19X6hXw.js");return{headers:r}},__vite__mapDeps([0,1,2,3,4,5,6]),import.meta.url),e=await t();return new pf.NextRequest("https://placeholder.com",{headers:e})}catch(t){throw t&&mf(t)?t:new Error(`Clerk: auth(), currentUser() and clerkClient(), are only supported in App Router (/app directory).
If you're using /pages, try getAuth() instead.
Original error: ${t}`)}}var gf=t=>{var r;const e=(r=eo(t))==null?void 0:r.frontendApi;return e!=null&&e.startsWith("clerk.")&&fc.some(s=>e==null?void 0:e.endsWith(s))?Hs:pc.some(s=>e==null?void 0:e.endsWith(s))?mc:gc.some(s=>e==null?void 0:e.endsWith(s))?_c:Hs},de={};const _f=de.CLERK_API_VERSION||"v1",fs=de.CLERK_SECRET_KEY||"",Ts=de.NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY||"",dn=de.CLERK_ENCRYPTION_KEY||"",yf=de.CLERK_API_URL||gf(Ts);st(de.NEXT_PUBLIC_CLERK_IS_SATELLITE);const vf=de.NEXT_PUBLIC_CLERK_SIGN_IN_URL||"",bf=de.NEXT_PUBLIC_CLERK_SIGN_UP_URL||"";st(de.NEXT_PUBLIC_CLERK_TELEMETRY_DISABLED);st(de.NEXT_PUBLIC_CLERK_TELEMETRY_DEBUG);const wf=st(de.NEXT_PUBLIC_CLERK_KEYLESS_DISABLED)||!1;function kf(t,e){return e in t?t[e]:void 0}function me(t,e){return kf(t,z.Attributes[e])||Ue(t,z.Headers[e])}function Ue(t,e){var r,s;return Sf(t)||Af(t)?t.headers.get(e):t.headers[e]||t.headers[e.toLowerCase()]||((s=(r=t.socket)==null?void 0:r._httpMessage)==null?void 0:s.getHeader(e))}function Ua(t){return!!me(t,"AuthStatus")}function Sf(t){try{const{headers:e,nextUrl:r,cookies:s}=t||{};return typeof(e==null?void 0:e.get)=="function"&&typeof(r==null?void 0:r.searchParams.get)=="function"&&typeof(s==null?void 0:s.get)=="function"}catch{return!1}}function Af(t){try{const{headers:e}=t||{};return typeof(e==null?void 0:e.get)=="function"}catch{return!1}}const Pf={NextUrl:"next-url",NextAction:"next-action",NextjsData:"x-nextjs-data"},Yt={Headers:Pf},Ef="15.4.5",xs={version:Ef},Of=xs.version.startsWith("13."),Is=Of||xs.version.startsWith("14.0"),Tf=!Is&&yc()&&!wf;var xf=Object.defineProperty,If=(t,e,r)=>e in t?xf(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Rf=(t,e,r)=>If(t,e+"",r),fn,pn,mn,gn,_n,yn,vn=((fn=typeof globalThis<"u"?globalThis:void 0)==null?void 0:fn.crypto)||((pn=typeof globalThis<"u"?globalThis:void 0)==null?void 0:pn.crypto)||((mn=typeof window<"u"?window:void 0)==null?void 0:mn.crypto)||((gn=typeof self<"u"?self:void 0)==null?void 0:gn.crypto)||((yn=(_n=typeof frames<"u"?frames:void 0)==null?void 0:_n[0])==null?void 0:yn.crypto),ps;vn?ps=t=>{let e=[];for(let r=0,s;r<t;r+=4)e.push(vn.getRandomValues(new Uint32Array(1))[0]);return new ee(e,t)}:ps=t=>{let e=[],r=s=>{let i=s,n=987654321,o=4294967295;return()=>{n=36969*(n&65535)+(n>>16)&o,i=18e3*(i&65535)+(i>>16)&o;let a=(n<<16)+i&o;return a/=4294967296,a+=.5,a*(Math.random()>.5?1:-1)}};for(let s=0,i;s<t;s+=4){let n=r((i||Math.random())*4294967296);i=n()*987654071,e.push(n()*4294967296|0)}return new ee(e,t)};var te=class{static create(...t){return new this(...t)}mixIn(t){return Object.assign(this,t)}clone(){let t=new this.constructor;return Object.assign(t,this),t}},ee=class extends te{constructor(t=[],e=t.length*4){super();let r=t;if(r instanceof ArrayBuffer&&(r=new Uint8Array(r)),(r instanceof Int8Array||r instanceof Uint8ClampedArray||r instanceof Int16Array||r instanceof Uint16Array||r instanceof Int32Array||r instanceof Uint32Array||r instanceof Float32Array||r instanceof Float64Array)&&(r=new Uint8Array(r.buffer,r.byteOffset,r.byteLength)),r instanceof Uint8Array){let s=r.byteLength,i=[];for(let n=0;n<s;n+=1)i[n>>>2]|=r[n]<<24-n%4*8;this.words=i,this.sigBytes=s}else this.words=t,this.sigBytes=e}toString(t=Cf){return t.stringify(this)}concat(t){let e=this.words,r=t.words,s=this.sigBytes,i=t.sigBytes;if(this.clamp(),s%4)for(let n=0;n<i;n+=1){let o=r[n>>>2]>>>24-n%4*8&255;e[s+n>>>2]|=o<<24-(s+n)%4*8}else for(let n=0;n<i;n+=4)e[s+n>>>2]=r[n>>>2];return this.sigBytes+=i,this}clamp(){let{words:t,sigBytes:e}=this;t[e>>>2]&=4294967295<<32-e%4*8,t.length=Math.ceil(e/4)}clone(){let t=super.clone.call(this);return t.words=this.words.slice(0),t}};Rf(ee,"random",ps);var Cf={stringify(t){let{words:e,sigBytes:r}=t,s=[];for(let i=0;i<r;i+=1){let n=e[i>>>2]>>>24-i%4*8&255;s.push((n>>>4).toString(16)),s.push((n&15).toString(16))}return s.join("")},parse(t){let e=t.length,r=[];for(let s=0;s<e;s+=2)r[s>>>3]|=parseInt(t.substr(s,2),16)<<24-s%8*4;return new ee(r,e/2)}},bn={stringify(t){let{words:e,sigBytes:r}=t,s=[];for(let i=0;i<r;i+=1){let n=e[i>>>2]>>>24-i%4*8&255;s.push(String.fromCharCode(n))}return s.join("")},parse(t){let e=t.length,r=[];for(let s=0;s<e;s+=1)r[s>>>2]|=(t.charCodeAt(s)&255)<<24-s%4*8;return new ee(r,e)}},Rs={stringify(t){try{return decodeURIComponent(escape(bn.stringify(t)))}catch{throw new Error("Malformed UTF-8 data")}},parse(t){return bn.parse(unescape(encodeURIComponent(t)))}},qa=class extends te{constructor(){super(),this._minBufferSize=0}reset(){this._data=new ee,this._nDataBytes=0}_append(t){let e=t;typeof e=="string"&&(e=Rs.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes}_process(t){let e,{_data:r,blockSize:s}=this,i=r.words,n=r.sigBytes,o=s*4,a=n/o;t?a=Math.ceil(a):a=Math.max((a|0)-this._minBufferSize,0);let c=a*s,u=Math.min(c*4,n);if(c){for(let l=0;l<c;l+=s)this._doProcessBlock(i,l);e=i.splice(0,c),r.sigBytes-=u}return new ee(e,u)}clone(){let t=super.clone.call(this);return t._data=this._data.clone(),t}},Cs=class extends qa{constructor(t){super(),this.blockSize=512/32,this.cfg=Object.assign(new te,t),this.reset()}static _createHelper(t){return(e,r)=>new t(r).finalize(e)}static _createHmacHelper(t){return(e,r)=>new jf(t,r).finalize(e)}reset(){super.reset.call(this),this._doReset()}update(t){return this._append(t),this._process(),this}finalize(t){return t&&this._append(t),this._doFinalize()}},jf=class extends te{constructor(t,e){super();let r=new t;this._hasher=r;let s=e;typeof s=="string"&&(s=Rs.parse(s));let i=r.blockSize,n=i*4;s.sigBytes>n&&(s=r.finalize(e)),s.clamp();let o=s.clone();this._oKey=o;let a=s.clone();this._iKey=a;let c=o.words,u=a.words;for(let l=0;l<i;l+=1)c[l]^=1549556828,u[l]^=909522486;o.sigBytes=n,a.sigBytes=n,this.reset()}reset(){let t=this._hasher;t.reset(),t.update(this._iKey)}update(t){return this._hasher.update(t),this}finalize(t){let e=this._hasher,r=e.finalize(t);return e.reset(),e.finalize(this._oKey.clone().concat(r))}},Uf=(t,e,r)=>{let s=[],i=0;for(let n=0;n<e;n+=1)if(n%4){let o=r[t.charCodeAt(n-1)]<<n%4*2,a=r[t.charCodeAt(n)]>>>6-n%4*2,c=o|a;s[i>>>2]|=c<<24-i%4*8,i+=1}return ee.create(s,i)},wn={stringify(t){let{words:e,sigBytes:r}=t,s=this._map;t.clamp();let i=[];for(let o=0;o<r;o+=3){let a=e[o>>>2]>>>24-o%4*8&255,c=e[o+1>>>2]>>>24-(o+1)%4*8&255,u=e[o+2>>>2]>>>24-(o+2)%4*8&255,l=a<<16|c<<8|u;for(let h=0;h<4&&o+h*.75<r;h+=1)i.push(s.charAt(l>>>6*(3-h)&63))}let n=s.charAt(64);if(n)for(;i.length%4;)i.push(n);return i.join("")},parse(t){let e=t.length,r=this._map,s=this._reverseMap;if(!s){this._reverseMap=[],s=this._reverseMap;for(let n=0;n<r.length;n+=1)s[r.charCodeAt(n)]=n}let i=r.charAt(64);if(i){let n=t.indexOf(i);n!==-1&&(e=n)}return Uf(t,e,s)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},E=[];for(let t=0;t<64;t+=1)E[t]=Math.abs(Math.sin(t+1))*4294967296|0;var V=(t,e,r,s,i,n,o)=>{let a=t+(e&r|~e&s)+i+o;return(a<<n|a>>>32-n)+e},X=(t,e,r,s,i,n,o)=>{let a=t+(e&s|r&~s)+i+o;return(a<<n|a>>>32-n)+e},Y=(t,e,r,s,i,n,o)=>{let a=t+(e^r^s)+i+o;return(a<<n|a>>>32-n)+e},Q=(t,e,r,s,i,n,o)=>{let a=t+(r^(e|~s))+i+o;return(a<<n|a>>>32-n)+e},qf=class extends Cs{_doReset(){this._hash=new ee([1732584193,4023233417,2562383102,271733878])}_doProcessBlock(t,e){let r=t;for(let P=0;P<16;P+=1){let O=e+P,C=t[O];r[O]=(C<<8|C>>>24)&16711935|(C<<24|C>>>8)&4278255360}let s=this._hash.words,i=r[e+0],n=r[e+1],o=r[e+2],a=r[e+3],c=r[e+4],u=r[e+5],l=r[e+6],h=r[e+7],f=r[e+8],y=r[e+9],_=r[e+10],S=r[e+11],g=r[e+12],w=r[e+13],k=r[e+14],b=r[e+15],m=s[0],d=s[1],v=s[2],p=s[3];m=V(m,d,v,p,i,7,E[0]),p=V(p,m,d,v,n,12,E[1]),v=V(v,p,m,d,o,17,E[2]),d=V(d,v,p,m,a,22,E[3]),m=V(m,d,v,p,c,7,E[4]),p=V(p,m,d,v,u,12,E[5]),v=V(v,p,m,d,l,17,E[6]),d=V(d,v,p,m,h,22,E[7]),m=V(m,d,v,p,f,7,E[8]),p=V(p,m,d,v,y,12,E[9]),v=V(v,p,m,d,_,17,E[10]),d=V(d,v,p,m,S,22,E[11]),m=V(m,d,v,p,g,7,E[12]),p=V(p,m,d,v,w,12,E[13]),v=V(v,p,m,d,k,17,E[14]),d=V(d,v,p,m,b,22,E[15]),m=X(m,d,v,p,n,5,E[16]),p=X(p,m,d,v,l,9,E[17]),v=X(v,p,m,d,S,14,E[18]),d=X(d,v,p,m,i,20,E[19]),m=X(m,d,v,p,u,5,E[20]),p=X(p,m,d,v,_,9,E[21]),v=X(v,p,m,d,b,14,E[22]),d=X(d,v,p,m,c,20,E[23]),m=X(m,d,v,p,y,5,E[24]),p=X(p,m,d,v,k,9,E[25]),v=X(v,p,m,d,a,14,E[26]),d=X(d,v,p,m,f,20,E[27]),m=X(m,d,v,p,w,5,E[28]),p=X(p,m,d,v,o,9,E[29]),v=X(v,p,m,d,h,14,E[30]),d=X(d,v,p,m,g,20,E[31]),m=Y(m,d,v,p,u,4,E[32]),p=Y(p,m,d,v,f,11,E[33]),v=Y(v,p,m,d,S,16,E[34]),d=Y(d,v,p,m,k,23,E[35]),m=Y(m,d,v,p,n,4,E[36]),p=Y(p,m,d,v,c,11,E[37]),v=Y(v,p,m,d,h,16,E[38]),d=Y(d,v,p,m,_,23,E[39]),m=Y(m,d,v,p,w,4,E[40]),p=Y(p,m,d,v,i,11,E[41]),v=Y(v,p,m,d,a,16,E[42]),d=Y(d,v,p,m,l,23,E[43]),m=Y(m,d,v,p,y,4,E[44]),p=Y(p,m,d,v,g,11,E[45]),v=Y(v,p,m,d,b,16,E[46]),d=Y(d,v,p,m,o,23,E[47]),m=Q(m,d,v,p,i,6,E[48]),p=Q(p,m,d,v,h,10,E[49]),v=Q(v,p,m,d,k,15,E[50]),d=Q(d,v,p,m,u,21,E[51]),m=Q(m,d,v,p,g,6,E[52]),p=Q(p,m,d,v,a,10,E[53]),v=Q(v,p,m,d,_,15,E[54]),d=Q(d,v,p,m,n,21,E[55]),m=Q(m,d,v,p,f,6,E[56]),p=Q(p,m,d,v,b,10,E[57]),v=Q(v,p,m,d,l,15,E[58]),d=Q(d,v,p,m,w,21,E[59]),m=Q(m,d,v,p,c,6,E[60]),p=Q(p,m,d,v,S,10,E[61]),v=Q(v,p,m,d,o,15,E[62]),d=Q(d,v,p,m,y,21,E[63]),s[0]=s[0]+m|0,s[1]=s[1]+d|0,s[2]=s[2]+v|0,s[3]=s[3]+p|0}_doFinalize(){let t=this._data,e=t.words,r=this._nDataBytes*8,s=t.sigBytes*8;e[s>>>5]|=128<<24-s%32;let i=Math.floor(r/4294967296),n=r;e[(s+64>>>9<<4)+15]=(i<<8|i>>>24)&16711935|(i<<24|i>>>8)&4278255360,e[(s+64>>>9<<4)+14]=(n<<8|n>>>24)&16711935|(n<<24|n>>>8)&4278255360,t.sigBytes=(e.length+1)*4,this._process();let o=this._hash,a=o.words;for(let c=0;c<4;c+=1){let u=a[c];a[c]=(u<<8|u>>>24)&16711935|(u<<24|u>>>8)&4278255360}return o}clone(){let t=super.clone.call(this);return t._hash=this._hash.clone(),t}},kn=class extends te{constructor(t){super(),this.cfg=Object.assign(new te,{keySize:128/32,hasher:qf,iterations:1},t)}compute(t,e){let r,{cfg:s}=this,i=s.hasher.create(),n=ee.create(),o=n.words,{keySize:a,iterations:c}=s;for(;o.length<a;){r&&i.update(r),r=i.update(t).finalize(e),i.reset();for(let u=1;u<c;u+=1)r=i.finalize(r),i.reset();n.concat(r)}return n.sigBytes=a*4,n}},Et=class extends qa{constructor(t,e,r){super(),this.cfg=Object.assign(new te,r),this._xformMode=t,this._key=e,this.reset()}static createEncryptor(t,e){return this.create(this._ENC_XFORM_MODE,t,e)}static createDecryptor(t,e){return this.create(this._DEC_XFORM_MODE,t,e)}static _createHelper(t){let e=r=>typeof r=="string"?$a:et;return{encrypt(r,s,i){return e(s).encrypt(t,r,s,i)},decrypt(r,s,i){return e(s).decrypt(t,r,s,i)}}}reset(){super.reset.call(this),this._doReset()}process(t){return this._append(t),this._process()}finalize(t){return t&&this._append(t),this._doFinalize()}};Et._ENC_XFORM_MODE=1;Et._DEC_XFORM_MODE=2;Et.keySize=128/32;Et.ivSize=128/32;var Nf=class extends te{constructor(t,e){super(),this._cipher=t,this._iv=e}static createEncryptor(t,e){return this.Encryptor.create(t,e)}static createDecryptor(t,e){return this.Decryptor.create(t,e)}};function Na(t,e,r){let s=t,i,n=this._iv;n?(i=n,this._iv=void 0):i=this._prevBlock;for(let o=0;o<r;o+=1)s[e+o]^=i[o]}var St=class extends Nf{};St.Encryptor=class extends St{processBlock(t,e){let r=this._cipher,{blockSize:s}=r;Na.call(this,t,e,s),r.encryptBlock(t,e),this._prevBlock=t.slice(e,e+s)}};St.Decryptor=class extends St{processBlock(t,e){let r=this._cipher,{blockSize:s}=r,i=t.slice(e,e+s);r.decryptBlock(t,e),Na.call(this,t,e,s),this._prevBlock=i}};var Lf={pad(t,e){let r=e*4,s=r-t.sigBytes%r,i=s<<24|s<<16|s<<8|s,n=[];for(let a=0;a<s;a+=4)n.push(i);let o=ee.create(n,s);t.concat(o)},unpad(t){let e=t,r=e.words[e.sigBytes-1>>>2]&255;e.sigBytes-=r}},La=class extends Et{constructor(t,e,r){super(t,e,Object.assign({mode:St,padding:Lf},r)),this.blockSize=128/32}reset(){let t;super.reset.call(this);let{cfg:e}=this,{iv:r,mode:s}=e;this._xformMode===this.constructor._ENC_XFORM_MODE?t=s.createEncryptor:(t=s.createDecryptor,this._minBufferSize=1),this._mode=t.call(s,this,r&&r.words),this._mode.__creator=t}_doProcessBlock(t,e){this._mode.processBlock(t,e)}_doFinalize(){let t,{padding:e}=this.cfg;return this._xformMode===this.constructor._ENC_XFORM_MODE?(e.pad(this._data,this.blockSize),t=this._process(!0)):(t=this._process(!0),e.unpad(t)),t}},js=class extends te{constructor(t){super(),this.mixIn(t)}toString(t){return(t||this.formatter).stringify(this)}},$f={stringify(t){let e,{ciphertext:r,salt:s}=t;return s?e=ee.create([1398893684,1701076831]).concat(s).concat(r):e=r,e.toString(wn)},parse(t){let e,r=wn.parse(t),s=r.words;return s[0]===1398893684&&s[1]===1701076831&&(e=ee.create(s.slice(2,4)),s.splice(0,4),r.sigBytes-=16),js.create({ciphertext:r,salt:e})}},et=class extends te{static encrypt(t,e,r,s){let i=Object.assign(new te,this.cfg,s),n=t.createEncryptor(r,i),o=n.finalize(e),a=n.cfg;return js.create({ciphertext:o,key:r,iv:a.iv,algorithm:t,mode:a.mode,padding:a.padding,blockSize:n.blockSize,formatter:i.format})}static decrypt(t,e,r,s){let i=e,n=Object.assign(new te,this.cfg,s);return i=this._parse(i,n.format),t.createDecryptor(r,n).finalize(i.ciphertext)}static _parse(t,e){return typeof t=="string"?e.parse(t,this):t}};et.cfg=Object.assign(new te,{format:$f});var Df={execute(t,e,r,s,i){let n=s;n||(n=ee.random(64/8));let o;i?o=kn.create({keySize:e+r,hasher:i}).compute(t,n):o=kn.create({keySize:e+r}).compute(t,n);let a=ee.create(o.words.slice(e),r*4);return o.sigBytes=e*4,js.create({key:o,iv:a,salt:n})}},$a=class extends et{static encrypt(t,e,r,s){let i=Object.assign(new te,this.cfg,s),n=i.kdf.execute(r,t.keySize,t.ivSize,i.salt,i.hasher);i.iv=n.iv;let o=et.encrypt.call(this,t,e,n.key,i);return o.mixIn(n),o}static decrypt(t,e,r,s){let i=e,n=Object.assign(new te,this.cfg,s);i=this._parse(i,n.format);let o=n.kdf.execute(r,t.keySize,t.ivSize,i.salt,n.hasher);return n.iv=o.iv,et.decrypt.call(this,t,i,o.key,n)}};$a.cfg=Object.assign(et.cfg,{kdf:Df});var ne=[],Da=[],Ma=[],Ba=[],za=[],Fa=[],ms=[],gs=[],_s=[],ys=[],le=[];for(let t=0;t<256;t+=1)t<128?le[t]=t<<1:le[t]=t<<1^283;var ce=0,_e=0;for(let t=0;t<256;t+=1){let e=_e^_e<<1^_e<<2^_e<<3^_e<<4;e=e>>>8^e&255^99,ne[ce]=e,Da[e]=ce;let r=le[ce],s=le[r],i=le[s],n=le[e]*257^e*16843008;Ma[ce]=n<<24|n>>>8,Ba[ce]=n<<16|n>>>16,za[ce]=n<<8|n>>>24,Fa[ce]=n,n=i*16843009^s*65537^r*257^ce*16843008,ms[e]=n<<24|n>>>8,gs[e]=n<<16|n>>>16,_s[e]=n<<8|n>>>24,ys[e]=n,ce?(ce=r^le[le[le[i^r]]],_e^=le[le[_e]]):(_e=1,ce=_e)}var Mf=[0,1,2,4,8,16,32,64,128,27,54],Ja=class extends La{_doReset(){let t;if(this._nRounds&&this._keyPriorReset===this._key)return;this._keyPriorReset=this._key;let e=this._keyPriorReset,r=e.words,s=e.sigBytes/4;this._nRounds=s+6;let i=(this._nRounds+1)*4;this._keySchedule=[];let n=this._keySchedule;for(let a=0;a<i;a+=1)a<s?n[a]=r[a]:(t=n[a-1],a%s?s>6&&a%s===4&&(t=ne[t>>>24]<<24|ne[t>>>16&255]<<16|ne[t>>>8&255]<<8|ne[t&255]):(t=t<<8|t>>>24,t=ne[t>>>24]<<24|ne[t>>>16&255]<<16|ne[t>>>8&255]<<8|ne[t&255],t^=Mf[a/s|0]<<24),n[a]=n[a-s]^t);this._invKeySchedule=[];let o=this._invKeySchedule;for(let a=0;a<i;a+=1){let c=i-a;a%4?t=n[c]:t=n[c-4],a<4||c<=4?o[a]=t:o[a]=ms[ne[t>>>24]]^gs[ne[t>>>16&255]]^_s[ne[t>>>8&255]]^ys[ne[t&255]]}}encryptBlock(t,e){this._doCryptBlock(t,e,this._keySchedule,Ma,Ba,za,Fa,ne)}decryptBlock(t,e){let r=t,s=r[e+1];r[e+1]=r[e+3],r[e+3]=s,this._doCryptBlock(r,e,this._invKeySchedule,ms,gs,_s,ys,Da),s=r[e+1],r[e+1]=r[e+3],r[e+3]=s}_doCryptBlock(t,e,r,s,i,n,o,a){let c=t,u=this._nRounds,l=c[e]^r[0],h=c[e+1]^r[1],f=c[e+2]^r[2],y=c[e+3]^r[3],_=4;for(let b=1;b<u;b+=1){let m=s[l>>>24]^i[h>>>16&255]^n[f>>>8&255]^o[y&255]^r[_];_+=1;let d=s[h>>>24]^i[f>>>16&255]^n[y>>>8&255]^o[l&255]^r[_];_+=1;let v=s[f>>>24]^i[y>>>16&255]^n[l>>>8&255]^o[h&255]^r[_];_+=1;let p=s[y>>>24]^i[l>>>16&255]^n[h>>>8&255]^o[f&255]^r[_];_+=1,l=m,h=d,f=v,y=p}let S=(a[l>>>24]<<24|a[h>>>16&255]<<16|a[f>>>8&255]<<8|a[y&255])^r[_];_+=1;let g=(a[h>>>24]<<24|a[f>>>16&255]<<16|a[y>>>8&255]<<8|a[l&255])^r[_];_+=1;let w=(a[f>>>24]<<24|a[y>>>16&255]<<16|a[l>>>8&255]<<8|a[h&255])^r[_];_+=1;let k=(a[y>>>24]<<24|a[l>>>16&255]<<16|a[h>>>8&255]<<8|a[f&255])^r[_];_+=1,c[e]=S,c[e+1]=g,c[e+2]=w,c[e+3]=k}};Ja.keySize=256/32;var Bf=La._createHelper(Ja),Re=[],zf=class extends Cs{_doReset(){this._hash=new ee([1732584193,4023233417,2562383102,271733878,3285377520])}_doProcessBlock(t,e){let r=this._hash.words,s=r[0],i=r[1],n=r[2],o=r[3],a=r[4];for(let c=0;c<80;c+=1){if(c<16)Re[c]=t[e+c]|0;else{let l=Re[c-3]^Re[c-8]^Re[c-14]^Re[c-16];Re[c]=l<<1|l>>>31}let u=(s<<5|s>>>27)+a+Re[c];c<20?u+=(i&n|~i&o)+1518500249:c<40?u+=(i^n^o)+1859775393:c<60?u+=(i&n|i&o|n&o)-1894007588:u+=(i^n^o)-899497514,a=o,o=n,n=i<<30|i>>>2,i=s,s=u}r[0]=r[0]+s|0,r[1]=r[1]+i|0,r[2]=r[2]+n|0,r[3]=r[3]+o|0,r[4]=r[4]+a|0}_doFinalize(){let t=this._data,e=t.words,r=this._nDataBytes*8,s=t.sigBytes*8;return e[s>>>5]|=128<<24-s%32,e[(s+64>>>9<<4)+14]=Math.floor(r/4294967296),e[(s+64>>>9<<4)+15]=r,t.sigBytes=e.length*4,this._process(),this._hash}clone(){let t=super.clone.call(this);return t._hash=this._hash.clone(),t}},Ff=Cs._createHmacHelper(zf);const Jf=()=>Ha("getAuth"),Ha=(t="auth",e)=>`Clerk: ${t}() was called but Clerk can't detect usage of clerkMiddleware(). Please ensure the following:
- ${e?[...e,""].join(`
- `):" "}clerkMiddleware() is used in your Next.js Middleware.
- Your Middleware matcher is configured to match this route or page.
- If you are using the src directory, make sure the Middleware file is inside of it.

For more details, see https://clerk.com/err/auth-middleware
`,Sn="Clerk: Unable to verify request, this usually means the Clerk middleware did not run. Ensure Clerk's middleware is properly integrated and matches the current route. For more information, see: https://clerk.com/docs/references/nextjs/clerk-middleware. (code=auth_signature_invalid)",Hf="Clerk: Unable to decrypt request data, this usually means the encryption key is invalid. Ensure the encryption key is properly set. For more information, see: https://clerk.com/docs/references/nextjs/clerk-middleware#dynamic-keys. (code=encryption_key_invalid)",Kf=`Clerk: Unable to decrypt request data.

Refresh the page if your .env file was just updated. If the issue persists, ensure the encryption key is valid and properly set.

For more information, see: https://clerk.com/docs/references/nextjs/clerk-middleware#dynamic-keys. (code=encryption_key_invalid)`;function vs(t,e){if(!Ua(t))throw new Error(e)}function Gf(t,e){return Ff(t,e).toString()}function Wf(t,e,r){if(!r)throw new Error(Sn);if(Gf(t,e)!==r)throw new Error(Sn)}const An="clerk_keyless_dummy_key";function Us(t){if(!t)return{};const e=to()?dn||fs:dn||fs||An;try{return En(t,e)}catch{if(Tf)try{return En(t,An)}catch{Pn()}Pn()}}function Pn(){throw to()?new Error(Hf):new Error(Kf)}function En(t,e){const s=Bf.decrypt(t,e).toString(Rs);return JSON.parse(s)}const On=t=>{if(!t||typeof t!="string")return t;try{return(t||"").replace(/^(sk_(live|test)_)(.+?)(.{3})$/,"$1*********$4")}catch{return""}},Vf=t=>(Array.isArray(t)?t:[t]).map(e=>{if(typeof e=="string")return On(e);const r=Object.fromEntries(Object.entries(e).map(([s,i])=>[s,On(i)]));return JSON.stringify(r,null,2)}).join(", ");var Xf={};const Yf=(t,e)=>()=>{const r=[];let s=!1;return{enable:()=>{s=!0},debug:(...i)=>{s&&r.push(i.map(n=>typeof n=="function"?n():n))},commit:()=>{if(s){console.log(Qf(t));for(const i of r){let n=e(i);n=n.split(`
`).map(o=>`  ${o}`).join(`
`),Xf.VERCEL&&(n=ep(n,4096)),console.log(n)}console.log(Zf(t))}}}},Ka=(t,e)=>(...r)=>{const i=(typeof t=="string"?Yf(t,Vf):t)(),n=e(i);try{const o=n(...r);return typeof o=="object"&&"then"in o&&typeof o.then=="function"?o.then(a=>(i.commit(),a)).catch(a=>{throw i.commit(),a}):(i.commit(),o)}catch(o){throw i.commit(),o}};function Qf(t){return`[clerk debug start: ${t}]`}function Zf(t){return`[clerk debug end: ${t}] (@clerk/nextjs=6.31.1,next=${xs.version},timestamp=${Math.round(new Date().getTime()/1e3)})`}function ep(t,e){const r=new TextEncoder,s=new TextDecoder("utf-8"),n=r.encode(t).slice(0,e);return s.decode(n).replace(/\uFFFD/g,"")}var tp=Kd(Pl);const Ga=t=>({authStatus:me(t,"AuthStatus"),authToken:me(t,"AuthToken"),authMessage:me(t,"AuthMessage"),authReason:me(t,"AuthReason"),authSignature:me(t,"AuthSignature")}),Wa=(t,e,r=!0)=>{const s=Ue(t,z.Headers.ClerkRequestData),i=Us(s);return{secretKey:(e==null?void 0:e.secretKey)||i.secretKey||fs,publishableKey:i.publishableKey||Ts,apiUrl:yf,apiVersion:_f,authStatus:me(t,"AuthStatus"),authMessage:me(t,"AuthMessage"),authReason:me(t,"AuthReason"),treatPendingAsSignedOut:r}},Va=(t,{treatPendingAsSignedOut:e=!0,...r}={})=>{var s,i;const{authStatus:n,authMessage:o,authReason:a,authToken:c,authSignature:u}=Ga(t);(s=r.logger)==null||s.debug("headers",{authStatus:n,authMessage:o,authReason:a});const l=Wa(t,r,e);if(!Vt(J.SessionToken,r.acceptsToken||J.SessionToken))return Xt(l);let h;if(!n||n!==Fd.SignedIn)h=Xt(l);else{Wf(c,l.secretKey,u);const f=tp(c);return(i=r.logger)==null||i.debug("jwt",f.raw),Bd(f,l)}return h},rp=(t,e={})=>{var r,s;const{authStatus:i,authMessage:n,authReason:o}=Ga(t);(r=e.logger)==null||r.debug("headers",{authStatus:i,authMessage:n,authReason:o});const a=Ue(t,z.Headers.ClerkRequestData),c=Us(a),u=(s=Ue(t,z.Headers.Authorization))==null?void 0:s.replace("Bearer ",""),l=e.acceptsToken||J.SessionToken,h=Wa(t,e),f=sp(u,c.machineAuthObject,l,h);return f||(u&&Array.isArray(l)&&!l.includes(J.SessionToken)?Ia():Va(t,e))},sp=(t,e,r,s)=>{const i=t&&Nd(t),n=r===J.SessionToken||Array.isArray(r)&&r.length===1&&r[0]===J.SessionToken;if(i&&e&&!n){const o=zd({authObject:{...e,debug:()=>s},acceptsToken:r});return{...o,getToken:()=>o.isAuthenticated?Promise.resolve(t):Promise.resolve(null),has:()=>!1}}return null},ip=({debugLoggerName:t,noAuthStatusMessage:e})=>Ka(t,r=>async(s,i)=>{if(st(Ue(s,z.Headers.EnableDebug))&&r.enable(),!Ua(s)){Is&&vs(s,e);const o=await Oe(()=>import("./middleware-location-bSkBqE4o.js"),[],import.meta.url).then(a=>a.suggestMiddlewareLocation()).catch(()=>{});if(o)throw new Error(o);vs(s,e)}return((o,a={})=>rp(o,{...a,logger:r,acceptsToken:a==null?void 0:a.acceptsToken}))(s,{...i,logger:r,acceptsToken:i==null?void 0:i.acceptsToken})}),np=({debugLoggerName:t,noAuthStatusMessage:e})=>Ka(t,r=>(s,i)=>(st(Ue(s,z.Headers.EnableDebug))&&r.enable(),vs(s,e),((o,a={})=>Va(o,{...a,logger:r,acceptsToken:a==null?void 0:a.acceptsToken}))(s,{...i,logger:r,acceptsToken:i==null?void 0:i.acceptsToken})));np({debugLoggerName:"getAuth()",noAuthStatusMessage:Jf()});const Xa={NOT_FOUND:404,FORBIDDEN:403,UNAUTHORIZED:401};new Set(Object.values(Xa));const Tn="NEXT_HTTP_ERROR_FALLBACK";function op(){const t=new Error(Tn);throw t.digest=`${Tn};${Xa.UNAUTHORIZED}`,t}function ap(t){return"__nextPatched"in t&&t.__nextPatched===!0}function cp(t){const{redirectToSignIn:e,authObject:r,redirect:s,notFound:i,request:n,unauthorized:o}=t;return async(...a)=>{var c,u,l,h,f,y;const _=up(a[0]),S=((c=a[0])==null?void 0:c.unauthenticatedUrl)||((u=a[1])==null?void 0:u.unauthenticatedUrl),g=((l=a[0])==null?void 0:l.unauthorizedUrl)||((h=a[1])==null?void 0:h.unauthorizedUrl),w=((f=a[0])==null?void 0:f.token)||((y=a[1])==null?void 0:y.token)||J.SessionToken,k=()=>S?s(S):hp(n)?e():i(),b=()=>r.tokenType!==J.SessionToken?o():g?s(g):i();return Vt(r.tokenType,w)?r.tokenType!==J.SessionToken?r.isAuthenticated?r:b():r.sessionStatus==="pending"||!r.userId?k():_?typeof _=="function"?_(r.has)?r:b():r.has(_)?r:b():r:b()}}const up=t=>{if(t&&!(t.unauthenticatedUrl||t.unauthorizedUrl||t.token)&&!(Object.keys(t).length===1&&"token"in t))return t},lp=t=>{var e,r;return!!t.headers.get(Yt.Headers.NextUrl)&&(((e=t.headers.get(z.Headers.Accept))==null?void 0:e.includes("text/x-component"))||((r=t.headers.get(z.Headers.ContentType))==null?void 0:r.includes("multipart/form-data"))||!!t.headers.get(Yt.Headers.NextAction))},hp=t=>{var e;return t.headers.get(z.Headers.SecFetchDest)==="document"||t.headers.get(z.Headers.SecFetchDest)==="iframe"||((e=t.headers.get(z.Headers.Accept))==null?void 0:e.includes("text/html"))||dp(t)||pp(t)},dp=t=>!!t.headers.get(Yt.Headers.NextUrl)&&!lp(t)||fp(),fp=()=>{const t=globalThis.fetch;if(!ap(t))return!1;const{page:e,pagePath:r}=t.__nextGetStaticStore().getStore()||{};return!!(r||e)},pp=t=>!!t.headers.get(Yt.Headers.NextjsData),Qt=async t=>{var e;require("server-only");const r=await ja(),i=await ip({debugLoggerName:"auth()",noAuthStatusMessage:Ha("auth",await(async()=>{if(Is)return[];try{return[`Your Middleware exists at ./${await Oe(()=>import("./middleware-location-bSkBqE4o.js"),[],import.meta.url).then(l=>l.hasSrcAppDir())?"src/":""}middleware.(ts|js)`]}catch{return[]}})())})(r,{treatPendingAsSignedOut:t==null?void 0:t.treatPendingAsSignedOut,acceptsToken:(e=t==null?void 0:t.acceptsToken)!=null?e:J.SessionToken}),n=me(r,"ClerkUrl"),o=(...u)=>{const{returnBackUrl:l}=u[0]||{},h=Hd(r),f=h.clerkUrl.searchParams.get(z.QueryParameters.DevBrowser)||h.cookies.get(z.Cookies.DevBrowser),y=Ue(r,z.Headers.ClerkRequestData),_=Us(y);return[Fl({redirectAdapter:Zn,devBrowserToken:f,baseUrl:h.clerkUrl.toString(),publishableKey:_.publishableKey||Ts,signInUrl:_.signInUrl||vf,signUpUrl:_.signUpUrl||bf,sessionStatus:i.tokenType===J.SessionToken?i.sessionStatus:null}),l===null?"":l||(n==null?void 0:n.toString())]},a=(u={})=>{const[l,h]=o(u);return l.redirectToSignIn({returnBackUrl:h})},c=(u={})=>{const[l,h]=o(u);return l.redirectToSignUp({returnBackUrl:h})};return i.tokenType===J.SessionToken?Object.assign(i,{redirectToSignIn:a,redirectToSignUp:c}):i};Qt.protect=async(...t)=>{var e,r;require("server-only");const s=await ja(),i=((e=t==null?void 0:t[0])==null?void 0:e.token)||((r=t==null?void 0:t[1])==null?void 0:r.token)||J.SessionToken,n=await Qt({acceptsToken:i});return cp({request:s,authObject:n,redirectToSignIn:n.redirectToSignIn,notFound:oc,redirect:Zn,unauthorized:op})(...t)};const xn=Qr.NEXT_PUBLIC_SUPABASE_URL,In=Qr.NEXT_PUBLIC_SUPABASE_PUBLISHABLE_DEFAULT_KEY||Qr.NEXT_PUBLIC_SUPABASE_ANON_KEY;function mp(){return!xn||!In?null:_l(xn,In,{auth:{persistSession:!1},global:{fetch:void 0},async accessToken(){try{const{getToken:e}=await Qt();return await e()??null}catch{return null}}})}const{fn:er}=__STORYBOOK_MODULE_TEST__;er().mockName("next/cache::revalidatePath");er().mockName("next/cache::revalidateTag");er().mockName("next/cache::unstable_cache").mockImplementation(t=>t);var gp=er().mockName("next/cache::unstable_noStore");async function _p(t,e){gp();const{userId:r}=await Qt();if(!r)throw new Error("Unauthorized");const s=mp();if(!s)throw new Error("Failed to create Supabase client");try{const{data:i,error:n}=await s.from("creator_profiles").update({...e,updated_at:new Date().toISOString()}).eq("id",t).eq("user_id",r).select("*").single();if(n)throw n;if(!i)throw new Error("Profile not found or not updated");return i}catch(i){throw i}}function bs({artist:t,onUpdate:e}){const[r,s]=lr.useState(!1),[i,n]=lr.useState(t.marketing_opt_out||!1),[o,a]=lr.useState(!1),c=async u=>{try{s(!0),n(u),await _p(t.id,{marketing_opt_out:u});const l={...t,marketing_opt_out:u};e(l),a(!0),setTimeout(()=>a(!1),3e3)}catch{n(!u)}finally{s(!1)}};return B.jsxs("div",{className:"space-y-6",children:[B.jsxs("div",{children:[B.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Account Settings"}),B.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-6",children:"Manage your account preferences and privacy settings."})]}),B.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-6",children:[B.jsx("h3",{className:"text-base font-medium text-gray-900 dark:text-white mb-4",children:"Marketing & Promotion"}),B.jsxs("div",{className:"space-y-4",children:[B.jsxs("div",{className:"flex items-start space-x-3",children:[B.jsx("div",{className:"flex items-center h-5",children:B.jsx("input",{id:"marketing-opt-out",type:"checkbox",checked:i,onChange:u=>c(u.target.checked),disabled:r,"aria-label":"Opt out of marketing materials",className:"w-5 h-5 text-indigo-600 bg-gray-100 border-gray-300 rounded focus:ring-indigo-500 dark:focus:ring-indigo-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600 disabled:opacity-50"})}),B.jsxs("div",{className:"text-sm",children:[B.jsx("label",{htmlFor:"marketing-opt-out",className:"font-medium text-gray-700 dark:text-gray-300",children:"Opt out of marketing materials"}),B.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-1",children:"When enabled, your profile will not be featured on our homepage or used in marketing materials. You can change this setting at any time."})]})]}),o&&B.jsxs("div",{className:"flex items-center space-x-2 text-sm text-green-600 dark:text-green-400",children:[B.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:B.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),B.jsx("span",{children:"Settings updated successfully"})]})]})]}),B.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800/50 border border-gray-200 dark:border-gray-700 rounded-lg p-6",children:[B.jsx("h3",{className:"text-base font-medium text-gray-900 dark:text-white mb-2",children:"Additional Settings"}),B.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"More account and privacy settings will be available here in the future."})]})]})}try{bs.displayName="SettingsForm",bs.__docgenInfo={description:"",displayName:"SettingsForm",props:{artist:{defaultValue:null,description:"",name:"artist",required:!0,type:{name:"Artist"}},onUpdate:{defaultValue:null,description:"",name:"onUpdate",required:!0,type:{name:"(artist: Artist) => void"}}}}}catch{}const ae={id:"artist-123",owner_user_id:"user-123",handle:"artisthandle",spotify_id:"spotify-123",name:"Artist Name",image_url:"https://placekitten.com/200/200",tagline:"Artist tagline",theme:{primaryColor:"#6366f1",backgroundColor:"#ffffff"},settings:{hide_branding:!1},spotify_url:"https://spotify.com/artist/123",apple_music_url:"https://music.apple.com/artist/123",youtube_url:"https://youtube.com/channel/123",published:!0,is_verified:!0,is_featured:!1,marketing_opt_out:!1,created_at:"2023-01-01T00:00:00Z"},yp={title:"Dashboard/Organisms/SettingsForm",component:bs,parameters:{layout:"padded",backgrounds:{default:"light",values:[{name:"light",value:"#f8fafc"},{name:"dark",value:"#1e293b"}]}},tags:["autodocs"],decorators:[t=>B.jsx("div",{className:"max-w-3xl mx-auto",children:B.jsx(t,{})})],argTypes:{artist:{control:"object",description:"Artist data object"},onUpdate:{action:"onUpdate",description:"Callback when artist data is updated"}}},pt={args:{artist:ae,onUpdate:t=>console.log("Artist updated:",t)},parameters:{mockData:[{url:"/api/updateCreatorProfile",method:"POST",status:200,response:{success:!0,data:{...ae,marketing_opt_out:!0}},delay:500}]}},mt={args:{artist:{...ae,marketing_opt_out:!0},onUpdate:t=>console.log("Artist updated:",t)},parameters:{mockData:[{url:"/api/updateCreatorProfile",method:"POST",status:200,response:{success:!0,data:{...ae,marketing_opt_out:!1}},delay:500}]}},gt={args:{artist:ae,onUpdate:t=>console.log("Artist updated:",t)},parameters:{mockData:[{url:"/api/updateCreatorProfile",method:"POST",status:200,response:{success:!0,data:{...ae,marketing_opt_out:!0}},delay:2e3}]},play:async({canvasElement:t})=>{const e=t.querySelector("#marketing-opt-out");e&&e.click()}},_t={args:{artist:ae,onUpdate:t=>console.log("Artist updated:",t)},parameters:{mockData:[{url:"/api/updateCreatorProfile",method:"POST",status:200,response:{success:!0,data:{...ae,marketing_opt_out:!0}},delay:500}]},play:async({canvasElement:t})=>{const e=t.querySelector("#marketing-opt-out");e&&e.click()}},yt={args:{artist:ae,onUpdate:t=>console.log("Artist updated:",t)},parameters:{backgrounds:{default:"dark"},mockData:[{url:"/api/updateCreatorProfile",method:"POST",status:200,response:{success:!0,data:{...ae,marketing_opt_out:!0}},delay:500}]},decorators:[t=>B.jsx("div",{className:"dark max-w-3xl mx-auto",children:B.jsx(t,{})})]},vt={args:{artist:ae,onUpdate:t=>console.log("Artist updated:",t)},parameters:{viewport:{defaultViewport:"mobile1"},mockData:[{url:"/api/updateCreatorProfile",method:"POST",status:200,response:{success:!0,data:{...ae,marketing_opt_out:!0}},delay:500}]}};var Rn,Cn,jn;pt.parameters={...pt.parameters,docs:{...(Rn=pt.parameters)==null?void 0:Rn.docs,source:{originalSource:`{
  args: {
    artist: mockArtist,
    onUpdate: updatedArtist => console.log('Artist updated:', updatedArtist)
  },
  parameters: {
    mockData: [{
      url: '/api/updateCreatorProfile',
      method: 'POST',
      status: 200,
      response: {
        success: true,
        data: {
          ...mockArtist,
          marketing_opt_out: true
        }
      },
      delay: 500
    }]
  }
}`,...(jn=(Cn=pt.parameters)==null?void 0:Cn.docs)==null?void 0:jn.source}}};var Un,qn,Nn;mt.parameters={...mt.parameters,docs:{...(Un=mt.parameters)==null?void 0:Un.docs,source:{originalSource:`{
  args: {
    artist: {
      ...mockArtist,
      marketing_opt_out: true
    },
    onUpdate: updatedArtist => console.log('Artist updated:', updatedArtist)
  },
  parameters: {
    mockData: [{
      url: '/api/updateCreatorProfile',
      method: 'POST',
      status: 200,
      response: {
        success: true,
        data: {
          ...mockArtist,
          marketing_opt_out: false
        }
      },
      delay: 500
    }]
  }
}`,...(Nn=(qn=mt.parameters)==null?void 0:qn.docs)==null?void 0:Nn.source}}};var Ln,$n,Dn;gt.parameters={...gt.parameters,docs:{...(Ln=gt.parameters)==null?void 0:Ln.docs,source:{originalSource:`{
  args: {
    artist: mockArtist,
    onUpdate: updatedArtist => console.log('Artist updated:', updatedArtist)
  },
  parameters: {
    mockData: [{
      url: '/api/updateCreatorProfile',
      method: 'POST',
      status: 200,
      response: {
        success: true,
        data: {
          ...mockArtist,
          marketing_opt_out: true
        }
      },
      delay: 2000 // Long delay to show loading state
    }]
  },
  play: async ({
    canvasElement
  }) => {
    // Find the checkbox and click it to trigger loading state
    const checkbox = canvasElement.querySelector('#marketing-opt-out') as HTMLInputElement;
    if (checkbox) {
      checkbox.click();
    }
  }
}`,...(Dn=($n=gt.parameters)==null?void 0:$n.docs)==null?void 0:Dn.source}}};var Mn,Bn,zn;_t.parameters={..._t.parameters,docs:{...(Mn=_t.parameters)==null?void 0:Mn.docs,source:{originalSource:`{
  args: {
    artist: mockArtist,
    onUpdate: updatedArtist => console.log('Artist updated:', updatedArtist)
  },
  parameters: {
    mockData: [{
      url: '/api/updateCreatorProfile',
      method: 'POST',
      status: 200,
      response: {
        success: true,
        data: {
          ...mockArtist,
          marketing_opt_out: true
        }
      },
      delay: 500
    }]
  },
  play: async ({
    canvasElement
  }) => {
    // Find the checkbox and click it to trigger success message
    const checkbox = canvasElement.querySelector('#marketing-opt-out') as HTMLInputElement;
    if (checkbox) {
      checkbox.click();
      // Success message will show automatically after the mock update completes
    }
  }
}`,...(zn=(Bn=_t.parameters)==null?void 0:Bn.docs)==null?void 0:zn.source}}};var Fn,Jn,Hn;yt.parameters={...yt.parameters,docs:{...(Fn=yt.parameters)==null?void 0:Fn.docs,source:{originalSource:`{
  args: {
    artist: mockArtist,
    onUpdate: updatedArtist => console.log('Artist updated:', updatedArtist)
  },
  parameters: {
    backgrounds: {
      default: 'dark'
    },
    mockData: [{
      url: '/api/updateCreatorProfile',
      method: 'POST',
      status: 200,
      response: {
        success: true,
        data: {
          ...mockArtist,
          marketing_opt_out: true
        }
      },
      delay: 500
    }]
  },
  decorators: [Story => <div className="dark max-w-3xl mx-auto">
        <Story />
      </div>]
}`,...(Hn=(Jn=yt.parameters)==null?void 0:Jn.docs)==null?void 0:Hn.source}}};var Kn,Gn,Wn;vt.parameters={...vt.parameters,docs:{...(Kn=vt.parameters)==null?void 0:Kn.docs,source:{originalSource:`{
  args: {
    artist: mockArtist,
    onUpdate: updatedArtist => console.log('Artist updated:', updatedArtist)
  },
  parameters: {
    viewport: {
      defaultViewport: 'mobile1'
    },
    mockData: [{
      url: '/api/updateCreatorProfile',
      method: 'POST',
      status: 200,
      response: {
        success: true,
        data: {
          ...mockArtist,
          marketing_opt_out: true
        }
      },
      delay: 500
    }]
  }
}`,...(Wn=(Gn=vt.parameters)==null?void 0:Gn.docs)==null?void 0:Wn.source}}};const vp=["Default","MarketingOptedOut","Loading","SuccessMessage","DarkTheme","MobileView"],Ip=Object.freeze(Object.defineProperty({__proto__:null,DarkTheme:yt,Default:pt,Loading:gt,MarketingOptedOut:mt,MobileView:vt,SuccessMessage:_t,__namedExportsOrder:vp,default:yp},Symbol.toStringTag,{value:"Module"}));export{Ip as S,Qd as a,cf as b,Xd as c,lf as r};
