import{j as s}from"./jsx-runtime-nlD-EgCR.js";import{n as x}from"./image-DeoQVfv0.js";import{r as g}from"./iframe-BD9qcwu-.js";import{c as M}from"./clsx-B-dksMZM.js";import{c as C}from"./utils-C1Vhx1Sh.js";const Y={sm:"h-8 w-8",md:"h-12 w-12",lg:"h-16 w-16",xl:"h-24 w-24","2xl":"h-32 w-32"},J={circle:"rounded-full",square:"rounded-none",rounded:"rounded-lg"},d=g.forwardRef(({size:A="md",shape:r="circle",className:e,children:t},a)=>s.jsx("div",{ref:a,className:M("flex items-center justify-center bg-linear-to-br from-gray-200 to-gray-300 dark:from-gray-700 dark:to-gray-800",Y[A],J[r],e),children:t||s.jsx("svg",{className:"h-1/2 w-1/2 text-gray-400 dark:text-gray-500",fill:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"})})}));d.displayName="PlaceholderImage";try{d.displayName="PlaceholderImage",d.__docgenInfo={description:"",displayName:"PlaceholderImage",props:{size:{defaultValue:{value:"md"},description:"",name:"size",required:!1,type:{name:"enum",value:[{value:"undefined"},{value:'"sm"'},{value:'"md"'},{value:'"lg"'},{value:'"xl"'},{value:'"2xl"'}]}},shape:{defaultValue:{value:"circle"},description:"",name:"shape",required:!1,type:{name:"enum",value:[{value:"undefined"},{value:'"circle"'},{value:'"square"'},{value:'"rounded"'}]}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string | undefined"}}}}}catch{}function L(A,r={}){const{artistName:e,type:t,description:a,fallback:l}=r;if(a&&a.trim())return a.trim();if(e)switch(t){case"avatar":case"profile":return`${e} - Profile photo`;case"cover":return`${e} - Cover image`;case"artwork":return`${e} - Album artwork`;default:return`${e} - Image`}const n=S(A);if(n){const i=$(n);if(i&&i!=="image")return i}return l||G(t)}function S(A){try{if(A.startsWith("http")){const a=new URL(A).pathname.split("/").pop();return a?decodeURIComponent(a):null}return A.split("/").pop()||null}catch{return null}}function $(A){return A.replace(/\.(jpg|jpeg|png|webp|avif|svg|gif)$/i,"").replace(/[-_]/g," ").replace(/^(img|image|photo|pic|picture)[\s-_]/i,"").replace(/[\s-_](img|image|photo|pic|picture)$/i,"").replace(/\b\w/g,r=>r.toUpperCase()).replace(/\s+/g," ").trim()}function G(A){switch(A){case"avatar":case"profile":return"Profile photo";case"cover":return"Cover image";case"artwork":return"Album artwork";case"icon":return"Icon";default:return"Image"}}const m=new Map;function Q(A,r){const e=`${A}_`;if(m.has(e))return m.get(e);const t=A+Date.now().toString();let a=0;for(let n=0;n<t.length;n++){const i=t.charCodeAt(n);a=(a<<5)-a+i,a=a&a}const l=Math.abs(a).toString(16).substring(0,8);return m.set(e,l),l}function T(A,r){if(!A)return A;const e=["i.scdn.co","images.unsplash.com","api.qrserver.com"];try{const t=new URL(A);if(e.some(l=>t.hostname.includes(l)))return A;const a=r||Q(A);return t.searchParams.set("v",a),t.toString()}catch{if(e.some(l=>A.includes(l)))return A;const t=A.includes("?")?"&":"?",a=Q(A);return`${A}${t}v=${a}`}}const X={sm:"h-8 w-8",md:"h-12 w-12",lg:"h-16 w-16",xl:"h-24 w-24","2xl":"h-32 w-32"},K={circle:"rounded-full",square:"rounded-none",rounded:"rounded-lg"},p={square:"data:image/webp;base64,UklGRoQCAABXRUJQVlA4WAoAAAAgAAAAPwAAPwAASUNDUMgBAAAAAAHIAAAAAAQwAABtbnRyUkdCIFhZWiAH4AABAAEAAAAAAABhY3NwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAA9tYAAQAAAADTLQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAlkZXNjAAAA8AAAACRyWFlaAAABFAAAABRnWFlaAAABKAAAABRiWFlaAAABPAAAABR3dHB0AAABUAAAABRyVFJDAAABZAAAAChnVFJDAAABZAAAAChiVFJDAAABZAAAAChjcHJ0AAABjAAAADxtbHVjAAAAAAAAAAEAAAAMZW5VUwAAAAgAAAAcAHMAUgBHAEJYWVogAAAAAAAAb6IAADj1AAADkFhZWiAAAAAAAABimQAAt4UAABjaWFlaIAAAAAAAACSgAAAPhAAAts9YWVogAAAAAAAA9tYAAQAAAADTLXBhcmEAAAAAAAQAAAACZmYAAPKnAAANWQAAE9AAAApbAAAAAAAAAABtbHVjAAAAAAAAAAEAAAAMZW5VUwAAACAAAAAcAEcAbwBvAGcAbABlACAaSQBuAGMALgAgADIAMAAxADZWUDhUAAAALwAAAP8QEI0AAAAgHyAQg4CARGQ=",video:"data:image/webp;base64,UklGRnoCAABXRUJQVlA4WAoAAAAgAAAATwAAOQAASUNDUMgBAAAAAAHIAAAAAAQwAABtbnRyUkdCIFhZWiAH4AABAAEAAAAAAABhY3NwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAA9tYAAQAAAADTLQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAlkZXNjAAAA8AAAACRyWFlaAAABFAAAABRnWFlaAAABKAAAABRiWFlaAAABPAAAABR3dHB0AAABUAAAABRyVFJDAAABZAAAAChnVFJDAAABZAAAAChiVFJDAAABZAAAAChjcHJ0AAABjAAAADxtbHVjAAAAAAAAAAEAAAAMZW5VUwAAAAgAAAAcAHMAUgBHAEJYWVogAAAAAAAAb6IAADj1AAADkFhZWiAAAAAAAABimQAAt4UAABjaWFlaIAAAAAAAACSgAAAPhAAAts9YWVogAAAAAAAA9tYAAQAAAADTLXBhcmEAAAAAAAQAAAACZmYAAPKnAAANWQAAE9AAAApbAAAAAAAAAABtbHVjAAAAAAAAAAEAAAAMZW5VUwAAACAAAAAcAEcAbwBvAGcAbABlACAaSQBuAGMALgAgADIAMAAxADZWUDhUAAAAKwAAAP8QEI0AAAAgHyAQg4CARGQ5iQ==",portrait:"data:image/webp;base64,UklGRnICAABXRUJQVlA4WAoAAAAgAAAAOQAATwAASUNDUMgBAAAAAAHIAAAAAAQwAABtbnRyUkdCIFhZWiAH4AABAAEAAAAAAABhY3NwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAA9tYAAQAAAADTLQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAlkZXNjAAAA8AAAACRyWFlaAAABFAAAABRnWFlaAAABKAAAABRiWFlaAAABPAAAABR3dHB0AAABUAAAABRyVFJDAAABZAAAAChnVFJDAAABZAAAAChiVFJDAAABZAAAAChjcHJ0AAABjAAAADxtbHVjAAAAAAAAAAEAAAAMZW5VUwAAAAgAAAAcAHMAUgBHAEJYWVogAAAAAAAAb6IAADj1AAADkFhZWiAAAAAAAABimQAAt4UAABjaWFlaIAAAAAAAACSgAAAPhAAAts9YWVogAAAAAAAA9tYAAQAAAADTLXBhcmEAAAAAAAQAAAACZmYAAPKnAAANWQAAE9AAAApbAAAAAAAAAABtbHVjAAAAAAAAAAEAAAAMZW5VUwAAACAAAAAcAEcAbwBvAGcAbABlACAaSQBuAGMALgAgADIAMAAxADZWUDhUAAAAKwAAAP8QEI0AAAAgHyAQg4CARGQ5iXnORlY=",wide:"data:image/webp;base64,UklGRnoCAABXRUJQVlA4WAoAAAAgAAAAfwAAOQAASUNDUMgBAAAAAAHIAAAAAAQwAABtbnRyUkdCIFhZWiAH4AABAAEAAAAAAABhY3NwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAA9tYAAQAAAADTLQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAlkZXNjAAAA8AAAACRyWFlaAAABFAAAABRnWFlaAAABKAAAABRiWFlaAAABPAAAABR3dHB0AAABUAAAABRyVFJDAAABZAAAAChnVFJDAAABZAAAAChiVFJDAAABZAAAAChjcHJ0AAABjAAAADxtbHVjAAAAAAAAAAEAAAAMZW5VUwAAAAgAAAAcAHMAUgBHAEJYWVogAAAAAAAAb6IAADj1AAADkFhZWiAAAAAAAABimQAAt4UAABjaWFlaIAAAAAAAACSgAAAPhAAAts9YWVogAAAAAAAA9tYAAQAAAADTLXBhcmEAAAAAAAQAAAACZmYAAPKnAAANWQAAE9AAAApbAAAAAAAAAABtbHVjAAAAAAAAAAEAAAAMZW5VUwAAACAAAAAcAEcAbwBvAGcAbABlACAaSQBuAGMALgAgADIAMAExADZWUDhUAAAAKwAAAP8QEI0AAAAgHyAQg4CARGQ5iXnORlYjFxAQ"};function O(A){if(typeof A=="number")return A;switch(A){case"square":return 1;case"video":return 16/9;case"portrait":return 4/5;case"wide":return 21/9;default:return}}function z(A){return typeof A=="number"?p.square:p[A]||p.square}function AA(A,r,e,t){return L(A,{artistName:e,type:t,fallback:r})}function f({src:A,alt:r,size:e="md",shape:t="circle",className:a,priority:l=!1,fill:n=!1,width:i,height:o,quality:D=90,aspectRatio:h,objectFit:W="cover",objectPosition:j="center",sizes:v,placeholder:B="blur",blurDataURL:R,fallbackSrc:F="/android-chrome-192x192.png",unoptimized:q=!1,artistName:N,imageType:I,enableVersioning:E=!0}){const[y,Z]=g.useState(!0),[H,P]=g.useState(!1);let u=H||!A?F:A;E&&u&&!u.includes("/android-chrome-")&&(u=T(u));const c=AA(u,r,N,I),w=O(h),k=R||z(h);if(!u)return s.jsx(d,{size:e,shape:t,className:a});const b=!v&&!n?`(max-width: 640px) ${e==="sm"?"32px":e==="md"?"48px":e==="lg"?"64px":e==="xl"?"96px":"128px"}, ${e==="sm"?"32px":e==="md"?"48px":e==="lg"?"64px":e==="xl"?"96px":"128px"}`:v||"(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw",_=C("relative overflow-hidden",!n&&X[e],K[t],a),V={src:u,alt:c,priority:l,quality:D,placeholder:B,...B==="blur"&&{blurDataURL:k},...l&&{fetchPriority:"high"},className:C("transition-opacity duration-300",y?"opacity-0":"opacity-100"),onLoad:()=>Z(!1),onError:()=>P(!0),style:{objectFit:W,objectPosition:j,...w&&{aspectRatio:w}},unoptimized:q};return s.jsxs("div",{className:_,children:[n?s.jsx(x,{...V,alt:c,fill:!0,sizes:b}):s.jsx(x,{...V,alt:c,width:i||(e==="sm"?32:e==="md"?48:e==="lg"?64:e==="xl"?96:128),height:o||(e==="sm"?32:e==="md"?48:e==="lg"?64:e==="xl"?96:128),sizes:b}),y&&s.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-200 via-gray-300 to-gray-200 dark:from-gray-700 dark:via-gray-600 dark:to-gray-700 animate-pulse"})]})}try{f.displayName="OptimizedImage",f.__docgenInfo={description:"",displayName:"OptimizedImage",props:{src:{defaultValue:null,description:"",name:"src",required:!1,type:{name:"string | null | undefined"}},alt:{defaultValue:null,description:"",name:"alt",required:!0,type:{name:"string"}},size:{defaultValue:{value:"md"},description:"",name:"size",required:!1,type:{name:"enum",value:[{value:"undefined"},{value:'"sm"'},{value:'"md"'},{value:'"lg"'},{value:'"xl"'},{value:'"2xl"'}]}},shape:{defaultValue:{value:"circle"},description:"",name:"shape",required:!1,type:{name:"enum",value:[{value:"undefined"},{value:'"circle"'},{value:'"square"'},{value:'"rounded"'}]}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string | undefined"}},priority:{defaultValue:{value:"false"},description:"",name:"priority",required:!1,type:{name:"boolean | undefined"}},fill:{defaultValue:{value:"false"},description:"",name:"fill",required:!1,type:{name:"boolean | undefined"}},width:{defaultValue:null,description:"",name:"width",required:!1,type:{name:"number | undefined"}},height:{defaultValue:null,description:"",name:"height",required:!1,type:{name:"number | undefined"}},quality:{defaultValue:{value:"90"},description:"",name:"quality",required:!1,type:{name:"number | undefined"}},aspectRatio:{defaultValue:null,description:"",name:"aspectRatio",required:!1,type:{name:'number | "square" | "video" | "portrait" | "wide" | undefined'}},objectFit:{defaultValue:{value:"cover"},description:"",name:"objectFit",required:!1,type:{name:"enum",value:[{value:"undefined"},{value:'"none"'},{value:'"cover"'},{value:'"contain"'},{value:'"fill"'},{value:'"scale-down"'}]}},objectPosition:{defaultValue:{value:"center"},description:"",name:"objectPosition",required:!1,type:{name:"string | undefined"}},sizes:{defaultValue:null,description:"",name:"sizes",required:!1,type:{name:"string | undefined"}},placeholder:{defaultValue:{value:"blur"},description:"",name:"placeholder",required:!1,type:{name:"enum",value:[{value:"undefined"},{value:'"blur"'},{value:'"empty"'}]}},blurDataURL:{defaultValue:null,description:"",name:"blurDataURL",required:!1,type:{name:"string | undefined"}},fallbackSrc:{defaultValue:{value:"/android-chrome-192x192.png"},description:"",name:"fallbackSrc",required:!1,type:{name:"string | undefined"}},unoptimized:{defaultValue:{value:"false"},description:"",name:"unoptimized",required:!1,type:{name:"boolean | undefined"}},artistName:{defaultValue:null,description:"",name:"artistName",required:!1,type:{name:"string | undefined"}},imageType:{defaultValue:null,description:"",name:"imageType",required:!1,type:{name:"enum",value:[{value:"undefined"},{value:'"icon"'},{value:'"cover"'},{value:'"avatar"'},{value:'"profile"'},{value:'"artwork"'}]}},enableVersioning:{defaultValue:{value:"true"},description:"",name:"enableVersioning",required:!1,type:{name:"boolean | undefined"}}}}}catch{}const eA={sm:{width:112,height:112,className:"size-28"},md:{width:160,height:160,className:"size-40"},lg:{width:192,height:192,className:"size-48"},xl:{width:224,height:224,className:"size-56"}};function U({src:A,alt:r,name:e,size:t="md",priority:a=!1,className:l=""}){const{width:n,height:i,className:o}=eA[t];return s.jsx(f,{src:A,alt:r,width:n,height:i,aspectRatio:"square",objectFit:"cover",objectPosition:"center",priority:a,quality:85,placeholder:"blur",sizes:`(max-width: 768px) ${n}px, ${n}px`,className:`${o} ring-1 ring-black/10 dark:ring-white/15 shadow-lg group-hover:ring-white/25 ${l}`,shape:"circle",artistName:e,imageType:"avatar",enableVersioning:!0})}try{U.displayName="ArtistAvatar",U.__docgenInfo={description:"",displayName:"ArtistAvatar",props:{src:{defaultValue:null,description:"",name:"src",required:!0,type:{name:"string"}},alt:{defaultValue:null,description:"",name:"alt",required:!0,type:{name:"string"}},name:{defaultValue:null,description:"",name:"name",required:!0,type:{name:"string"}},size:{defaultValue:{value:"md"},description:"",name:"size",required:!1,type:{name:"enum",value:[{value:"undefined"},{value:'"sm"'},{value:'"md"'},{value:'"lg"'},{value:'"xl"'}]}},priority:{defaultValue:{value:"false"},description:"",name:"priority",required:!1,type:{name:"boolean | undefined"}},className:{defaultValue:{value:""},description:"",name:"className",required:!1,type:{name:"string | undefined"}}}}}catch{}export{U as A};
