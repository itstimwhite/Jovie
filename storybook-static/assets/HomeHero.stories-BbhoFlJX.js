import{j as e}from"./jsx-runtime-nlD-EgCR.js";import{L as ee}from"./link-C04pt5ug.js";import{H as ae}from"./HeroSection-C1bqlYJd.js";import{r as te,u as E,a as re,_ as se}from"./router-BEo8vDK_.js";import{R as S,u as ne,r as n}from"./iframe-BD9qcwu-.js";import{I as ie}from"./Input-QEgdNR0s.js";import{B as W}from"./Button-BzwZ4BTt.js";import{L as _}from"./LoadingSpinner-fa8Ycb3U.js";import{A as le}from"./app-BLJZaWm-.js";import{u as oe,F as ce}from"./analytics-D1RlhUK7.js";import"./use-merged-ref-BX-EWIVL.js";import"./Container-Stspju0f.js";import"./utils-C1Vhx1Sh.js";import"./clsx-B-dksMZM.js";import"./GradientText-D0NpYj3w.js";import"./chunk-3CN5LOSN-BZRyppmj.js";import"./index-C9Qx2Ew6.js";import"./preload-helper-Dp1pzeXC.js";import"./LoadingSpinner-B-wbQU0Y.js";import"./image-DeoQVfv0.js";import"./env-CfNjJZ1e.js";const de=S.createContext(null);function ue(s={}){const o=te.useRouter(),i=S.useContext(de);let a=i;return i&&"then"in i&&(a=S.use(i)),typeof window>"u"?o?E(s):re({...a,...s}):E({...a,...s})}function xe(){const s=ne(),{isSignedIn:o}=ue(),i=le.replace(/^https?:\/\//,""),[a,j]=n.useState(""),[z,J]=n.useState(!1),[m,y]=n.useState(!1),[t,f]=n.useState(null),[w,p]=n.useState(null),[O,H]=n.useState(!1),[L,C]=n.useState(!1),h=n.useRef(""),l=n.useMemo(()=>a?a.length<3?"Handle must be at least 3 characters":a.length>30?"Handle must be less than 30 characters":/^[a-z0-9-]+$/.test(a)?a.startsWith("-")||a.endsWith("-")?"Handle cannot start or end with a hyphen":null:"Handle can only contain lowercase letters, numbers, and hyphens":null,[a]);n.useEffect(()=>{if(t===!0&&a){const r=`/onboarding?handle=${encodeURIComponent(a.toLowerCase())}`;s.prefetch(r)}},[t,a,s]),n.useEffect(()=>{if(p(null),C(!1),!a||l){f(null),y(!1);return}const r=a.toLowerCase();h.current=r,y(!0);const u=new AbortController,Z=setTimeout(async()=>{try{const x=await fetch(`/api/handle/check?handle=${encodeURIComponent(r)}`,{signal:u.signal}),c=await x.json().catch(()=>({available:!1,error:"Parse error"}));if(h.current!==r)return;x.ok?(f(!!(c!=null&&c.available)),p(null)):(f(null),p((c==null?void 0:c.error)||"Error checking availability"))}catch(x){if(x instanceof DOMException&&x.name==="AbortError"||h.current!==r)return;f(null),p("Network error")}finally{h.current===r&&y(!1)}},450);return()=>{clearTimeout(Z),u.abort()}},[a,l]);const V=n.useCallback(async r=>{if(r.preventDefault(),l||m||t!==!0){H(!0),setTimeout(()=>H(!1),180);return}try{sessionStorage.setItem("pendingClaim",JSON.stringify({handle:a.toLowerCase(),ts:Date.now()}))}catch{}const u=`/onboarding?handle=${encodeURIComponent(a.toLowerCase())}`;if(J(!0),!o){s.push(`/sign-up?redirect_url=${encodeURIComponent(u)}`);return}s.push(u)},[t,m,a,l,o,s]),k=m,d=t===!1||!!l||!!w,X=t===!0&&!m&&!z,G="Create Profile",q=t===!0?"green":"indigo",K=!X,Q=()=>k?e.jsx(_,{size:"sm",className:"text-zinc-500 dark:text-zinc-400"}):a?t===!0&&!l?e.jsx("svg",{className:"h-4 w-4 text-green-600",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 10-1.214-.882l-3.2 4.4-1.63-1.63a.75.75 0 10-1.06 1.06l2.25 2.25a.75.75 0 001.145-.089l3.71-5.109z",clipRule:"evenodd"})}):d?e.jsx("svg",{className:"h-4 w-4 text-red-600",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM7.75 7.75a.75.75 0 011.06 0L10 8.94l1.19-1.19a.75.75 0 111.06 1.06L11.06 10l1.19 1.19a.75.75 0 11-1.06 1.06L10 11.06l-1.19 1.19a.75.75 0 11-1.06-1.06L8.94 10 7.75 8.81a.75.75 0 010-1.06z",clipRule:"evenodd"})}):null:null,Y=k?"text-gray-500 dark:text-gray-400":t===!0?"text-green-600 dark:text-green-500":d?"text-red-600 dark:text-red-400":"text-gray-500 dark:text-gray-400",N=l||w||(t===!1?"Handle already taken":null),A=async()=>{try{await navigator.clipboard.writeText(`${i}/${a}`),C(!0),setTimeout(()=>C(!1),1200)}catch{}};return e.jsxs("form",{onSubmit:V,className:"jsx-67cf591bc70dadb3 space-y-4",children:[e.jsx(ie,{type:"text",value:a,onChange:r=>j(r.target.value.toLowerCase()),placeholder:"your-handle","aria-label":"Claim your handle","aria-describedby":N?"handle-helper-text":"handle-preview-text","aria-invalid":d?"true":"false",autoCapitalize:"none",autoCorrect:"off",className:`${O?"jv-shake":""} ${t===!0?"jv-available":""} transition-all duration-150 hover:shadow-lg focus-within:shadow-lg`,inputClassName:"text-[16px] leading-6 tracking-tight font-medium placeholder:text-zinc-400 dark:placeholder:text-zinc-500 pr-36 sm:pr-40 min-h-[44px] focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-1",trailing:e.jsxs("div",{className:"jsx-67cf591bc70dadb3 flex items-center gap-2",children:[e.jsx("div",{"aria-hidden":!0,className:"jsx-67cf591bc70dadb3 flex items-center justify-center",children:e.jsx(Q,{className:"jsx-67cf591bc70dadb3"})}),e.jsx(W,{type:"submit",variant:"primary",color:q,size:"sm",className:"min-w-[136px] w-[136px] h-[36px] justify-center disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 hover:scale-105 active:scale-95",disabled:K||!a,"aria-describedby":"claim-button-status",children:e.jsx("span",{className:"jsx-67cf591bc70dadb3 inline-flex items-center justify-center gap-2 transition-opacity duration-250",children:k?e.jsxs(e.Fragment,{children:[e.jsx(_,{size:"sm",className:"text-white"}),e.jsx("span",{className:"jsx-67cf591bc70dadb3",children:"Checking…"})]}):z?"Setting things up…":G})})]})}),e.jsx("div",{id:"handle-preview-text",className:"jsx-67cf591bc70dadb3 min-h-[1.25rem]",children:a?e.jsxs("div",{className:"jsx-67cf591bc70dadb3 flex items-center justify-between text-xs",children:[e.jsxs("p",{onClick:t?A:void 0,title:t?L?"Copied!":"Click to copy":void 0,role:t?"button":void 0,tabIndex:t?0:void 0,onKeyDown:t?r=>{(r.key==="Enter"||r.key===" ")&&(r.preventDefault(),A())}:void 0,"aria-label":t?`Copy profile URL ${i}/${a}`:void 0,className:`jsx-67cf591bc70dadb3 ${Y} select-none transition-colors duration-200 ${t?"cursor-pointer hover:text-green-700 dark:hover:text-green-400 active:scale-[0.98] touch-manipulation":""} truncate`,children:[e.jsxs("span",{className:"jsx-67cf591bc70dadb3 text-gray-400 dark:text-gray-500",children:[i,"/"]}),e.jsx("span",{className:"jsx-67cf591bc70dadb3 font-semibold text-current",children:a})]}),t&&e.jsx("span",{className:`jsx-67cf591bc70dadb3 inline-flex items-center gap-1 px-2 py-1 rounded-full text-[10px] font-medium transition-all duration-200 ${t?"bg-green-100 text-green-700 dark:bg-green-900/20 dark:text-green-400":""}`,children:L?e.jsxs(e.Fragment,{children:[e.jsx("svg",{fill:"currentColor",viewBox:"0 0 20 20",className:"jsx-67cf591bc70dadb3 w-3 h-3",children:e.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd",className:"jsx-67cf591bc70dadb3"})}),"Copied!"]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{fill:"currentColor",viewBox:"0 0 20 20",className:"jsx-67cf591bc70dadb3 w-3 h-3",children:e.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd",className:"jsx-67cf591bc70dadb3"})}),"Available"]})})]}):e.jsxs("p",{className:"jsx-67cf591bc70dadb3 text-xs text-gray-400 dark:text-gray-500",children:[e.jsxs("span",{className:"jsx-67cf591bc70dadb3 text-gray-400 dark:text-gray-500",children:[i,"/"]}),e.jsx("span",{className:"jsx-67cf591bc70dadb3 text-gray-400 dark:text-gray-500",children:"your-handle"})]})}),e.jsx("div",{"aria-live":"polite","aria-atomic":"true",id:"handle-helper-text",className:"jsx-67cf591bc70dadb3 min-h-[1.125rem]",children:N?e.jsxs("p",{role:"alert",className:`jsx-67cf591bc70dadb3 flex items-center gap-1.5 text-[12px] transition-all duration-200 ${d?"text-red-600 dark:text-red-400":"text-gray-500 dark:text-gray-400"}`,children:[d?e.jsx("svg",{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",className:"jsx-67cf591bc70dadb3 h-3.5 w-3.5 flex-shrink-0",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM9 6h2v6H9V6zm0 7h2v2H9v-2z",clipRule:"evenodd",className:"jsx-67cf591bc70dadb3"})}):e.jsx("svg",{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",className:"jsx-67cf591bc70dadb3 h-3.5 w-3.5 flex-shrink-0",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 10-1.214-.882l-3.2 4.4-1.63-1.63a.75.75 0 10-1.06 1.06l2.25 2.25a.75.75 0 001.145-.089l3.71-5.109z",clipRule:"evenodd",className:"jsx-67cf591bc70dadb3"})}),e.jsx("span",{className:"jsx-67cf591bc70dadb3",children:N})]}):null}),e.jsx(se,{id:"67cf591bc70dadb3",children:".jv-shake.jsx-67cf591bc70dadb3{animation:jv-shake 150ms ease-in-out}@keyframes jv-shake{0%,100%{transform:translatex(0)}25%{transform:translatex(-2px)}50%{transform:translatex(2px)}75%{transform:translatex(-2px)}}.jv-available.jsx-67cf591bc70dadb3{box-shadow:0 0 0 0 rgba(16,185,129,.35);animation:jv-available-pulse 900ms ease-out 1}@keyframes jv-available-pulse{0%{box-shadow:0 0 0 0 rgba(16,185,129,.4)}70%{box-shadow:0 0 0 8px rgba(16,185,129,0)}100%{box-shadow:0 0 0 0 rgba(16,185,129,0)}}"})]})}function R({subtitle:s}){const{enabled:o,loading:i}=oe(ce.CLAIM_HANDLE,!1),a=s??"Your personalized link in bio, ready in seconds.",j=i?e.jsx("div",{className:"flex flex-col items-center gap-4",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-48 mb-4"}),e.jsx("div",{className:"h-10 bg-gray-200 dark:bg-gray-700 rounded w-full"})]})}):o?e.jsx(xe,{}):e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-white/70",children:"Create your artist page in seconds."}),e.jsx(W,{as:ee,href:"/sign-up",size:"lg","data-test":"signup-btn",children:"Sign up to get started"})]});return e.jsx(ae,{headline:"Claim your handle",highlightText:"handle",gradientVariant:"primary",subtitle:a,supportingText:"Go live in 60 seconds • Free forever",trustIndicators:e.jsx("p",{className:"text-xs text-gray-400 dark:text-white/40 font-medium",children:"Trusted by 10,000+ artists worldwide"}),children:j})}try{R.displayName="HomeHero",R.__docgenInfo={description:"",displayName:"HomeHero",props:{subtitle:{defaultValue:null,description:"",name:"subtitle",required:!1,type:{name:"ReactNode"}}}}}catch{}const $e={title:"Home/Organisms/HomeHero",component:R,parameters:{layout:"fullscreen",backgrounds:{default:"light"}},tags:["autodocs"]},b={},g={args:{subtitle:"Build your music career with our all-in-one platform"}},v={args:{subtitle:e.jsxs(e.Fragment,{children:["Create your ",e.jsx("strong",{children:"professional"})," artist page"]})}};var $,I,D;b.parameters={...b.parameters,docs:{...($=b.parameters)==null?void 0:$.docs,source:{originalSource:"{}",...(D=(I=b.parameters)==null?void 0:I.docs)==null?void 0:D.source}}};var F,B,M;g.parameters={...g.parameters,docs:{...(F=g.parameters)==null?void 0:F.docs,source:{originalSource:`{
  args: {
    subtitle: 'Build your music career with our all-in-one platform'
  }
}`,...(M=(B=g.parameters)==null?void 0:B.docs)==null?void 0:M.source}}};var T,P,U;v.parameters={...v.parameters,docs:{...(T=v.parameters)==null?void 0:T.docs,source:{originalSource:`{
  args: {
    subtitle: <>
        Create your <strong>professional</strong> artist page
      </>
  }
}`,...(U=(P=v.parameters)==null?void 0:P.docs)==null?void 0:U.source}}};const Ie=["Default","CustomSubtitle","WithJSXSubtitle"];export{g as CustomSubtitle,b as Default,v as WithJSXSubtitle,Ie as __namedExportsOrder,$e as default};
