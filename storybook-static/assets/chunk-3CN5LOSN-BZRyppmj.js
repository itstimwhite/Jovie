var K=[".lcl.dev",".lclstage.dev",".lclclerk.com"],E=[".lcl.dev",".stg.dev",".lclstage.dev",".stgstage.dev",".dev.lclclerk.com",".stg.lclclerk.com",".accounts.lclclerk.com","accountsstage.dev","accounts.dev"],$=[".lcl.dev","lclstage.dev",".lclclerk.com",".accounts.lclclerk.com"],D=[".accountsstage.dev"],z="https://api.lclclerk.com",N="https://api.clerkstage.dev",W="https://api.clerk.com",g=e=>typeof atob<"u"&&typeof atob=="function"?atob(e):typeof globalThis<"u"&&globalThis.Buffer?new globalThis.Buffer(e,"base64").toString():e,p="pk_live_",_="pk_test_";function m(e){if(!e.endsWith("$"))return!1;const r=e.slice(0,-1);return r.includes("$")?!1:r.includes(".")}function j(e,r={}){if(e=e||"",!e||!f(e)){if(r.fatal&&!e)throw new Error("Publishable key is missing. Ensure that your publishable key is correctly configured. Double-check your environment configuration for your keys, or access them here: https://dashboard.clerk.com/last-active?path=api-keys");if(r.fatal&&!f(e))throw new Error("Publishable key not valid.");return null}const t=e.startsWith(p)?"production":"development";let s;try{s=g(e.split("_")[2])}catch{if(r.fatal)throw new Error("Publishable key not valid: Failed to decode key.");return null}if(!m(s)){if(r.fatal)throw new Error("Publishable key not valid: Decoded key has invalid format.");return null}let i=s.slice(0,-1);return r.proxyUrl?i=r.proxyUrl:t!=="development"&&r.domain&&r.isSatellite&&(i=`clerk.${r.domain}`),{instanceType:t,frontendApi:i}}function f(e=""){try{if(!(e.startsWith(p)||e.startsWith(_)))return!1;const t=e.split("_");if(t.length!==3)return!1;const s=t[2];if(!s)return!1;const i=g(s);return m(i)}catch{return!1}}function B(){const e=new Map;return{isDevOrStagingUrl:r=>{if(!r)return!1;const t=typeof r=="string"?r:r.hostname;let s=e.get(t);return s===void 0&&(s=E.some(i=>t.endsWith(i)),e.set(t,s)),s}}}var G=()=>{try{return!1}catch{}return!1},S=()=>{try{return!1}catch{}return!1},k=()=>{try{return!0}catch{}return!1},h=new Set,Y=(e,r,t)=>{const s=S()||k(),i=e;h.has(i)||s||(h.add(i),console.warn(`Clerk - DEPRECATION WARNING: "${e}" is deprecated and will be removed in the next major release.
${r}`))};function P(e=[]){return e.length>0?e.map(w):[]}function w(e){var r,t,s,i,a,l,n;return{code:e.code,message:e.message,longMessage:e.long_message,meta:{paramName:(r=e==null?void 0:e.meta)==null?void 0:r.param_name,sessionId:(t=e==null?void 0:e.meta)==null?void 0:t.session_id,emailAddresses:(s=e==null?void 0:e.meta)==null?void 0:s.email_addresses,identifiers:(i=e==null?void 0:e.meta)==null?void 0:i.identifiers,zxcvbn:(a=e==null?void 0:e.meta)==null?void 0:a.zxcvbn,plan:(l=e==null?void 0:e.meta)==null?void 0:l.plan,isPlanUpgradePossible:(n=e==null?void 0:e.meta)==null?void 0:n.is_plan_upgrade_possible}}}var X=class b extends Error{constructor(r,{data:t,status:s,clerkTraceId:i,retryAfter:a}){super(r),this.toString=()=>{let l=`[${this.name}]
Message:${this.message}
Status:${this.status}
Serialized errors: ${this.errors.map(n=>JSON.stringify(n))}`;return this.clerkTraceId&&(l+=`
Clerk Trace ID: ${this.clerkTraceId}`),l},Object.setPrototypeOf(this,b.prototype),this.status=s,this.message=r,this.clerkTraceId=i,this.retryAfter=a,this.clerkError=!0,this.errors=P(t)}},A=Object.freeze({InvalidProxyUrlErrorMessage:"The proxyUrl passed to Clerk is invalid. The expected value for proxyUrl is an absolute URL or a relative path with a leading '/'. (key={{url}})",InvalidPublishableKeyErrorMessage:"The publishableKey passed to Clerk is invalid. You can get your Publishable key at https://dashboard.clerk.com/last-active?path=api-keys. (key={{key}})",MissingPublishableKeyErrorMessage:"Missing publishableKey. You can get your key at https://dashboard.clerk.com/last-active?path=api-keys.",MissingSecretKeyErrorMessage:"Missing secretKey. You can get your key at https://dashboard.clerk.com/last-active?path=api-keys.",MissingClerkProvider:"{{source}} can only be used within the <ClerkProvider /> component. Learn more: https://clerk.com/docs/components/clerk-provider"});function H({packageName:e,customMessages:r}){let t=e;function s(a,l){if(!l)return`${t}: ${a}`;let n=a;const o=a.matchAll(/{{([a-zA-Z0-9-_]+)}}/g);for(const u of o){const c=(l[u[1]]||"").toString();n=n.replace(`{{${u[1]}}}`,c)}return`${t}: ${n}`}const i={...A,...r};return{setPackageName({packageName:a}){return typeof a=="string"&&(t=a),this},setMessages({customMessages:a}){return Object.assign(i,a||{}),this},throwInvalidPublishableKeyError(a){throw new Error(s(i.InvalidPublishableKeyErrorMessage,a))},throwInvalidProxyUrl(a){throw new Error(s(i.InvalidProxyUrlErrorMessage,a))},throwMissingPublishableKeyError(){throw new Error(s(i.MissingPublishableKeyErrorMessage))},throwMissingSecretKeyError(){throw new Error(s(i.MissingSecretKeyErrorMessage))},throwMissingClerkProviderError(a){throw new Error(s(i.MissingClerkProvider,a))},throw(a){throw new Error(s(a))}}}var M={strict_mfa:{afterMinutes:10,level:"multi_factor"},strict:{afterMinutes:10,level:"second_factor"},moderate:{afterMinutes:60,level:"second_factor"},lax:{afterMinutes:1440,level:"second_factor"}},I=new Set(["first_factor","second_factor","multi_factor"]),L=new Set(["strict_mfa","strict","moderate","lax"]),T=e=>typeof e=="number"&&e>0,C=e=>I.has(e),U=e=>L.has(e),d=e=>e.replace(/^(org:)*/,"org:"),O=(e,r)=>{const{orgId:t,orgRole:s,orgPermissions:i}=r;return!e.role&&!e.permission||!t||!s||!i?null:e.permission?i.includes(d(e.permission)):e.role?d(s)===d(e.role):null},v=(e,r)=>{const{org:t,user:s}=V(e),[i,a]=r.split(":"),l=a||i;return i==="org"?t.includes(l):i==="user"?s.includes(l):[...t,...s].includes(l)},R=(e,r)=>{const{features:t,plans:s}=r;return e.feature&&t?v(t,e.feature):e.plan&&s?v(s,e.plan):null},V=e=>{const r=e?e.split(",").map(t=>t.trim()):[];return{org:r.filter(t=>t.split(":")[0].includes("o")).map(t=>t.split(":")[1]),user:r.filter(t=>t.split(":")[0].includes("u")).map(t=>t.split(":")[1])}},x=e=>{if(!e)return!1;const r=i=>typeof i=="string"?M[i]:i,t=typeof e=="string"&&U(e),s=typeof e=="object"&&C(e.level)&&T(e.afterMinutes);return t||s?r.bind(null,e):!1},F=(e,{factorVerificationAge:r})=>{if(!e.reverification||!r)return null;const t=x(e.reverification);if(!t)return null;const{level:s,afterMinutes:i}=t(),[a,l]=r,n=a!==-1?i>a:null,o=l!==-1?i>l:null;switch(s){case"first_factor":return n;case"second_factor":return l!==-1?o:n;case"multi_factor":return l===-1?n:n&&o}},J=e=>r=>{if(!e.userId)return!1;const t=R(r,e),s=O(r,e),i=F(r,e);return[t||s,i].some(a=>a===null)?[t||s,i].some(a=>a===!0):[t||s,i].every(a=>a===!0)},Z=({authObject:{sessionId:e,sessionStatus:r,userId:t,actor:s,orgId:i,orgRole:a,orgSlug:l,signOut:n,getToken:o,has:u,sessionClaims:c},options:{treatPendingAsSignedOut:y=!0}})=>{if(e===void 0&&t===void 0)return{isLoaded:!1,isSignedIn:void 0,sessionId:e,sessionClaims:void 0,userId:t,actor:void 0,orgId:void 0,orgRole:void 0,orgSlug:void 0,has:void 0,signOut:n,getToken:o};if(e===null&&t===null)return{isLoaded:!0,isSignedIn:!1,sessionId:e,userId:t,sessionClaims:null,actor:null,orgId:null,orgRole:null,orgSlug:null,has:()=>!1,signOut:n,getToken:o};if(y&&r==="pending")return{isLoaded:!0,isSignedIn:!1,sessionId:null,userId:null,sessionClaims:null,actor:null,orgId:null,orgRole:null,orgSlug:null,has:()=>!1,signOut:n,getToken:o};if(e&&c&&t&&i&&a)return{isLoaded:!0,isSignedIn:!0,sessionId:e,sessionClaims:c,userId:t,actor:s||null,orgId:i,orgRole:a,orgSlug:l||null,has:u,signOut:n,getToken:o};if(e&&c&&t&&!i)return{isLoaded:!0,isSignedIn:!0,sessionId:e,sessionClaims:c,userId:t,actor:s||null,orgId:null,orgRole:null,orgSlug:null,has:u,signOut:n,getToken:o}};export{X as C,K as L,W as P,D as S,w as a,H as b,J as c,Y as d,$ as e,z as f,N as g,k as h,G as i,B as j,j as p,Z as r,V as s};
