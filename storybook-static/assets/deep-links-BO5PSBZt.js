import{d as p}from"./utils-C1Vhx1Sh.js";import"./clsx-B-dksMZM.js";const b={instagram:{name:"Instagram",iosScheme:"instagram://user?username={username}",androidScheme:"intent://instagram.com/_u/{username}#Intent;package=com.instagram.android;scheme=https;end",universalLink:"https://instagram.com/{username}",webFallback:"https://instagram.com/{username}",extractUsername:t=>{const e=t.match(/instagram\.com\/([^/?#]+)/);return e?e[1]:null}},tiktok:{name:"TikTok",iosScheme:"tiktok://user?username={username}",androidScheme:"intent://www.tiktok.com/@{username}#Intent;package=com.zhiliaoapp.musically;scheme=https;end",universalLink:"https://www.tiktok.com/@{username}",webFallback:"https://www.tiktok.com/@{username}",extractUsername:t=>{const e=t.match(/tiktok\.com\/@([^/?#]+)/);return e?e[1]:null}},twitter:{name:"Twitter",iosScheme:"twitter://user?screen_name={username}",androidScheme:"intent://twitter.com/{username}#Intent;package=com.twitter.android;scheme=https;end",universalLink:"https://twitter.com/{username}",webFallback:"https://twitter.com/{username}",extractUsername:t=>{const e=t.match(/twitter\.com\/([^/?#]+)/);return e?e[1]:null}},youtube:{name:"YouTube",iosScheme:"youtube://channel/{channelId}",androidScheme:"intent://www.youtube.com/@{username}#Intent;package=com.google.android.youtube;scheme=https;end",universalLink:"https://www.youtube.com/@{username}",webFallback:"https://www.youtube.com/@{username}",extractUsername:t=>{const e=t.match(/youtube\.com\/@([^/?#]+)/);if(e)return e[1];const n=t.match(/youtube\.com\/user\/([^/?#]+)/);if(n)return n[1];const r=t.match(/youtube\.com\/channel\/([^/?#]+)/);return r?r[1]:null},extractId:t=>{const e=t.match(/youtube\.com\/channel\/([^/?#]+)/);return e?e[1]:null}},facebook:{name:"Facebook",iosScheme:"fb://profile/{userId}",androidScheme:"intent://www.facebook.com/{username}#Intent;package=com.facebook.katana;scheme=https;end",universalLink:"https://www.facebook.com/{username}",webFallback:"https://www.facebook.com/{username}",extractUsername:t=>{const e=t.match(/facebook\.com\/([^/?#]+)/);return e?e[1]:null}}},k={spotify:{name:"Spotify",iosScheme:"spotify://artist/{artistId}",androidScheme:"intent://open.spotify.com/artist/{artistId}#Intent;package=com.spotify.music;scheme=https;end",universalLink:"https://open.spotify.com/artist/{artistId}",webFallback:"https://open.spotify.com/artist/{artistId}",extractId:t=>{const e=t.match(/spotify\.com\/artist\/([^/?#]+)/);return e?e[1]:null}},apple_music:{name:"Apple Music",iosScheme:"music://artist/{artistId}",androidScheme:"intent://music.apple.com/artist/{artistId}#Intent;package=com.apple.android.music;scheme=https;end",universalLink:"https://music.apple.com/artist/{artistId}",webFallback:"https://music.apple.com/artist/{artistId}",extractId:t=>{const e=t.match(/music\.apple\.com\/[^/]+\/artist\/[^/]+\/([^/?#]+)/);return e?e[1]:null}},youtube:{name:"YouTube Music",iosScheme:"youtubemusic://browse/channel/{channelId}",androidScheme:"intent://music.youtube.com/channel/{channelId}#Intent;package=com.google.android.apps.youtube.music;scheme=https;end",universalLink:"https://music.youtube.com/channel/{channelId}",webFallback:"https://www.youtube.com/@{username}",extractUsername:t=>{const e=t.match(/youtube\.com\/@([^/?#]+)/);if(e)return e[1];const n=t.match(/youtube\.com\/user\/([^/?#]+)/);return n?n[1]:null},extractId:t=>{const e=t.match(/youtube\.com\/channel\/([^/?#]+)/);return e?e[1]:null}}};function w(t){const n=p();return{platform:n==="ios"?"ios":n==="android"?"android":"desktop",userAgent:""}}function I(t,e,n){var u,i;const r=w(),c=(u=e.extractUsername)==null?void 0:u.call(e,t),a=(i=e.extractId)==null?void 0:i.call(e,t);let m=null,s=t;return r.platform==="ios"&&e.iosScheme?(e.extractId&&a||e.extractUsername&&c)&&(m=e.iosScheme.replace("{username}",c||"").replace("{userId}",a||"").replace("{artistId}",a||"").replace("{channelId}",a||"")):r.platform==="android"&&e.androidScheme&&(e.extractId&&a||e.extractUsername&&c)&&(m=e.androidScheme.replace("{username}",c||"").replace("{userId}",a||"").replace("{artistId}",a||"").replace("{channelId}",a||"")),e.webFallback&&(e.extractId&&a||e.extractUsername&&c)&&(s=e.webFallback.replace("{username}",c||"").replace("{userId}",a||"").replace("{artistId}",a||"").replace("{channelId}",a||"")),r.platform==="ios"&&e.universalLink&&!m&&(e.extractId&&a||e.extractUsername&&c)&&(m=e.universalLink.replace("{username}",c||"").replace("{userId}",a||"").replace("{artistId}",a||"").replace("{channelId}",a||"")),{nativeUrl:m,fallbackUrl:s,platform:r,shouldTryNative:r.platform!=="desktop"&&m!==null}}function S(t,e,n={}){return new Promise(r=>{var l,d;const{timeout:c=2e3}=n,a=I(t,e);if(!a.shouldTryNative||!a.nativeUrl){(l=n.onFallback)==null||l.call(n),window.open(a.fallbackUrl,"_blank","noopener,noreferrer"),r(!1);return}let m=!1,s=null;const u=()=>{document.hidden&&(m=!0,s&&clearTimeout(s),r(!0))},i=()=>{m=!0,s&&clearTimeout(s),r(!0)};document.addEventListener("visibilitychange",u),window.addEventListener("blur",i);const h=()=>{document.removeEventListener("visibilitychange",u),window.removeEventListener("blur",i)};(d=n.onNativeAttempt)==null||d.call(n);try{if(a.platform.platform==="ios"){const o=document.createElement("iframe");o.style.display="none",o.src=a.nativeUrl,document.body.appendChild(o),setTimeout(()=>document.body.removeChild(o),100)}else window.location.href=a.nativeUrl}catch{}s=setTimeout(()=>{var o;h(),m||((o=n.onFallback)==null||o.call(n),window.open(a.fallbackUrl,"_blank","noopener,noreferrer"),r(!1))},c)})}function L(t){const e=t.toLowerCase();return b[e]||null}function v(t){const e=t.toLowerCase();return k[e]||null}export{k as DSP_DEEP_LINKS,b as SOCIAL_DEEP_LINKS,I as createDeepLink,w as detectPlatform,v as getDSPDeepLinkConfig,L as getSocialDeepLinkConfig,S as openDeepLink};
